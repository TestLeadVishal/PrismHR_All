"use strict";(self.webpackChunkprismhr_ess=self.webpackChunkprismhr_ess||[]).push([[1508],{90382:(I,_,t)=>{t.d(_,{W:()=>e});var e=(()=>{return(u=e||(e={})).SSN="ssn",u.EIN="ein",e;var u})()},99981:(I,_,t)=>{t.d(_,{Fs:()=>T,T_:()=>f,UN:()=>O,dL:()=>L,gZ:()=>p,jL:()=>d,js:()=>i,mx:()=>c,pg:()=>g,so:()=>o});var e=t(68757),u=t(15439),E=t.n(u);const o=C=>[{value:"",display:C("LABEL.SELECT_ONE")},{value:"M",display:C("LABEL.MALE")},{value:"F",display:C("LABEL.FEMALE")},{value:"X",display:C("LABEL.NON_BINARY")},{value:"D",display:C("LABEL.DECLINED_TO_STATE")}];function P(C){if(!C)return null;const m=C.replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return m?"("+m[1]+") "+m[2]+"-"+m[3]:null}const i={lastName:new e.hj({property:"lastName",sort:e.ER.ALPHA,localeKey:"FORM.TABLE_COLUMN.NAME",title:"",direction:e.Sr.DESC,enumerable:!1}),employeeNumber:new e.hj({property:"employeeId",localeKey:"LABEL.EMPLOYEE_ID",title:"",sort:e.ER.ALPHA,enumerable:!1}),nickname:new e.hj({property:"nickname",localeKey:"LABEL.NICKNAME",title:"",sort:e.ER.ALPHA,enumerable:!1,visible:!1,default:!1}),reportsToLastName:new e.hj({property:"reportsToLastName",localeKey:"LABEL.REPORTS_TO",sort:e.ER.ALPHA,title:"",direction:e.Sr.DESC,enumerable:!0}),department:new e.hj({property:"department",localeKey:"LABEL.DEPARTMENT",title:"",sort:e.ER.ALPHA}),type:new e.hj({property:"type",localeKey:"LABEL.TYPE",title:"",sort:e.ER.ALPHA}),jobTitle:new e.hj({property:"job",localeKey:"LABEL.JOB_TITLE",title:"",sort:e.ER.ALPHA}),birthDate:new e.hj({property:"birthDate",localeKey:"LABEL.BIRTHDATE",title:"",transform:C=>C&&E().utc(C).format("MM/DD/YYYY"),sort:e.ER.DATE,enumerable:!1,visible:!1,default:!1}),location:new e.hj({property:"location",localeKey:"LABEL.LOCATION",title:"",sort:e.ER.ALPHA,visible:!1,default:!1}),lastHireDate:new e.hj({property:"lastHireDate",localeKey:"LABEL.DATE_OF_HIRE",title:"",transform:C=>C&&E().utc(C).format("MM/DD/YYYY"),sort:e.ER.DATE,enumerable:!1}),status:new e.hj({property:"employeeStatusCode.fullDescription",localeKey:"LABEL.STATUS",title:"",sort:e.ER.ALPHA}),homePhone:new e.hj({property:"homePhone",localeKey:"LABEL.HOME_PHONE",title:"",sort:e.ER.ALPHA,transform:P,visible:!1,default:!1,enumerable:!1}),shift:new e.hj({property:"shift",localeKey:"LABEL.SHIFT",title:"",sort:e.ER.ALPHA,visible:!1,default:!1}),workPhone:new e.hj({property:"workPhone",localeKey:"LABEL.WORK_PHONE",title:"",sort:e.ER.ALPHA,transform:P,enumerable:!1,visible:!1,default:!1}),workPhoneExtension:new e.hj({property:"workPhoneExtension",localeKey:"LABEL.EXT",title:"",sort:e.ER.ALPHA,enumerable:!1,visible:!1,default:!1}),cellPhone:new e.hj({property:"cellPhone",localeKey:"LABEL.CELL_PHONE",title:"",sort:e.ER.ALPHA,transform:P,visible:!1,default:!1,enumerable:!1}),personalEmail:new e.hj({property:"personalEmail",localeKey:"LABEL.EMAIL_PERSONAL",title:"",sort:e.ER.ALPHA,visible:!1,default:!1,enumerable:!1}),workEmail:new e.hj({property:"workEmail",localeKey:"LABEL.EMAIL_WORK",title:"",sort:e.ER.ALPHA,visible:!1,default:!1,enumerable:!1}),division:new e.hj({property:"division",localeKey:"LABEL.DIVISION",title:"",sort:e.ER.ALPHA,visible:!1,default:!1})},p=[i.lastName,i.employeeNumber,i.nickname,i.workEmail,i.workPhone,i.workPhoneExtension,i.cellPhone,i.reportsToLastName,i.department,i.jobTitle,i.type,i.location,i.lastHireDate,i.shift,i.division,i.homePhone,i.birthDate,i.personalEmail,i.status],d=["departmentCode","lastReviewDate","shiftCode","nextReviewDate","lastHireDate","pay","divisionCode","locationCode","reportsTo","workGroupCode","benefitGroup","project","originalHireDate"],L=["birthDate","age","gender","genderDesignation","preferredPronoun","ethnicCode","nickname","tobaccoUser","maritalStatus","handicapped","dateMarried","blind","schoolDistrict"],f=["homePhone","cellPhone","workPhone","personalEmail","workEmail","primaryEmail"],c=["emergencyContacts"],g=Object.freeze({READ:"READ",WRITE:"WRITE"}),O=Object.freeze({HIDDEN:"HIDDEN",READONLY:"READONLY",FULL:"FULL",H:"HIDDEN",D:"READONLY",E:"FULL",I:"READONLY"});function T(C,s,m=g.READ){const r=m===g.READ?[O.READONLY,O.FULL]:m===g.WRITE?[O.FULL]:[];return s.some(v=>{const y=C.find(D=>v===D.property);return!!y&&r.includes(y.visibility)})}},51818:(I,_,t)=>{t.d(_,{M:()=>v});var e=t(591),u=t(34202),E=t(30567),h=t(61737),o=t(80529),P=t(17489),p=t(99981),d=t(87224),L=t(24850),f=t(87545),c=t(2994),A=t(27221),g=t(68757),O=t(94650),T=t(27111),C=t(42466),s=t(14927),r=t(75219);let v=(()=>{class y{constructor(a,l,n,S,R,B){this.http=a,this.authService=l,this.translateService=n,this.domainService=S,this.broadcastService=R,this.localSt=B,this.permissions=[],this.divisions=[],this.departments=[],this.shifts=[],this.locations=[],this.loadEmployeesObservable=new e.X([]),this.employees=[],this.labelDefault={value:null,display:this.translateService.instant("LABEL.NOT_SELECTED")},this.yesNoOptions=[this.labelDefault,{value:!0,display:this.translateService.instant("ACTION.YES")},{value:!1,display:this.translateService.instant("ACTION.NO")}],this.handicappedOptions=[this.labelDefault,{value:"Y",display:this.translateService.instant("ACTION.YES")},{value:"N",display:this.translateService.instant("ACTION.NO")},{value:"D",display:this.translateService.instant("LABEL.DECLINED")}],this.initState(),this.localize(),this.translateService.onLangChange.subscribe(M=>{this.localize()}),this.broadcastService.on("clearCache").subscribe(()=>{this.clearCache()})}clearCache(){this.employeeTableLsKey=null,this.recentEmployeeLsKey=null,this.employees=[],this.permissions=[],this.divisions=[],this.departments=[],this.shifts=[],this.locations=[],this.clientId=null,this.loadEmployeesObservable.next(null)}buildLsKeys(a,l){this.employeeTableLsKey=`${l}-${a}-employees-table`,this.recentEmployeeLsKey=`${l}-${a}-employees-table`}getEmployeeById(a){const l=this.authService.clientIdQP,S=this.domainService.getEssApiPath()+"/clients/"+l+"/employees/"+a;return this.http.get(S,{withCredentials:!0}).pipe((0,d.P)(),(0,L.U)(R=>R.employee?R.employee:R))}getEmployee(a,l=!1){return new u.y(n=>{if(l&&this.employees.length>1){const M=this.employees.find(N=>N.employeeId===a);if(M)return n.next(M),void n.complete()}const S=this.authService.clientIdQP;this.clientId=this.authService.clientIdQP;const B=this.domainService.getEssApiPath()+"/clients/"+S+"/employees/"+a;this.http.get(B,{withCredentials:!0}).subscribe(M=>{const{employee:N}=M;this.permissions=M.permissions,N.avatarUrl=this.domainService.getEssApiPath()+"/clients/"+S+"/employees/"+N.employeeId+"/image",n.next(N),n.complete()},M=>{try{const N=JSON.parse(M.error);n.error(N)}catch{401===M.status?(this.authService.logout(),n.error(M),n.complete()):n.error({errorCode:1,errorMessage:"Server Error"})}})})}getPermission(a){return this.permissions.find(l=>l.property===a)}loadEmployees(a){return this.authService.loadSession().pipe((0,d.P)(),(0,f.w)(l=>{const{clientId:n,user:{employeeId:S}}=l;return this.buildLsKeys(n,S),this.clientId=n,this.loadEmployeesWithPermissions(n,S,l,a)}))}getEmployeesForWidget(){return this.loadEmployees(!0).pipe((0,d.P)())}getEmployees(a=!1){return(0,g.Of)(this.loadEmployeesObservable?.getValue())&&a?this.loadEmployeesObservable.asObservable().pipe((0,d.P)()):this.loadEmployees().pipe((0,d.P)(),(0,c.b)(l=>this.loadEmployeesObservable.next(l)))}localize(){this.tableColumnsConfigs.forEach(a=>{a.title=this.translateService.instant(a.localeKey)}),this.tableColumnsState.forEach(a=>{a.title=this.translateService.instant(a.localeKey)}),this.tableColumns.forEach(a=>{a.title=this.translateService.instant(a.localeKey)})}initState(){const a=l=>!this.permissions.some(n=>n.property===l.property&&"HIDDEN"===n.visibility);if(this.employeeTableLsKey){const l=this.localSt.retrieve(this.employeeTableLsKey);this.tableColumnsConfigs=p.gZ.map(n=>Object.assign(n,l&&l.some(S=>S.property===n.property)?l.find(S=>S.property===n.property):{})),this.tableColumnsConfigs=this.tableColumnsConfigs.filter(a),this.tableColumns=this.tableColumnsConfigs.map(n=>({...n})),this.tableColumnsState=this.tableColumnsConfigs.map(n=>({...n})),this.tableColumnsConfigs.forEach(n=>{n.transform=(0,P.find)(p.js,{property:n.property}).transform||null}),this.localSt.store(this.employeeTableLsKey,this.tableColumnsConfigs)}else{const l=p.gZ.filter(a);this.tableColumnsConfigs=l.map(n=>({...n})),this.tableColumnsState=l.map(n=>({...n})),this.tableColumns=l.map(n=>({...n}))}}saveState(){this.employeeTableLsKey&&(this.localSt.clear(this.employeeTableLsKey),this.localSt.store(this.employeeTableLsKey,this.tableColumnsConfigs))}getDepartments(a=this.clientId){return new u.y(l=>{if(this.departments&&this.departments.length>0)return l.next(this.departments),void l.complete();this.http.get(this.domainService.getEssApiPath()+"/clients/"+a+"/departments",{withCredentials:!0}).subscribe(n=>{this.departments=n,l.next(n),l.complete()},n=>{l.error(n)})})}getLocations(a=this.clientId){return new u.y(l=>{if(this.locations&&this.locations.length>0)return l.next(this.locations),void l.complete();this.http.get(this.domainService.getEssApiPath()+"/clients/"+a+"/locations",{withCredentials:!0}).subscribe(n=>{this.locations=n,l.next(n),l.complete()},n=>{l.error(n)})})}getDivisions(a=this.clientId){return new u.y(l=>{if(this.divisions&&this.divisions.length>0)return l.next(this.divisions),void l.complete();this.http.get(this.domainService.getEssApiPath()+"/clients/"+a+"/divisions",{withCredentials:!0}).subscribe(n=>{this.divisions=n,l.next(n),l.complete()},n=>{l.error(n)})})}getShifts(a=this.clientId){return new u.y(l=>{if(this.shifts&&this.shifts.length>0)return l.next(this.shifts),void l.complete();this.http.get(this.domainService.getEssApiPath()+"/clients/"+a+"/shifts",{withCredentials:!0}).subscribe(n=>{this.shifts=n,l.next(n),l.complete()},n=>{l.error(n)})})}updateEmployee(a,l,n=this.clientId){return new u.y(S=>{const B=this.domainService.getEssApiPath()+"/clients/"+n+"/employees/"+a;this.http.post(B,{employee:l},{responseType:"text",withCredentials:!0}).subscribe(M=>{S.next(),S.complete()},M=>{S.error(M)})})}loadLimitedEmployeesInfo(){const a=`${this.domainService.getEssApiPath()}/clients/${this.authService.clientIdQP}/employees`;return this.http.get(a,{withCredentials:!0}).pipe((0,L.U)(({employees:l})=>l))}loadEmployeesAnniversaries(){const a=`${this.domainService.getEssApiPath()}/clients/${this.authService.clientIdQP}/anniversaries`;return this.http.get(a,{withCredentials:!0})}loadCodes(a=this.clientId){return new u.y(l=>{(0,E.D)([this.getDepartments(a),this.getLocations(a),this.getDivisions(a),this.getShifts(a)]).subscribe(n=>{const[S,R,B,M]=n;this.departments=S,this.locations=R,this.divisions=B,this.shifts=M,l.next(),l.complete()},n=>{l.error(n)})})}loadEmployeesWithPermissions(a,l,n,S){const R=`${this.domainService.getEssApiPath()}/clients/${a}/employees`;let B=new o.LE;return S&&(B=(new o.LE).set("widgetData",!0)),this.http.get(R,{params:B,withCredentials:!0}).pipe((0,d.P)(),(0,L.U)(M=>{const{permissions:N,employees:U}=M;return this.permissions=N,this.initState(),U.map(K=>({...K,avatarUrl:this.domainService.getEssApiPath()+"/clients/"+n.clientId+"/employees/"+K.employeeId+"/image"})).filter(K=>K.employeeId!==l)}),(0,A.K)(M=>{try{return(0,h._)(JSON.parse(M.error))}catch{return 401===M.status?(this.authService.logout(),(0,h._)(M)):(0,h._)({errorCode:1,errorMessage:"Server Error"})}}))}}return y.\u0275fac=function(a){return new(a||y)(O.\u0275\u0275inject(o.eN),O.\u0275\u0275inject(T.e8),O.\u0275\u0275inject(C.sK),O.\u0275\u0275inject(T.NF),O.\u0275\u0275inject(s.BroadcastEventService),O.\u0275\u0275inject(r.n2))},y.\u0275prov=O.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},79193:(I,_,t)=>{t.d(_,{I:()=>O});var e=t(21086),u=t(61737),E=t(68757),h=t(87224),o=t(24850),P=t(2994),i=t(27221),p=t(79534),d=t(6860),L=t(94650),f=t(42466),c=t(27111),A=t(80529),g=t(51818);let O=(()=>{class T{constructor(s,m,r,v,y){this.translateService=s,this.domainService=m,this.http=r,this.authService=v,this.employeesService=y,this.ethnicityOpts=[this.dropdownDefault],this.maritalStatusOptions=[this.dropdownDefault],this.yesNoOptions=[{value:"",display:this.translateService.instant("LABEL.NOT_SELECTED")},{value:!0,display:this.translateService.instant("ACTION.YES")},{value:!1,display:this.translateService.instant("ACTION.NO")}],this.handicappedOptions=[...this.yesNoOptions,{value:"D",display:this.translateService.instant("LABEL.DECLINED")}],this.alphaSort=(D,a)=>D.display.toUpperCase()>a.display.toUpperCase()?1:D.display.toUpperCase()===a.display.toUpperCase()?0:-1}get dropdownDefault(){return{value:null,display:this.translateService.instant("LABEL.SELECT_ONE")}}clearCache(){this.genderDesignationCodes=[],this.reportsToManagers=[],this.ethnicCodes=[],this.pronounCodes=[],this.benefitGroups=[],this.maritalCodes=[],this.projects=[]}getGenderDesignationOpts(){return(0,E.Of)(this.genderDesignationCodes)?(0,e.of)(this.getDropdownSettings(this.genderDesignationCodes)):(0,E.Of)(this.genderDesignationCodes)?(0,e.of)(this.genderDesignationCodes):this.http.get(`${this.domainService.getEssApiPath()}/system/gender-designation`,{withCredentials:!0}).pipe((0,h.P)(),(0,o.U)(s=>s.sort(this.alphaSort)),(0,P.b)(s=>this.genderDesignationCodes=s),(0,o.U)(s=>this.getDropdownSettings(s)),(0,i.K)(s=>(0,u._)(s)))}getPronounOpts(){return(0,E.Of)(this.pronounCodes)?(0,e.of)(this.getDropdownSettings(this.pronounCodes)):this.http.get(`${this.domainService.getEssApiPath()}/system/pronoun-codes`,{withCredentials:!0}).pipe((0,h.P)(),(0,o.U)(s=>s.sort(this.alphaSort)),(0,P.b)(s=>this.pronounCodes=s),(0,o.U)(s=>this.getDropdownSettings(s)),(0,i.K)(s=>(0,u._)(s)))}getEthnicCodes(){return(0,E.Of)(this.ethnicCodes)?(0,e.of)(this.getDropdownSettings(this.ethnicCodes)):this.http.get(this.domainService.getEssApiPath()+"/system/ethnic-codes",{withCredentials:!0}).pipe((0,h.P)(),(0,o.U)(({ethnicCodes:s})=>s.map(m=>({value:m.id,display:m.ethnicity})).sort(this.alphaSort)),(0,P.b)(s=>this.ethnicCodes=s),(0,o.U)(s=>this.getDropdownSettings(s)),(0,i.K)(s=>(0,u._)(s)))}getMaritalCodes(){return(0,E.Of)(this.maritalCodes)?(0,e.of)(this.getDropdownSettings(this.maritalCodes)):this.http.get(this.domainService.getEssApiPath()+"/system/marital-codes",{withCredentials:!0}).pipe((0,h.P)(),(0,o.U)(({maritalCodes:s})=>s.map(m=>({value:m.id,display:m.name})).sort(this.alphaSort)),(0,P.b)(s=>this.maritalCodes=s),(0,o.U)(s=>this.getDropdownSettings(s)),(0,P.b)(s=>this.maritalCodes=s),(0,i.K)(s=>(0,u._)(s)))}getBenefitGroups(){return(0,E.Of)(this.benefitGroups)?(0,e.of)(this.getDropdownSettings(this.benefitGroups)):this.http.get(`${this.domainService.getEssApiPath()}/clients/${this.authService.getActiveClientId()}/benefit-groups`,{withCredentials:!0}).pipe((0,h.P)(),(0,o.U)(s=>s.map(m=>({value:m.id.split(".")[1],display:m.groupName})).sort(this.alphaSort)),(0,P.b)(s=>this.benefitGroups=s),(0,o.U)(s=>this.getDropdownSettings(s)),(0,i.K)(s=>(0,u._)(s)))}getProjects(){return(0,E.Of)(this.projects)?(0,e.of)(this.getDropdownSettings(this.projects)):this.http.get(`${this.domainService.getEssApiPath()}/clients/${this.authService.getActiveClientId()}/projects`,{withCredentials:!0}).pipe((0,h.P)(),(0,o.U)(s=>s.map(m=>({value:m.id,display:m.description})).sort(this.alphaSort)),(0,P.b)(s=>this.projects=s),(0,o.U)(s=>this.getDropdownSettings(s)),(0,i.K)(s=>(0,u._)(s)))}getReportsToManagers(){return(0,E.Of)(this.reportsToManagers)?(0,e.of)(this.buildReportToOpts(this.reportsToManagers)):this.http.get(`${this.domainService.getEssApiPath()}/clients/${this.authService.getActiveClientId()}/managers`,{withCredentials:!0}).pipe((0,h.P)(),(0,P.b)(s=>this.reportsToManagers=s),(0,o.U)(s=>this.buildReportToOpts(s)),(0,i.K)(s=>(0,u._)(s)))}getWorkGroups(){return this.http.get(`${this.domainService.getEssApiPath()}/clients/${this.authService.getActiveClientId()}/work-groups`,{withCredentials:!0}).pipe((0,h.P)(),(0,o.U)(s=>[this.dropdownDefault,...s.map(m=>({value:m.id.split(".")[1],display:m.description})).sort(this.alphaSort)]),(0,i.K)(s=>(0,u._)(s)))}getWorkGroupsTypeAhead(){return this.http.get(`${this.domainService.getEssApiPath()}/clients/${this.authService.getActiveClientId()}/work-groups`,{withCredentials:!0})}getDepartments(s){return this.employeesService.getDepartments(s).pipe((0,h.P)(),(0,o.U)(m=>[this.dropdownDefault,...m.map(r=>({value:r.id,display:r.department})).sort(this.alphaSort)]))}getDepartmentsTypeAhead(s){return this.employeesService.getDepartments(s)}getLocations(s){return this.employeesService.getLocations(s).pipe((0,h.P)(),(0,o.U)(m=>[this.dropdownDefault,...m.map(r=>({value:r.id,display:r.location})).sort(this.alphaSort)]))}getDivisions(s){return this.employeesService.getDivisions(s).pipe((0,h.P)(),(0,o.U)(m=>[this.dropdownDefault,...m.map(r=>({value:r.id,display:r.divisionName})).sort(this.alphaSort)]))}getDivisionsTypeAhead(s){return this.employeesService.getDivisions(s)}getShifts(s){return this.employeesService.getShifts(s).pipe((0,h.P)(),(0,o.U)(m=>[{value:null,display:this.translateService.instant("LABEL.SELECT_SHIFT")},...m.map(r=>({value:r.id,display:r.shiftDesc})).sort(this.alphaSort)]))}buildMaritalStatusOptions(s){this.maritalStatusOptions=(0,E.Of)(s)?[...this.maritalStatusOptions,...this.mapToDropdownOpts(s)]:[this.dropdownDefault]}buildEthnicityOpts(s){this.ethnicityOpts=(0,E.Of)(s)?[...this.ethnicityOpts,...this.mapToDropdownOpts(s)]:[this.dropdownDefault]}buildReportToOpts(s){return s.map(m=>({...m,id:m.employeeId,type:this.translateService.instant("M"===m.type?"LABEL.MANAGER":"LABEL.EMPLOYEE"),name:`${m.firstName} ${m.lastName}`,status:this.translateService.instant(m.statusCode===p.Du.TERMINATED?"LABEL.TERMINATED":"LABEL.ACTIVE")}))}getValFromDropdown(s,m){if(!(0,E.Of)(s)||!(0,d.t$)(m))return null;const r=s.find(v=>v.value===m);return(0,d.t$)(r)?r.display:m.toString()}mapToDropdownOpts(s){return s.reduce((m,r)=>[...m,{value:r.code,display:r.description}],[]).sort(this.alphaSort)}getDropdownSettings(s){return[this.dropdownDefault,...s]}}return T.\u0275fac=function(s){return new(s||T)(L.\u0275\u0275inject(f.sK),L.\u0275\u0275inject(c.NF),L.\u0275\u0275inject(A.eN),L.\u0275\u0275inject(c.e8),L.\u0275\u0275inject(g.M))},T.\u0275prov=L.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},86338:(I,_,t)=>{t.d(_,{G:()=>C});var e=t(80529),u=t(61737),E=t(34202),h=t(68757),o=t(79534);const P=[{property:"firstName",title:"LABEL.FIRST_NAME",visible:!0},{property:"lastName",title:"LABEL.LAST_NAME",visible:!0},{property:"userId",title:"LABEL.USER_ID",visible:!0},{property:"job",title:"LABEL.POSITION",visible:!0}];var i=t(88228),p=t(2994),d=t(87545),L=t(27221),f=t(72986),c=t(94650),A=t(27111),g=t(42466),O=t(79193),T=t(17018);let C=(()=>{class s{constructor(r,v,y,D,a){this.http=r,this.domainService=v,this.translateService=y,this.employeeDropdownService=D,this.authService=a,this.personalInfoUrl=this.domainService.getEssApiPath()+"/personal/info",this.employee=null,this.errorHandler=l=>{try{const n=JSON.parse(l.error);return(0,u._)(n)}catch{return(0,u._)({errorCode:1,errorMessage:"Server Error"})}}}searchEmployees(r){return new E.y(v=>{const y=this.domainService.getEssApiPath()+"/clients";r.usersOnly="true",this.authService.loadSession().subscribe(D=>{this.http.get(`${y}/${D.clientId}/employees/`,{withCredentials:!0,params:new e.LE({fromObject:{...r}})}).subscribe(l=>{const n=r?.search?.toLowerCase()||"";v.next(l.employees.filter(S=>S.firstName?.toLowerCase().includes(n)||S.lastName?.toLowerCase().includes(n)||S.employeeId.toLowerCase().includes(n)).map(S=>(S.id=S.employeeId,S))),v.complete()})},()=>{v.next(),v.complete()})})}getEmployeeImageUrl(r,v){return new E.y(y=>{const D=this.domainService.getEssApiPath()+"/clients/";r?(y.next(D+r.clientId+"/employees/"+(v||r.user.employeeId)+"/image"),y.complete()):this.authService.loadSession().subscribe(a=>{y.next(D+a.clientId+"/employees/"+(v||a.user.employeeId)+"/image"),y.complete()},a=>{y.next(),y.complete()})})}postEmployee(r=this.employee){return this.validatePrimaryEmail(r),this.http.post(this.personalInfoUrl,r,{withCredentials:!0,responseType:"text"}).pipe((0,p.b)(()=>this.employee=null),(0,d.w)(()=>this.getEmployee().pipe((0,L.K)(this.errorHandler))),(0,f.q)(1),(0,L.K)(this.errorHandler))}getEmployee(r){return new E.y(v=>{this.employee&&!r?(v.next(this.employee),v.complete()):this.http.get(this.personalInfoUrl,{withCredentials:!0}).pipe((0,p.b)(()=>{this.employeeDropdownService.buildMaritalStatusOptions([]),this.employeeDropdownService.buildEthnicityOpts([])})).subscribe(y=>{this.employee=y,this.employeeDropdownService.buildMaritalStatusOptions(y?.maritalCodes),this.employeeDropdownService.buildEthnicityOpts(y?.ethnicityCodes),v.next(y),v.complete()},y=>{throw new Error(this.translateService.instant("ERROR.UNABLE_TO_LOAD_INFO"))})})}resetPassword(r,v){return this.http.post(`${this.domainService.getEssApiPath()}/clients/${r}/employees/forgot-password`,{...v,peoId:this.domainService.getPeoId()})}getPay(r){if("S"!==r.method)return`$${r.hourlyRate} ${this.translateService.instant("LABEL.PAY_TYPES.HOURLY")}`;if(r.method){let v,y;switch(r.payPeriod){case"S":v=r.semiMonthlyRate,y="SEMI_MONTHLY";break;case"M":v=r.monthlyRate,y="MONTHLY";break;case"B":v=r.biWeeklyRate,y="BI_WEEKLY";break;default:v=r.weeklyRate,y="WEEK"}const D=this.translateService.instant("LABEL.PAY_TYPES."+y);return`$${v.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")} ${D}`}return"-"}constructAddress(r,v){const y=["address1","address2","state","city","zip"];"home"===v&&y.push("county");const D={};return y.some(a=>v+a.charAt(0).toUpperCase()+a.slice(1)in r)?(y.forEach(a=>{const l=v+a.charAt(0).toUpperCase()+a.slice(1);l in r&&(D[a]=r[l])}),D):{}}reassignAddress(r,v,y){return Object.keys(y).forEach(D=>{r[v+D.charAt(0).toUpperCase()+D.slice(1)]=y[D]}),r}getSelectedEmployeesTableColumns(r=!1){const v=[...P.map(y=>{const D={...y,sort:h.ER.ALPHA,direction:null};return"firstName"===D.property&&(D.direction=h.Sr.ASC,D.default=!0),D.title=this.translateService.instant(y.title),new h.hj(D)})];return r||v.push(new h.hj({property:"actions",title:"Actions",visible:!0})),v}getSearchEmployeesTableColumns(){return[new h.hj({property:"select",visible:!0}),...P.map(r=>{const v={...r,sort:h.ER.ALPHA,direction:null};return"firstName"===v.property&&(v.direction=h.Sr.ASC,v.default=!0),v.title=this.translateService.instant(r.title),new h.hj(v)})]}validatePrimaryEmail(r){if(r.primaryEmail){if(r.primaryEmail!==o.E_.PERSONAL&&r.primaryEmail!==o.E_.WORK)return void(r.primaryEmail="");if(r.primaryEmail===o.E_.PERSONAL&&!i.LX.test(r.personalEmail))return void(r.primaryEmail="");if(r.primaryEmail===o.E_.WORK&&!i.LX.test(r.workEmail))return void(r.primaryEmail="")}}}return s.\u0275fac=function(r){return new(r||s)(c.\u0275\u0275inject(e.eN),c.\u0275\u0275inject(A.NF),c.\u0275\u0275inject(g.sK),c.\u0275\u0275inject(O.I),c.\u0275\u0275inject(T.e))},s.\u0275prov=c.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac}),s})()},6860:(I,_,t)=>{t.d(_,{Cl:()=>h,HH:()=>E,Of:()=>u,t$:()=>e});const e=o=>null!=o,u=o=>o instanceof Array&&o.length>0,E=o=>"string"==typeof o&&o.length>0,h=o=>Object.assign({},o)},79534:(I,_,t)=>{t.d(_,{Du:()=>E,E_:()=>e,KV:()=>u});var e=(()=>{return(h=e||(e={})).PERSONAL="P",h.WORK="W",e;var h})(),u=(()=>{return(h=u||(u={})).both="B",h.none="N",h.email="E",h.text="T",u;var h})(),E=(()=>{return(h=E||(E={})).ACTIVE="A",h.TERMINATED="T",E;var h})()},21985:(I,_,t)=>{t.d(_,{z:()=>h});var e=t(36895),u=t(52885),E=t(94650);let h=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=E.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=E.\u0275\u0275defineInjector({imports:[e.ez,u.dT]}),o})()},70944:(I,_,t)=>{t.d(_,{p:()=>h});var e=t(36895),u=t(34793),E=t(94650);let h=(()=>{class o{static forRoot(){return{ngModule:o,providers:[]}}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=E.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=E.\u0275\u0275defineInjector({imports:[u.Bz,e.ez]}),o})()},99603:(I,_,t)=>{t.d(_,{U:()=>p});var e=t(94650),u=t(526),E=t(11481),h=t(52885);let o=(()=>{class d{constructor(f,c,A){this.privacyService=f,this.sanitizer=c,this.activeModal=A}ngOnInit(){this.privacyService.policy().subscribe(f=>{this.data=this.privacyService.isSanitizable()?f:this.sanitizer.bypassSecurityTrustHtml(f),this.privacyPolicy&&(this.data=this.sanitizer.bypassSecurityTrustHtml(this.privacyPolicy))})}}return d.\u0275fac=function(f){return new(f||d)(e.\u0275\u0275directiveInject(u.P),e.\u0275\u0275directiveInject(E.DomSanitizer),e.\u0275\u0275directiveInject(h.Kz))},d.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["phr-privacy-policy-modal"]],inputs:{privacyPolicy:"privacyPolicy"},decls:9,vars:1,consts:[[1,"pt-2","pr-3","privacy-dialog-header"],[1,"ml-3"],[1,"float-right","cursor-pointer",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"modal-body","privacy-body-height"],[1,"mt-1"],[1,"privacy-body-half-height"],[3,"innerHtml"]],template:function(f,c){1&f&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"span",1),e.\u0275\u0275elementStart(2,"a",2),e.\u0275\u0275listener("click",function(){return c.activeModal.dismiss("Close click")}),e.\u0275\u0275element(3,"i",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",4)(5,"div"),e.\u0275\u0275element(6,"p",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",6),e.\u0275\u0275element(8,"div",7),e.\u0275\u0275elementEnd()()),2&f&&(e.\u0275\u0275advance(8),e.\u0275\u0275property("innerHtml",c.data,e.\u0275\u0275sanitizeHtml))},encapsulation:2}),d})();var P=t(3270),i=t(42466);let p=(()=>{class d{constructor(f,c){this.ngbModalService=f,this.i18nService=c}openPrivacyModal(){const f=this.ngbModalService.open(o,{backdrop:"static",centered:!0,size:"lg"});"en"===this.i18nService.appLocale.code&&this.templateConfig?.useCustomPrivacyStatement?f.componentInstance.privacyPolicy=this.templateConfig.customPrivacyStatement:"es"===this.i18nService.appLocale.code&&this.templateConfig?.useCustomPrivacyStatement&&(f.componentInstance.privacyPolicy=this.templateConfig.customPrivacyStatementEs)}ngOnInit(){}}return d.\u0275fac=function(f){return new(f||d)(e.\u0275\u0275directiveInject(h.FF),e.\u0275\u0275directiveInject(P.D))},d.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["phr-privacy-policy-link"]],inputs:{templateConfig:"templateConfig"},decls:4,vars:3,consts:[[1,"float-right","d-inline-block","mt-1"],["href","javascript:;",1,"ml-3",3,"click"]],template:function(f,c){1&f&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275listener("click",function(){return c.openPrivacyModal()}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),2&f&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"LABEL.PRIVACY_POLICY")))},dependencies:[i.X$],encapsulation:2}),d})()},82923:(I,_,t)=>{t.d(_,{v:()=>P});var e=t(36895),u=t(52885),E=t(42466),h=t(526),o=t(94650);let P=(()=>{class i{}return i.\u0275fac=function(d){return new(d||i)},i.\u0275mod=o.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=o.\u0275\u0275defineInjector({providers:[h.P],imports:[e.ez,u.IJ,E.aw]}),i})()},526:(I,_,t)=>{t.d(_,{P:()=>o});var e=t(61737),u=t(94650),E=t(80529),h=t(3270);let o=(()=>{class P{constructor(p,d){this.http=p,this.i18nService=d,this.url="../assets/content/[locale]/privacy-policy.html"}policy(){return this.url="../assets/content/[locale]/privacy-policy.html",this.url=this.url.replace("[locale]",this.i18nService.appLocale.code),this.http.get(this.url,{responseType:"text"})}isSanitizable(){return!0}extractData(p){return p.text()}handleError(p){return(0,e._)(p)}}return P.\u0275fac=function(p){return new(p||P)(u.\u0275\u0275inject(E.eN),u.\u0275\u0275inject(h.D))},P.\u0275prov=u.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P})()},4417:(I,_,t)=>{t.d(_,{R:()=>f});var e=t(94650),u=t(24006),E=t(47383);const h={provide:u.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>o),multi:!0};let o=(()=>{class c{validate(g){return E.dN.password(g)}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275dir=e.\u0275\u0275defineDirective({type:c,selectors:[["","password","","formControlName",""],["","password","","formControl",""],["","password","","ngModel",""]],features:[e.\u0275\u0275ProvidersFeature([h])]}),c})();const P={provide:u.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>i),multi:!0};let i=(()=>{class c{ngOnChanges(g){this.validator=E.dN.ssn(g.ssn.currentValue)}validate(g){return this.validator(g)}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275dir=e.\u0275\u0275defineDirective({type:c,selectors:[["","ssn","","formControlName",""],["","ssn","","formControl",""],["","ssn","","ngModel",""]],hostVars:1,hostBindings:function(g,O){2&g&&e.\u0275\u0275attribute("ssn",O.ssn?O.ssn:null)},inputs:{ssn:"ssn"},features:[e.\u0275\u0275ProvidersFeature([P]),e.\u0275\u0275NgOnChangesFeature]}),c})();const p={provide:u.NG_VALIDATORS,useExisting:(0,e.forwardRef)(()=>d),multi:!0};let d=(()=>{class c{validate(g){return E.dN.email(g)}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275dir=e.\u0275\u0275defineDirective({type:c,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],features:[e.\u0275\u0275ProvidersFeature([p])]}),c})(),f=(()=>{class c{}return c.\u0275fac=function(g){return new(g||c)},c.\u0275mod=e.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=e.\u0275\u0275defineInjector({}),c})()},47383:(I,_,t)=>{t.d(_,{LX:()=>E,TY:()=>o,dN:()=>h});var e=t(24006),u=t(90382);const E=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;class h extends e.Validators{static password(i){return p=>{if(!p.value)return null;const d="!@#$%^&*()_+\\=\\-`~?<>,.|{}/\\:;",L=new RegExp(`^(?=.*[a-z])^(?=.*[A-Z])(?=.*[0-9])${i?`(?=.*[${d}])`:""}[a-zA-Z\\d${d}]{8,}$`);let f=!1,c=!1,A=!1,g=!1,O=!1;return p.value&&(f=p.value.length>=8,c=/[0-9]/.test(p.value),A=/[A-Z]/.test(p.value),g=/[a-z]/.test(p.value),O=new RegExp(`[${d}]`).test(p.value)),L.test(p.value)?null:{password:{minLength:f,containsNumeric:c,containsAlphaUpper:A,containsAlphaLower:g,containsSpecialChar:O}}}}static ssn(i){return p=>{if(!p.value||""===p.value)return null;let d;return d=i?/^[0-9]{3}-[0-9]{2}-[0-9]{4}$/:/^[0-9]{9}$/,d.test(p.value)?null:{ssn:!0}}}static ssnEinValidator(i){return p=>{if(!p.value)return null;let d;return d=i===u.W.EIN?/^[0-9]{2}-[0-9]{7}$/:/^[0-9]{3}-[0-9]{2}-[0-9]{4}$/,d.test(p.value)?null:{ssn:!0}}}static email(i){return i.value?E.test(i.value)?null:{email:!0}:null}static payRate(i){return i.value?i.value<=0?null:{payRate:!0}:null}static matchPassword(i,p){return d=>{const L=d.get(i),f=d.get(p);if(L.value!==f.value)return f.setErrors({matchPassword:!0});{let c=f.errors;return c&&(delete c.matchPassword,Object.keys(c).length<1&&(c=null)),f.setErrors(c)}}}static matchSSN(i,p){return d=>{const L=d.get(i),f=d.get(p);if(L.value!==f.value)return f.setErrors({matchSSN:!0});{let c=f.errors;return c&&(delete c.matchSSN,Object.keys(c).length<1&&(c=null)),f.setErrors(c)}}}static phone(i){return i.value?/^(\([0-9]{3}\) [0-9]{3}-[0-9]{4}$|[0-9]{10})|(\d{3}-\d{3}-\d{4})|(\d{10})/.test(i.value)?null:{phone:!0}:null}static zip(i){return i.value?/^[0-9]{5}$/.test(i.value)?null:{zip:!0}:null}static zip4(i){return i.value?/^[0-9]{4}$/.test(i.value)?null:{zip4:!0}:null}static numeric(i){return i.value?/\d/.test(i.value)?null:{numeric:!0}:null}static routingNumber(i){return i.value?/^[0-9]{9}$/.test(i.value)?null:{routingNumber:!0}:null}static money(i){return i.value?/^(\$?(:?\d?)+(:?.?\d+)?)$/.test(i.value)?null:{money:!0}:null}static conditionallyRequiredValidator(i,p){return d=>d.value[i]&&e.Validators.required(d.get(p))?{[`${p}Required`]:!0}:null}}function o(P){return i=>{const p=i.value;return p>=P?{maxValueValidator:{value:p}}:null}}},88228:(I,_,t)=>{t.d(_,{LX:()=>u.LX,RT:()=>e.R,dN:()=>u.dN});var e=t(4417),u=t(47383)}}]);