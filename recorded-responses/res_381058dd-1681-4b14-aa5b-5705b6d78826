"use strict";(self.webpackChunkprismhr_ess=self.webpackChunkprismhr_ess||[]).push([[8450],{65979:(D,P,r)=>{r.d(P,{HM:()=>l,J_:()=>e,N8:()=>o,b7:()=>u,c3:()=>m,cL:()=>v,jc:()=>c,kZ:()=>s,xh:()=>f});var t=r(68757);const e=d=>d instanceof Date,f=(d,_)=>d.getTime()>_.getTime(),v=(d,_)=>d.getTime()<_.getTime(),c=(d,_)=>((d,_)=>_.getTime()-d.getTime())(d,_)/864e5,u=d=>(d.setUTCHours(0,0,0,0),d),o=(d,_)=>_.find(T=>((d,_)=>d.getTime()===_.getTime())(d,T))??null,s=d=>e(d)?`${d.getMonth()+1}/${d.getDate()}/${d.getFullYear()}`:null,l=d=>e(d)?`${d.getUTCMonth()+1}/${d.getUTCDate()}/${d.getUTCFullYear()}`:null,m=(d,_)=>(0,t.HH)(_)&&d===_},29707:(D,P,r)=>{r.d(P,{m:()=>c});var t=r(68757),e=r(65979),C=r(94650),f=r(42466);const v=Object.freeze({Y:1,H:1,M:12,S:24,W:52,B:26}),y=Object.freeze({M:173.33,S:86.67,W:40,B:80});let c=(()=>{class u{constructor(s){this.translateService=s}get payRatePeriodOptions(){return[{value:null,display:this.getTranslateInstant("LABEL.SELECT_PERIOD")},{value:"W",display:this.getTranslateInstant("LABEL.PAY_PERIOD_TYPES.WEEK")},{value:"B",display:this.getTranslateInstant("LABEL.PAY_PERIOD_TYPES.BI_WEEKLY")},{value:"S",display:this.getTranslateInstant("LABEL.PAY_PERIOD_TYPES.SEMI_MONTHLY")},{value:"M",display:this.getTranslateInstant("LABEL.PAY_PERIOD_TYPES.MONTH")},{value:"Y",display:this.getTranslateInstant("LABEL.PAY_PERIOD_TYPES.YEAR")},{value:"H",display:this.getTranslateInstant("LABEL.PAY_PERIOD_TYPES.HOUR")}]}get stdHourPeriodOptions(){return[{value:null,display:this.getTranslateInstant("LABEL.SELECT_PERIOD")},{value:"W",display:this.getTranslateInstant("LABEL.PAY_PERIOD_TYPES.WEEK")},{value:"B",display:this.getTranslateInstant("LABEL.PAY_PERIOD_TYPES.BI_WEEKLY")},{value:"S",display:this.getTranslateInstant("LABEL.PAY_PERIOD_TYPES.SEMI_MONTHLY")},{value:"M",display:this.getTranslateInstant("LABEL.PAY_PERIOD_TYPES.MONTH")}]}getPayRate(s,l,m,d){if("S"!==s)return`${this.getPay(parseFloat(m.toString()).toFixed(2))} ${this.translateService.instant("LABEL.PAY_TYPES.HOURLY")}`;if(s){let _,T;switch(l){case"S":_=d.semiMonthlyRate,T="SEMI_MONTHLY";break;case"M":_=d.monthlyRate,T="MONTHLY";break;case"B":_=d.biWeeklyRate,T="BI_WEEKLY";break;default:_=d.weeklyRate,T="WEEK"}const b=this.translateService.instant("LABEL.PAY_TYPES."+T);return`${this.getPay(_.toString())} ${b}`}return"-"}calcAnnualPay(s,l,m,d){return(0,t.HH)(s)&&(0,t.HH)(l)?"H"===l?(0,t.HH)(m)&&(0,t.HH)(d)?parseFloat(s)*v[l]*(parseFloat(m)*v[d]):null:parseFloat(s)*v[l]:null}validateStdHours(s,l){return s>y[l]}effectiveDateValidator(s,l){const m=new Date(s),d=(0,e.b7)(new Date),_=l.sort((b,I)=>(0,e.xh)(b,I)?-1:1),T=(0,e.N8)(m,_);return(0,e.J_)(T)?this.getTranslateInstant("VALIDATION.SAME_DATE").replace("<EFFECTIVE_DATE>",(0,e.kZ)(T)):(0,e.xh)(_[0],m)?this.getTranslateInstant("VALIDATION.GREATER_DATE"):(0,e.jc)(m,d)>=60?this.getTranslateInstant("VALIDATION.DIFFERENCE_IN_DAYS_PAST"):(0,e.jc)(d,m)>=60?this.getTranslateInstant("VALIDATION.DIFFERENCE_IN_DAYS_FUTURE"):(0,e.cL)(m,d)?this.getTranslateInstant("VALIDATION.LOWER_DATE"):null}getPay(s){return`$${s?.toString()?.replace(/\B(?=(\d{3})+(?!\d))/g,",")}`??0}getPayPeriod(s){return this.payRatePeriodOptions.find(l=>l.value===s)?.display}getTranslateInstant(s){return this.translateService.instant(s)}}return u.\u0275fac=function(s){return new(s||u)(C.\u0275\u0275inject(f.sK))},u.\u0275prov=C.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},17150:(D,P,r)=>{r.d(P,{LK:()=>t.L});var t=r(42437)},56703:(D,P,r)=>{r.d(P,{w:()=>y});var t=r(94650),e=r(36895),C=r(59253);function f(c,u){if(1&c){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"phr-control",1),t.\u0275\u0275listener("valueChange",function(l){t.\u0275\u0275restoreView(o);const m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.onChange(l))}),t.\u0275\u0275elementEnd()()}if(2&c){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("mask",o.mask)("control",o.control)("showTooltip",o.showTooltip)("tooltipPlacement",o.tooltipPlacement)("tooltipText",o.tooltipText)("label",o.label)("type",o.type)("required",o.required)("readonly",o.readonly)("disabled",o.disabled)}}function v(c,u){if(1&c&&(t.\u0275\u0275elementStart(0,"div")(1,"div")(2,"strong"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",2),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()),2&c){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(o.label),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(o.value||"-")}}let y=(()=>{class c{constructor(){this.valueChange=new t.EventEmitter,this.editing=!1,this.type="text",this.tooltipPlacement="top"}onChange(o){this.valueChange.emit(o)}ngOnInit(){}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275cmp=t.\u0275\u0275defineComponent({type:c,selectors:[["phr-read-write-control"]],inputs:{control:"control",label:"label",required:"required",mask:"mask",disabled:"disabled",readonly:"readonly",editing:"editing",value:"value",showTooltip:"showTooltip",type:"type",tooltipText:"tooltipText",tooltipPlacement:"tooltipPlacement"},outputs:{valueChange:"valueChange"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"mask","control","showTooltip","tooltipPlacement","tooltipText","label","type","required","readonly","disabled","valueChange"],[1,"readonly-label"]],template:function(o,s){1&o&&(t.\u0275\u0275template(0,f,2,10,"div",0),t.\u0275\u0275template(1,v,6,2,"div",0)),2&o&&(t.\u0275\u0275property("ngIf",s.editing),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!s.editing))},dependencies:[e.O5,C.S],encapsulation:2}),c})()},8606:(D,P,r)=>{r.d(P,{s:()=>y});var t=r(94650),e=r(36895),C=r(29785);function f(c,u){if(1&c){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"phr-date-control",1),t.\u0275\u0275listener("valueChange",function(l){t.\u0275\u0275restoreView(o);const m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.onChange(l))}),t.\u0275\u0275elementEnd()()}if(2&c){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("minDate",o.minDate)("maxDate",o.maxDate)("startDate",o.startDate)("control",o.control)("label",o.label)("required",o.required)("readonly",o.readonly)("autoClose",o.autoClose)("disabled",o.disabled)}}function v(c,u){if(1&c&&(t.\u0275\u0275elementStart(0,"div")(1,"div")(2,"strong"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",2),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()),2&c){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(o.label),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(o.value||"-")}}let y=(()=>{class c{constructor(){this.required=!1,this.disabled=!1,this.readonly=!1,this.autoClose=!0,this.valueChange=new t.EventEmitter,this.editing=!1}onChange(o){this.valueChange.emit(o)}ngOnInit(){}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275cmp=t.\u0275\u0275defineComponent({type:c,selectors:[["phr-read-write-date-control"]],inputs:{control:"control",label:"label",required:"required",disabled:"disabled",readonly:"readonly",autoClose:"autoClose",editing:"editing",startDate:"startDate",value:"value",maxDate:"maxDate",minDate:"minDate"},outputs:{valueChange:"valueChange"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"minDate","maxDate","startDate","control","label","required","readonly","autoClose","disabled","valueChange"],[1,"readonly-label"]],template:function(o,s){1&o&&(t.\u0275\u0275template(0,f,2,9,"div",0),t.\u0275\u0275template(1,v,6,2,"div",0)),2&o&&(t.\u0275\u0275property("ngIf",s.editing),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!s.editing))},dependencies:[e.O5,C.Oz],encapsulation:2}),c})()},24856:(D,P,r)=>{r.d(P,{I:()=>y});var t=r(94650),e=r(36895),C=r(83169);function f(c,u){if(1&c){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"phr-phone-control",1),t.\u0275\u0275listener("valueChange",function(l){t.\u0275\u0275restoreView(o);const m=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(m.onChange(l))}),t.\u0275\u0275elementEnd()()}if(2&c){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("control",o.control)("label",o.label)("required",o.required)("readonly",o.readonly)("disabled",o.disabled)}}function v(c,u){if(1&c&&(t.\u0275\u0275elementStart(0,"div")(1,"div",2)(2,"strong"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()),2&c){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(o.label),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(o.value||"-")}}let y=(()=>{class c{constructor(){this.valueChange=new t.EventEmitter,this.editing=!1}onChange(o){this.valueChange.emit(o)}ngOnInit(){}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275cmp=t.\u0275\u0275defineComponent({type:c,selectors:[["phr-read-write-phone-control"]],inputs:{control:"control",label:"label",required:"required",disabled:"disabled",readonly:"readonly",editing:"editing",value:"value"},outputs:{valueChange:"valueChange"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"control","label","required","readonly","disabled","valueChange"],[1,"mb-2"]],template:function(o,s){1&o&&(t.\u0275\u0275template(0,f,2,5,"div",0),t.\u0275\u0275template(1,v,6,2,"div",0)),2&o&&(t.\u0275\u0275property("ngIf",s.editing),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!s.editing))},dependencies:[e.O5,C.g],encapsulation:2}),c})()},83169:(D,P,r)=>{r.d(P,{g:()=>s});var t=r(94650),e=r(88228),C=r(93456),f=r(36895),v=r(24006),y=r(66058),c=r(78126);function u(l,m){if(1&l&&t.\u0275\u0275element(0,"phr-input-label",4),2&l){const d=t.\u0275\u0275nextContext();t.\u0275\u0275property("control",d.control)("boldLabel",d.boldLabel)("label",d.label)("required",d.required)}}const o=function(l){return{mask:l,guide:!1}};let s=(()=>{class l extends C.E{constructor(){super(),this.invalid=!1,this.show=!0,this.valueChange=new t.EventEmitter,this.mask=["(",/\d/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]}ngOnInit(){this.validators.push(e.dN.phone),super.init(),this.registerTextUnMasker(/\D/g)}ngOnDestroy(){super.destroy()}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275cmp=t.\u0275\u0275defineComponent({type:l,selectors:[["phr-phone-control"]],inputs:{control:"control",label:"label",required:"required",disabled:"disabled",readonly:"readonly",invalid:"invalid",show:"show"},outputs:{valueChange:"valueChange"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:4,vars:10,consts:[[1,"form-group"],[3,"control","boldLabel","label","required",4,"ngIf"],[1,"input-group"],["placeholder","(xxx) xxx-xxxx","type","text","aria-describedby","basic-addon1",1,"form-control",3,"formControl","textMask","readonly"],[3,"control","boldLabel","label","required"]],template:function(d,_){1&d&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,u,1,4,"phr-input-label",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275element(3,"input",3),t.\u0275\u0275elementEnd()()),2&d&&(t.\u0275\u0275styleProp("width",_.width),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",_.show),t.\u0275\u0275advance(2),t.\u0275\u0275classProp("is-invalid",(_.control.value||_.control.touched)&&_.control.invalid||_.invalid),t.\u0275\u0275property("formControl",_.control)("textMask",t.\u0275\u0275pureFunction1(8,o,_.mask))("readonly",_.readonly))},dependencies:[f.O5,v.DefaultValueAccessor,v.NgControlStatus,v.FormControlDirective,y.hd,c.D],encapsulation:2}),l})()},52586:(D,P,r)=>{r.d(P,{X:()=>c});var t=r(94650),e=r(93456),C=r(24006),f=r(75985),v=r(78126);const y={align:"left",allowNegative:!1,allowZero:!0,decimal:".",precision:2,prefix:"$",suffix:"",thousands:","};let c=(()=>{class u extends e.E{constructor(){super(),this.valueChange=new t.EventEmitter,this.maskOptions=y}set model(s){this.control.setValue(s),this._model=s}get model(){return this._model}ngOnInit(){this.init(),this._model=this.control.value,this.control.valueChanges.subscribe(s=>{this._model=s})}ngOnDestroy(){this.destroy()}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275cmp=t.\u0275\u0275defineComponent({type:u,selectors:[["phr-usd-control"]],inputs:{control:"control",label:"label",required:"required",disabled:"disabled",readonly:"readonly",ngModelOptions:"ngModelOptions"},outputs:{valueChange:"valueChange"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:4,vars:10,consts:[[1,"form-group"],[3,"control","label","required"],[1,"input-group"],["currencyMask","","type","text","aria-describedby","basic-addon1",1,"form-control",3,"options","ngModel","ngModelOptions","readonly","disabled","ngModelChange","focus"]],template:function(s,l){1&s&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"phr-input-label",1),t.\u0275\u0275elementStart(2,"div",2)(3,"input",3),t.\u0275\u0275listener("ngModelChange",function(d){return l.model=d})("focus",function(){return l.control.markAsTouched()}),t.\u0275\u0275elementEnd()()()),2&s&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("control",l.control)("label",l.label)("required",l.required),t.\u0275\u0275advance(2),t.\u0275\u0275classProp("is-invalid",(l.control.value||l.control.touched)&&l.control.invalid),t.\u0275\u0275property("options",l.maskOptions)("ngModel",l.model)("ngModelOptions",l.ngModelOptions)("readonly",l.readonly)("disabled",l.disabled))},dependencies:[C.DefaultValueAccessor,C.NgControlStatus,C.NgModel,f.g1,v.D],encapsulation:2}),u})()},428:(D,P,r)=>{r.d(P,{H:()=>Y});var t=r(15861),e=r(94650),C=r(24006),f=r(68757),v=r(52885),y=r(42466),c=r(80529),u=r(36895),o=r(98474);function s(i,g){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8)(1,"b",9),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",10),e.\u0275\u0275listener("click",function(){const h=e.\u0275\u0275restoreView(n).$implicit,E=e.\u0275\u0275nextContext(2);return E.valueChange.emit(h.data),e.\u0275\u0275resetView(E.modalRef.close())}),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()}if(2&i){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"LABEL.ACTIONS")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",n.actionKeyProp," ")}}const l=function(){return["actions"]},m=function(i,g){return{of:i,view:g}};function d(i,g){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"phr-table-component",6),e.\u0275\u0275listener("onSort",function(p){e.\u0275\u0275restoreView(n);const h=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(h.handleSortChange(p))}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,s,6,4,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&i){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",n.data)("tableColumns",n.tableColumns)("searchString",n.searchString)("templates",e.\u0275\u0275pureFunction0(13,l))("itemsPerPage",10)("paginationMessages",e.\u0275\u0275pureFunction2(14,m,e.\u0275\u0275pipeBind1(1,7,"LABEL.OF"),e.\u0275\u0275pipeBind1(2,9,"LABEL.VIEWING")))("noRowsMessage",e.\u0275\u0275pipeBind1(3,11,"ERROR.NO_ROWS"))}}function _(i,g){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",8)(1,"b",9),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"a",10),e.\u0275\u0275listener("click",function(){const h=e.\u0275\u0275restoreView(n).$implicit,E=e.\u0275\u0275nextContext(2);return E.valueChange.emit(h.data),e.\u0275\u0275resetView(E.modalRef.close())}),e.\u0275\u0275text(5," Select "),e.\u0275\u0275elementEnd()()}2&i&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"LABEL.ACTIONS")))}function T(i,g){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"phr-pagination-table",11),e.\u0275\u0275listener("sortChange",function(p){e.\u0275\u0275restoreView(n);const h=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(h.handleSortChangePaginated(p))})("pageChange",function(p){e.\u0275\u0275restoreView(n);const h=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(h.handlePageChange(p))}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275template(4,_,6,3,"ng-template",null,7,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&i){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("pageData",n.data)("tableColumns",n.tableColumns)("itemsPerPage",10)("count",n.count)("templates",e.\u0275\u0275pureFunction0(14,l))("loading",n.loadingSSPData)("paginationMessages",e.\u0275\u0275pureFunction2(15,m,e.\u0275\u0275pipeBind1(1,8,"LABEL.OF"),e.\u0275\u0275pipeBind1(2,10,"LABEL.VIEWING")))("noRowsMessage",e.\u0275\u0275pipeBind1(3,12,"ERROR.NO_ROWS"))}}const b=function(){return{}},I=function(i,g,n,a){return{search:i,columnDropdown:g,mobileFilterModal:n,filterTranslations:a}};let S=(()=>{class i{constructor(n,a,p,h){var E=this;this.modalRef=n,this.translateService=a,this.http=p,this._ref=h,this.data=[],this.paginated=!1,this.searchString="",this.fetchUrl="",this.page=0,this.count=0,this.actionsSortable=!0,this.valueChange=new e.EventEmitter,this._tableColumns=[],this._actionKeyProp=this.translateService.instant("ACTION.SELECT"),this.loadingSSPData=!1,this.handleSearchStringChange=x=>{this.searchString=x,this.paginated&&this.getBatch(this.page)},this.handlePageChange=function(){var x=(0,t.Z)(function*(w){yield E.getBatch(w.page),E.page=w.page});return function(w){return x.apply(this,arguments)}}(),this.handleSortChange=x=>this.tableColumns.map(w=>(w.direction=w.property===x.property?x.direction:null,w)),this.handleSortChangePaginated=x=>{this.sortAttribute=x,this.getBatch(this.page)}}set actionKeyProp(n){(0,f.t$)(n)&&(this._actionKeyProp=n)}get actionKeyProp(){return this._actionKeyProp}set tableColumns(n){this._tableColumns=[...n,new f.hj({property:"actions",localeKey:"FORM.TABLE_COLUMN.ACTIONS",title:this.translateService.instant("LABEL.ACTIONS"),enumerable:!1,sort:this.actionsSortable})]}get tableColumns(){return this._tableColumns}getBatch(n){var a=this;return(0,t.Z)(function*(){a.loadingSSPData=!0;const p={itemsPerPage:10,page:a.searchString?0:n,paginated:!0,search:a.searchString??""};if(a.sortAttribute){delete p.sortBy,delete p.sortByDesc;const h=a.sortAttribute?.property;1===a.sortAttribute?.direction&&(p.sortBy=h),2===a.sortAttribute?.direction&&(p.sortByDesc=h)}a.http.get(a.fetchUrl,{withCredentials:!0,params:p}).subscribe(h=>{a.data=h.data,a.count=h.count,a.loadingSSPData=!1,a._ref.detectChanges()},h=>{})})()}}return i.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(v.Kz),e.\u0275\u0275directiveInject(y.sK),e.\u0275\u0275directiveInject(c.eN),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["phr-type-ahead-dropdown-modal"]],inputs:{data:"data",paginated:"paginated",searchString:"searchString",fetchUrl:"fetchUrl",page:"page",count:"count",title:"title",actionsSortable:"actionsSortable",actionKeyProp:"actionKeyProp",tableColumns:"tableColumns"},outputs:{valueChange:"valueChange"},decls:10,vars:15,consts:[[1,"modal-header"],[1,"d-block","fas","fa-times","fa-lg","pull-right","cursor-pointer","position-absolute","close-icon",3,"click"],[1,"modal-content"],[3,"searchString","messages","onSearchStringChange"],[3,"data","tableColumns","searchString","templates","itemsPerPage","paginationMessages","noRowsMessage","onSort",4,"ngIf"],[3,"pageData","tableColumns","itemsPerPage","count","templates","loading","paginationMessages","noRowsMessage","sortChange","pageChange",4,"ngIf"],[3,"data","tableColumns","searchString","templates","itemsPerPage","paginationMessages","noRowsMessage","onSort"],["cell",""],[1,"actions-wrapper"],[1,"hyphenate","d-xs-block","d-md-none"],["tabindex","-1",1,"action-link","d-block",3,"click"],[3,"pageData","tableColumns","itemsPerPage","count","templates","loading","paginationMessages","noRowsMessage","sortChange","pageChange"]],template:function(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",0)(2,"button",1),e.\u0275\u0275listener("click",function(){return a.modalRef.close()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"h5"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",2)(6,"phr-table-controls-component",3),e.\u0275\u0275listener("onSearchStringChange",function(h){return a.handleSearchStringChange(h)}),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,d,6,17,"phr-table-component",4),e.\u0275\u0275template(9,T,6,18,"phr-pagination-table",5),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(a.title),e.\u0275\u0275advance(2),e.\u0275\u0275property("searchString",a.searchString)("messages",e.\u0275\u0275pureFunction4(10,I,e.\u0275\u0275pipeBind1(7,5,"LABEL.SEARCH"),e.\u0275\u0275pureFunction0(7,b),e.\u0275\u0275pureFunction0(8,b),e.\u0275\u0275pureFunction0(9,b))),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!a.paginated),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.paginated))},dependencies:[u.O5,o.RT,o.y,o.rH,y.X$],styles:[".type-ahead-modal.modal.show{display:flex!important;justify-content:center;align-items:center}.type-ahead-modal.modal.show .modal-dialog{max-width:80%;max-height:100vh;width:calc(100% - 30px)}@media (max-width: 768px){.type-ahead-modal.modal.show .modal-dialog{max-width:100%}}phr-type-ahead-dropdown-modal .modal-header{position:relative;height:70px;display:flex;align-items:center;justify-content:center;border-bottom:2px solid #dee2e6}phr-type-ahead-dropdown-modal .modal-header button{right:5px;top:10px;border:none;background:transparent;outline:none}phr-type-ahead-dropdown-modal .modal-header h5{margin:0;font-weight:600;font-size:1.1rem}phr-type-ahead-dropdown-modal .modal-content{padding:40px 40px 10px}phr-type-ahead-dropdown-modal .modal-content .search-wrapper{max-width:300px!important;margin-left:0!important}phr-type-ahead-dropdown-modal .modal-content .column-chooser{display:none!important}phr-type-ahead-dropdown-modal .modal-content .actions-wrapper{padding:0 1rem}phr-type-ahead-dropdown-modal .modal-content .action-link{font-weight:600}\n"],encapsulation:2,changeDetection:0}),i})();var M=r(24096),O=r(38980),A=r(35385);const R=["searchInput"];function L(i,g){1&i&&e.\u0275\u0275element(0,"phr-loader3")}function B(i,g){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const n=g.$implicit,a=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",a[n]," ")}}function F(i,g){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275listener("click",function(){const h=e.\u0275\u0275restoreView(n).$implicit,E=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(E.onSelectItem(h))}),e.\u0275\u0275template(1,B,2,1,"span",15),e.\u0275\u0275elementEnd()}if(2&i){const n=g.$implicit,a=e.\u0275\u0275nextContext(3);e.\u0275\u0275classProp("selected",a.selectedClass(n)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",a.displayProp)}}function W(i,g){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"cdk-virtual-scroll-viewport",11),e.\u0275\u0275listener("scrolledIndexChange",function(p){e.\u0275\u0275restoreView(n);const h=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(h.paginated&&h.nextBatch(p))}),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275template(3,L,1,0,"phr-loader3",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,F,2,3,"div",13),e.\u0275\u0275elementStart(5,"div"),e.\u0275\u0275element(6,"phr-loader3"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&i){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("itemSize",n.itemHeight),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.loadingSSPData||n.isLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("cdkVirtualForOf",n.filteredData)("cdkVirtualForTrackBy",n.trackByIdx)}}function V(i,g){1&i&&e.\u0275\u0275element(0,"phr-loader3")}function U(i,g){if(1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const n=g.$implicit,a=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(a[n])}}function k(i,g){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275listener("click",function(){const h=e.\u0275\u0275restoreView(n).$implicit,E=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(E.onSelectItem(h))}),e.\u0275\u0275template(1,U,2,1,"span",15),e.\u0275\u0275elementEnd()}if(2&i){const n=g.$implicit,a=e.\u0275\u0275nextContext(3);e.\u0275\u0275classProp("selected",a.selectedClass(n)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",a.displayProp)}}function K(i,g){if(1&i&&(e.\u0275\u0275elementStart(0,"div",16)(1,"div"),e.\u0275\u0275template(2,V,1,0,"phr-loader3",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,k,2,3,"div",17),e.\u0275\u0275elementEnd()),2&i){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.isLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.filteredData)}}function N(i,g){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275template(1,W,7,4,"ng-container",7),e.\u0275\u0275template(2,K,4,2,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(4,"button",9),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onModalOpen())}),e.\u0275\u0275element(5,"i",10),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd()()}if(2&i){const n=e.\u0275\u0275reference(3),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.filteredData.length>10)("ngIfElse",n),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,3,"LABEL.ADVANCED_SEARCH")," ")}}function H(i,g){if(1&i){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",18),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onFocus())}),e.\u0275\u0275elementEnd()}if(2&i){const n=e.\u0275\u0275nextContext(),a=e.\u0275\u0275reference(8);e.\u0275\u0275property("innerHTML",n.value&&n.value[a]?n.value[a]:"<span>-</span>",e.\u0275\u0275sanitizeHtml)}}let Y=(()=>{class i{constructor(n,a,p){this.modal=n,this.cdRef=a,this.http=p,this.value={},this.readOnlyProp="title",this.displayProp=["id","title"],this.actionsSortable=!0,this.disabled=!1,this.required=!1,this.paginated=!1,this.fetchUrl="",this.batch=25,this.isLoading=!1,this.tableColumns=[],this.valueChange=new e.EventEmitter,this.onDropDownOpened=new e.EventEmitter,this.isInputFocused=!1,this.searchField="",this.itemHeight=40,this.page=0,this.firstClick=!1,this.loadingSSPData=!1,this.theEnd=!1,this.firstPageData=[],this.filteredData=[],this.count=0,this.isBatchLoading=!1,this.lastScrollFireTime=0,this._data=[],this.selectedClass=h=>!!h.id&&this.value?.id===h.id,this.registerOnChange=h=>this.onChange=h,this.registerOnTouched=h=>this.onTouch=h,this.writeValue=h=>{this.value=h,this.searchField=(0,f.t$)(h)?this.valueProp:this.searchField},this.onFocus=()=>{this.onDropDownOpened.emit(),this.isInputFocused=!0,this.firstClick=!1,this.filteredData.length>=10&&this.viewport?.scrollToIndex(10),setTimeout(()=>{this.firstClick=!0},600),this.onDataFilter(this.searchField)},this.onBlur=()=>setTimeout(()=>{this.isInputFocused=!1,this.firstClick=!1,this.cdRef.detectChanges(),this.searchField!==this.valueProp&&(this.writeValue(null),this.onChange(null))},300),this.sortByreadOnlyProp=h=>(E,x)=>E[h]>x[h]?1:E[h]<x[h]?-1:0}set content(n){(0,f.t$)(n)&&(this.contentPlaceholder=n,n.nativeElement.focus())}set data(n){this._data=n?n.sort(this.sortByreadOnlyProp(this.readOnlyProp)):[],this.filterDataBasedOnSearch()}get data(){return this._data}get valueProp(){return(0,f.t$)(this.value)?this.value[this.readOnlyProp]:""}getCount(){this.http.get(this.fetchUrl,{withCredentials:!0,params:{itemsPerPage:this.batch,page:this.page,paginated:!0,search:this.searchField??""}}).subscribe(a=>{this.count=a.count},a=>{})}getBatch(n=!1){this.loadingSSPData=!0;const a={itemsPerPage:this.batch,page:this.searchField?0:this.page,paginated:!0,search:this.searchField??""};this.previousRequest&&this.previousRequest.unsubscribe(),this.previousRequest=this.http.get(this.fetchUrl,{withCredentials:!0,params:a}).subscribe(p=>{if(this.data=p.data,this.itemHeight=this.data.length,this.count=p.count,this.loadingSSPData=!1,!n){if(this.data.length<=10)return void(this.isBatchLoading=!1);this.data.length%2==0&&this.isBatchLoading?(this.viewport?.scrollToIndex(this.data.length/2),this.isBatchLoading=!1):this.data.length%2!=0&&this.isBatchLoading&&(this.isBatchLoading=!1,this.viewport?.scrollToIndex((this.data.length+1)/2))}},p=>{})}processScroll(){var n=this;return(0,t.Z)(function*(){const a=n.viewport?.getRenderedRange().end,p=n.viewport?.getRenderedRange().start,h=n.viewport?.getDataLength();a===h&&n.firstClick?(n.isBatchLoading=!0,n.page++,yield n.getBatch(),n.onDataFilter(n.searchField)):0===p&&n.page>0&&n.firstClick&&(n.isBatchLoading=!0,n.page--,yield n.getBatch(),n.onDataFilter(n.searchField))})()}nextBatch(n){var a=this;return(0,t.Z)(function*(){(new Date).getTime(),a.theEnd||a.scrollTimer||(a.scrollTimer=setTimeout(()=>{a.scrollTimer=null,a.lastScrollFireTime=(new Date).getTime(),a.data.length>10&&a.processScroll()},1e3))})()}trackByIdx(n){return n}ngOnInit(){var n=this;return(0,t.Z)(function*(){n.itemHeight=n.data.length,n.paginated&&(yield n.getCount(),n.firstPageData=n.data)})()}ngOnChanges(n){(0,f.t$)(n?.value)&&(this.searchField=this.valueProp)}onModalOpen(){const n=new M.w,a=this.modal.open(S,{windowClass:"type-ahead-modal"});a.componentInstance.data=this.data.length>10&&this.paginated?this.data.slice(0,10):this.data,a.componentInstance.page=this.page,a.componentInstance.fetchUrl=this.fetchUrl,a.componentInstance.count=this.count,a.componentInstance.paginated=this.paginated,a.componentInstance.actionsSortable=this.actionsSortable,a.componentInstance.tableColumns=this.tableColumns,a.componentInstance.searchString=this.searchField,a.componentInstance.title=this.tableTitle,a.componentInstance.actionKeyProp=this.actionKeyProp,n.add(a.componentInstance.valueChange.subscribe(p=>{this.valueChange.emit(p),this.onChange(p),this.writeValue(p),this.onBlur()})),a.result.finally(()=>n.unsubscribe())}shouldFilterData(n){return this.paginated&&(this.firstClick||!n&&this.data?.[0]?.id!==this.firstPageData?.[0]?.id)}filterDataBasedOnSearch(){this.filteredData=this.data.filter(n=>Object.keys(n).some(a=>n[a]?.toString()?.toLowerCase()?.includes(this.searchField.toLowerCase())))}onDataFilter(n){var a=this;return(0,t.Z)(function*(){if(a.shouldFilterData(n)){const p=!!n;yield a.getBatch(p)}else a.filterDataBasedOnSearch(),a.isInputFocused=!0})()}onSelectItem(n){this.valueChange.emit(n),this.onChange(n),this.writeValue(n),this.onBlur()}}return i.\u0275fac=function(n){return new(n||i)(e.\u0275\u0275directiveInject(v.FF),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(c.eN))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["phr-type-ahead-dropdown"]],viewQuery:function(n,a){if(1&n&&(e.\u0275\u0275viewQuery(R,5),e.\u0275\u0275viewQuery(O.N7,5)),2&n){let p;e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(a.content=p.first),e.\u0275\u0275queryRefresh(p=e.\u0275\u0275loadQuery())&&(a.viewport=p.first)}},inputs:{value:"value",readOnlyProp:"readOnlyProp",displayProp:"displayProp",tableTitle:"tableTitle",actionsSortable:"actionsSortable",disabled:"disabled",required:"required",paginated:"paginated",fetchUrl:"fetchUrl",batch:"batch",isLoading:"isLoading",actionKeyProp:"actionKeyProp",tableColumns:"tableColumns",data:"data"},outputs:{valueChange:"valueChange",onDropDownOpened:"onDropDownOpened"},features:[e.\u0275\u0275ProvidersFeature([{provide:C.NG_VALUE_ACCESSOR,useExisting:(0,e.forwardRef)(()=>i),multi:!0}]),e.\u0275\u0275NgOnChangesFeature],decls:9,vars:7,consts:[[1,"form-field-control","card","mt-2"],[1,"input-wrapper"],[1,"form-control",3,"ngModel","placeholder","required","disabled","ngModelChange","blur","click"],["searchInput",""],["class","select-wrapper",4,"ngIf"],["readOnlyProp",""],[1,"select-wrapper"],[4,"ngIf","ngIfElse"],["noScroll",""],[3,"click"],[1,"fas","fa-search"],[1,"select-viewport",3,"itemSize","scrolledIndexChange"],[4,"ngIf"],["class","select-item",3,"selected","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"select-item",3,"click"],[4,"ngFor","ngForOf"],[1,"no-scroll-wrapper"],["class","select-item",3,"selected","click",4,"ngFor","ngForOf"],["tabindex","-1",1,"read-only-text",3,"innerHTML","click"]],template:function(n,a){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"input",2,3),e.\u0275\u0275listener("ngModelChange",function(h){return a.searchField=h})("blur",function(){return a.onBlur()})("click",function(){return a.onFocus()})("ngModelChange",function(h){return a.onDataFilter(h)}),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,N,8,5,"div",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(7,H,1,1,"ng-template",null,5,e.\u0275\u0275templateRefExtractor)),2&n&&(e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(5,5,"LABEL.SEARCH")),e.\u0275\u0275property("ngModel",a.searchField)("required",a.required)("disabled",a.disabled),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",((null==a.searchField?null:a.searchField.length)>=2||a.value||0===(null==a.searchField?null:a.searchField.length))&&a.isInputFocused))},dependencies:[u.sg,u.O5,C.DefaultValueAccessor,C.NgControlStatus,C.RequiredValidator,C.NgModel,A.c,O.xd,O.x0,O.N7,y.X$],styles:['.select-viewport[_ngcontent-%COMP%]{height:350px}.select-viewport[_ngcontent-%COMP%] + button[_ngcontent-%COMP%], .no-scroll-wrapper[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{width:100%;text-align:left;padding-left:.7rem;background:transparent;border:none;height:40px;font-weight:600;color:#008aad;outline:none;min-width:100px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.select-viewport[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .no-scroll-wrapper[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.25rem}.select-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:200;background:#fff;top:36px;box-shadow:3px 4px 8px #0000004d;border:1px solid #ced4da;left:-1px;border-top:none;width:calc(100% + 2px)}.select-item[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center;padding:0 10px;border-bottom:1px solid rgba(0,0,0,.125)}.select-item[_ngcontent-%COMP%]:first-child{border-top:1px solid rgba(0,0,0,.125)}.select-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex:1 1 0}input.form-control[_ngcontent-%COMP%]{padding-right:2rem;border:none}.form-field-control[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.125)!important}.input-wrapper[_ngcontent-%COMP%]{position:relative;width:auto}.input-wrapper[_ngcontent-%COMP%]:after{content:"";position:absolute;border:solid black;border-width:0 2px 2px 0;right:15px;top:50%;padding:3px;transform:rotate(45deg) translate(-50%,-50%);z-index:10}.selected[_ngcontent-%COMP%]{background:#008aad;color:#fff}.read-only-text[_ngcontent-%COMP%]{font-weight:600}.read-only-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}']}),i})()},15861:(D,P,r)=>{function t(C,f,v,y,c,u,o){try{var s=C[u](o),l=s.value}catch(m){return void v(m)}s.done?f(l):Promise.resolve(l).then(y,c)}function e(C){return function(){var f=this,v=arguments;return new Promise(function(y,c){var u=C.apply(f,v);function o(l){t(u,y,c,o,s,"next",l)}function s(l){t(u,y,c,o,s,"throw",l)}o(void 0)})}}r.d(P,{Z:()=>e})}}]);