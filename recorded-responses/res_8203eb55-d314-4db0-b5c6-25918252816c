"use strict";(self.webpackChunkprismhr_ess=self.webpackChunkprismhr_ess||[]).push([[1420],{86899:(I,h,n)=>{n.r(h),n.d(h,{LoginModule:()=>w});var t=n(24006),m=n(36895),c=n(34793),p=n(52885),a=n(42466);const v={1:{messageCode:"ERROR.SERVER_ERROR"},2:{messageCode:"VALIDATION.INVALID_CREDENTIALS"},3:{messageCode:"VALIDATION.PASSWORD_EXPIRED"},4:{messageCode:"VALIDATION.ACCOUNT_LOCKED"},5:{messageCode:"VALIDATION.ACCOUNT_NOT_ACTIVE"},6:{messageCode:"VALIDATION.ACCOUNT_WILL_LOCK"},7:{messageCode:"VALIDATION.YOU_DONT_HAVE_ACCESS_TO_COMPANY"},8:{messageCode:"VALIDATION.SYSTEM_EMAIL_IS_NOT_SET"}};var u=n(17489),e=n(94650),d=n(27111),S=n(3270),r=n(91835),y=n(35385),E=n(99603);function M(i,g){if(1&i&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275element(1,"img",23),e.\u0275\u0275elementEnd()),2&i){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("src",o.templateConfig.loginLogo,e.\u0275\u0275sanitizeUrl)}}function O(i,g){if(1&i&&(e.\u0275\u0275elementStart(0,"div",24)(1,"div",25),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&i){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(o.templateConfig.loginMessage[o.locale])}}function T(i,g){if(1&i&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",o.errMsg," ")}}function A(i,g){1&i&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275element(1,"phr-loader3"),e.\u0275\u0275elementEnd())}function x(i,g){1&i&&(e.\u0275\u0275elementStart(0,"a",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"ACTION.REGISTER")))}function D(i,g){if(1&i){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",34),e.\u0275\u0275listener("click",function(){const f=e.\u0275\u0275restoreView(o).$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.i18nService.setAppLocale(f))}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&i){const o=g.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",o.label," ")}}function b(i,g){if(1&i&&(e.\u0275\u0275elementStart(0,"div",28)(1,"small"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",29)(5,"button",30),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",31),e.\u0275\u0275template(8,D,2,1,"button",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(9,"phr-privacy-policy-link",33),e.\u0275\u0275elementEnd()),2&i){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"LABEL.LANGUAGE")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",o.i18nService.appLocale.label," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",o.i18nService.languages),e.\u0275\u0275advance(1),e.\u0275\u0275property("templateConfig",o.templateConfig)}}function N(i,g){if(1&i&&(e.\u0275\u0275elementStart(0,"div",28),e.\u0275\u0275element(1,"phr-privacy-policy-link",33),e.\u0275\u0275elementEnd()),2&i){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("templateConfig",o.templateConfig)}}let R=(()=>{class i{constructor(o,l,C,f,s,P,_){this.router=o,this.authService=l,this.i18nService=C,this.domainService=f,this.translateService=s,this.route=P,this.configService=_,this.valid=!0,this.loading=!1}ngOnInit(){this.templateConfig=this.configService.config,this.enableSpanish=this.templateConfig.enableSpanish,this.authService.initRouteParameters()}login(o){this.loading=!0,this.errMsg=null,this.route.queryParams.subscribe(l=>{const C=(0,u.omit)(l,["ssoServiceId"]);this.authService.login(o.username,o.password,this.domainService.getPeoId(),this.i18nService.appLocale.code,C).subscribe(()=>{this.loading=!1,this.authService.loadSession().subscribe(f=>{if(this.authService.isMfaNeeded()){const s={queryParams:{...l}};this.router.navigate(["/auth/mfa-request-code"],s)}else if(f.clientId)l.ssoServiceId?this.authService.getSsoUrl(l.ssoServiceId).subscribe(s=>{if(s){const P=s.includes("?")?"&":"?",_=Object.keys(C).map(L=>L+"="+C[L]).join("&");window.location.href=s+`${P}${_}`}else this.router.navigate([this.authService.getRedirectUrl()])}):this.router.navigate([this.authService.getRedirectUrl()]);else{const s={queryParams:{...l}};this.router.navigate(["/auth/choose-client"],s)}})},f=>{this.loading=!1,this.valid=!1;const s=v[f.errorCode];s?(this.errMsg=this.translateService.instant(s.messageCode),3===f.errorCode&&this.router.navigate(["/auth/expired-password"],{queryParams:{username:o.username}})):this.errMsg=this.authService.emptyClientList?this.i18nService.getTranslateService().instant("VALIDATION.YOU_DONT_HAVE_ACCESS_TO_COMPANY"):this.i18nService.getTranslateService().instant("VALIDATION.INVALID_CREDENTIALS")})})}isShowLoginMessage(){return this.locale=this.i18nService.appLocale.code,this.templateConfig.loginMessage[this.locale]&&this.templateConfig.loginMessage[this.locale].length>0}}return i.\u0275fac=function(o){return new(o||i)(e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(d.e8),e.\u0275\u0275directiveInject(S.D),e.\u0275\u0275directiveInject(d.NF),e.\u0275\u0275directiveInject(a.sK),e.\u0275\u0275directiveInject(c.gz),e.\u0275\u0275directiveInject(d.oV))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ng-component"]],decls:40,vars:26,consts:[[1,"card","opacity-9"],[1,"card-body",2,"flex","0 0 auto"],["class","mb-3",4,"ngIf"],[1,"loginForm",3,"ngSubmit"],["form","ngForm"],[1,"row","no-gutters"],[1,"col-12"],[1,"form-group"],["for","username"],[1,"input-group"],["id","username","name","username","type","text","tabindex","1","autofocus","","aria-describedby","basic-addon1","ngModel","","required","",1,"form-control",3,"change"],["id","password","name","password","type","password","tabindex","2","phrPasswordToggle","","aria-describedby","basic-addon1","ngModel","","required","",1,"form-control","clear-ms-input-icons",3,"change"],["class","card mb-3",4,"ngIf"],["class","text-danger mb-3 pl-3 error-border-left",4,"ngIf"],["type","submit","tabindex","3",1,"btn","btn-primary"],["class","ml-3","href","#/auth/register",4,"ngIf"],[1,"row","no-gutters","mt-3"],[1,"col-6","pr-2"],["routerLink","/auth/forgot-username","tabindex","5"],[1,"col-6","pl-2"],["routerLink","/auth/forgot-password","tabindex","6"],["class","card-footer text-muted",4,"ngIf"],[1,"mb-3"],[1,"w-100",3,"src"],[1,"card","mb-3"],[1,"p-1"],[1,"text-danger","mb-3","pl-3","error-border-left"],["href","#/auth/register",1,"ml-3"],[1,"card-footer","text-muted"],["ngbDropdown","","placement","bottom-right","container","body",1,"d-inline-block"],["id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-link"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[3,"templateConfig"],[1,"dropdown-item",3,"click"]],template:function(o,l){if(1&o){const C=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div"),e.\u0275\u0275template(3,M,2,1,"div",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"form",3,4),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(C);const s=e.\u0275\u0275reference(5);return e.\u0275\u0275resetView(l.login(s.value))}),e.\u0275\u0275elementStart(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",9)(13,"input",10),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(C);const P=e.\u0275\u0275reference(5);return e.\u0275\u0275resetView(P.controls.username.setValue(s.target.value))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(14,"div",7)(15,"label",8),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",9)(19,"input",11),e.\u0275\u0275listener("change",function(s){e.\u0275\u0275restoreView(C);const P=e.\u0275\u0275reference(5);return e.\u0275\u0275resetView(P.controls.password.setValue(s.target.value))}),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(20,O,3,1,"div",12),e.\u0275\u0275template(21,T,2,1,"div",13),e.\u0275\u0275template(22,A,2,0,"div",2),e.\u0275\u0275elementStart(23,"div",5)(24,"div",6)(25,"button",14),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(28,x,3,3,"a",15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",16)(30,"div",17)(31,"a",18),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",19)(35,"a",20),e.\u0275\u0275text(36),e.\u0275\u0275pipe(37,"translate"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(38,b,10,6,"div",21),e.\u0275\u0275template(39,N,2,1,"div",21),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",l.templateConfig.loginLogo),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(11,16,"LABEL.USERNAME")," "),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("is-invalid",!l.valid),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,18,"LABEL.PASSWORD")," "),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("is-invalid",!l.valid),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.isShowLoginMessage()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.errMsg&&!l.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.loading),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(27,20,"ACTION.LOG_IN")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!l.authService.hideRegisterBtn),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(33,22,"ACTION.FORGOT_USERNAME"),"?"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(37,24,"ACTION.FORGOT_PASSWORD"),"?"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",l.enableSpanish),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!l.enableSpanish))},dependencies:[c.yS,m.sg,m.O5,t.\u0275NgNoValidate,t.DefaultValueAccessor,t.NgControlStatus,t.NgControlStatusGroup,t.RequiredValidator,t.NgModel,t.NgForm,p.jt,p.iD,p.Vi,r.m,y.c,E.U,a.X$],styles:[".clear-ms-input-icons[_ngcontent-%COMP%]::-ms-clear{display:none;width:0;height:0}.clear-ms-input-icons[_ngcontent-%COMP%]::-ms-reveal{display:none;width:0;height:0}"]}),i})();var V=n(21436),B=n(42437),j=n(29415),U=n(89670),F=n(82923);let w=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[c.Bz.forChild([{path:"",component:R}]),m.ez,t.ReactiveFormsModule,t.FormsModule,p.IJ,a.aw,U.Z,B.L,V.D,j.j,F.v]}),i})()},21985:(I,h,n)=>{n.d(h,{z:()=>p});var t=n(36895),m=n(52885),c=n(94650);let p=(()=>{class a{}return a.\u0275fac=function(u){return new(u||a)},a.\u0275mod=c.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=c.\u0275\u0275defineInjector({imports:[t.ez,m.dT]}),a})()},35385:(I,h,n)=>{n.d(h,{c:()=>m});var t=n(94650);let m=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=t.\u0275\u0275defineComponent({type:c,selectors:[["phr-loader3"]],decls:5,vars:0,consts:[[1,"loader3"],[1,"color1","sd0"],[1,"color2","sd05"],[1,"color3","sd1"],[1,"color4","sd15"]],template:function(a,v){1&a&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.\u0275\u0275elementEnd())},encapsulation:2}),c})()},99603:(I,h,n)=>{n.d(h,{U:()=>e});var t=n(94650),m=n(526),c=n(11481),p=n(52885);let a=(()=>{class d{constructor(r,y,E){this.privacyService=r,this.sanitizer=y,this.activeModal=E}ngOnInit(){this.privacyService.policy().subscribe(r=>{this.data=this.privacyService.isSanitizable()?r:this.sanitizer.bypassSecurityTrustHtml(r),this.privacyPolicy&&(this.data=this.sanitizer.bypassSecurityTrustHtml(this.privacyPolicy))})}}return d.\u0275fac=function(r){return new(r||d)(t.\u0275\u0275directiveInject(m.P),t.\u0275\u0275directiveInject(c.DomSanitizer),t.\u0275\u0275directiveInject(p.Kz))},d.\u0275cmp=t.\u0275\u0275defineComponent({type:d,selectors:[["phr-privacy-policy-modal"]],inputs:{privacyPolicy:"privacyPolicy"},decls:9,vars:1,consts:[[1,"pt-2","pr-3","privacy-dialog-header"],[1,"ml-3"],[1,"float-right","cursor-pointer",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"modal-body","privacy-body-height"],[1,"mt-1"],[1,"privacy-body-half-height"],[3,"innerHtml"]],template:function(r,y){1&r&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"span",1),t.\u0275\u0275elementStart(2,"a",2),t.\u0275\u0275listener("click",function(){return y.activeModal.dismiss("Close click")}),t.\u0275\u0275element(3,"i",3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",4)(5,"div"),t.\u0275\u0275element(6,"p",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",6),t.\u0275\u0275element(8,"div",7),t.\u0275\u0275elementEnd()()),2&r&&(t.\u0275\u0275advance(8),t.\u0275\u0275property("innerHtml",y.data,t.\u0275\u0275sanitizeHtml))},encapsulation:2}),d})();var v=n(3270),u=n(42466);let e=(()=>{class d{constructor(r,y){this.ngbModalService=r,this.i18nService=y}openPrivacyModal(){const r=this.ngbModalService.open(a,{backdrop:"static",centered:!0,size:"lg"});"en"===this.i18nService.appLocale.code&&this.templateConfig?.useCustomPrivacyStatement?r.componentInstance.privacyPolicy=this.templateConfig.customPrivacyStatement:"es"===this.i18nService.appLocale.code&&this.templateConfig?.useCustomPrivacyStatement&&(r.componentInstance.privacyPolicy=this.templateConfig.customPrivacyStatementEs)}ngOnInit(){}}return d.\u0275fac=function(r){return new(r||d)(t.\u0275\u0275directiveInject(p.FF),t.\u0275\u0275directiveInject(v.D))},d.\u0275cmp=t.\u0275\u0275defineComponent({type:d,selectors:[["phr-privacy-policy-link"]],inputs:{templateConfig:"templateConfig"},decls:4,vars:3,consts:[[1,"float-right","d-inline-block","mt-1"],["href","javascript:;",1,"ml-3",3,"click"]],template:function(r,y){1&r&&(t.\u0275\u0275elementStart(0,"div",0)(1,"a",1),t.\u0275\u0275listener("click",function(){return y.openPrivacyModal()}),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()()),2&r&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,1,"LABEL.PRIVACY_POLICY")))},dependencies:[u.X$],encapsulation:2}),d})()},82923:(I,h,n)=>{n.d(h,{v:()=>v});var t=n(36895),m=n(52885),c=n(42466),p=n(526),a=n(94650);let v=(()=>{class u{}return u.\u0275fac=function(d){return new(d||u)},u.\u0275mod=a.\u0275\u0275defineNgModule({type:u}),u.\u0275inj=a.\u0275\u0275defineInjector({providers:[p.P],imports:[t.ez,m.IJ,c.aw]}),u})()},526:(I,h,n)=>{n.d(h,{P:()=>a});var t=n(61737),m=n(94650),c=n(80529),p=n(3270);let a=(()=>{class v{constructor(e,d){this.http=e,this.i18nService=d,this.url="../assets/content/[locale]/privacy-policy.html"}policy(){return this.url="../assets/content/[locale]/privacy-policy.html",this.url=this.url.replace("[locale]",this.i18nService.appLocale.code),this.http.get(this.url,{responseType:"text"})}isSanitizable(){return!0}extractData(e){return e.text()}handleError(e){return(0,t._)(e)}}return v.\u0275fac=function(e){return new(e||v)(m.\u0275\u0275inject(c.eN),m.\u0275\u0275inject(p.D))},v.\u0275prov=m.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})()}}]);