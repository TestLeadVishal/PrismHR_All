"use strict";(self.webpackChunkprismhr_ess=self.webpackChunkprismhr_ess||[]).push([[8920],{18547:(H,N,r)=>{r.d(N,{O:()=>q});var e=r(94650),g=r(24006),t=r(66438),L=r(54362),F=r(87224),R=r(44228),P=r(34793),E=r(52885),M=r(42466),S=r(90525),y=r(36895),i=r(59253),U=r(57305),B=r(93456),V=r(66058),w=r(78126);let D=(()=>{class d{constructor(){}blockPaste(n){n.preventDefault()}}return d.\u0275fac=function(n){return new(n||d)},d.\u0275dir=e.\u0275\u0275defineDirective({type:d,selectors:[["","phrPastePrevent",""]],hostBindings:function(n,m){1&n&&e.\u0275\u0275listener("paste",function(I){return m.blockPaste(I)})}}),d})();const b=function(d){return{mask:d,guide:!1}};function o(d,f){if(1&d&&e.\u0275\u0275element(0,"input",6),2&d){const n=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("is-invalid",(n.control.value||n.control.touched)&&n.control.invalid),e.\u0275\u0275property("formControl",n.control)("type",n.togglePass)("textMask",e.\u0275\u0275pureFunction1(6,b,n.mask))("readonly",n.readonly)}}function l(d,f){if(1&d&&e.\u0275\u0275element(0,"input",7),2&d){const n=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("has-danger",(n.control.value||n.control.touched)&&n.control.invalid),e.\u0275\u0275property("formControl",n.control)("type",n.togglePass)("textMask",e.\u0275\u0275pureFunction1(6,b,n.mask))("readonly",n.readonly)}}let p=(()=>{class d extends B.E{constructor(){super(),this.valueChange=new e.EventEmitter,this.togglePass="password"}mask(n){return new Array(n?n.length+1:1).fill(/\d/)}ngOnInit(){super.init()}ngOnDestroy(){super.destroy()}}return d.\u0275fac=function(n){return new(n||d)},d.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["phr-account-number-control"]],inputs:{control:"control",label:"label",required:"required",disabled:"disabled",readonly:"readonly",preventPaste:"preventPaste"},outputs:{valueChange:"valueChange"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:8,vars:8,consts:[[1,"form-group"],[3,"control","label","required"],[1,"input-group"],["placeholder","xxxxxxxxx","autocomplete","off","pattern","[0-9]*","class","form-control","aria-describedby","basic-addon1","phrPastePrevent","",3,"formControl","type","textMask","is-invalid","readonly",4,"ngIf"],["placeholder","xxxxxxxxx","autocomplete","off","pattern","[0-9]*","class","form-control","aria-describedby","basic-addon1",3,"formControl","type","textMask","has-danger","readonly",4,"ngIf"],[3,"click"],["placeholder","xxxxxxxxx","autocomplete","off","pattern","[0-9]*","aria-describedby","basic-addon1","phrPastePrevent","",1,"form-control",3,"formControl","type","textMask","readonly"],["placeholder","xxxxxxxxx","autocomplete","off","pattern","[0-9]*","aria-describedby","basic-addon1",1,"form-control",3,"formControl","type","textMask","readonly"]],template:function(n,m){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"phr-input-label",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275template(3,o,1,8,"input",3),e.\u0275\u0275template(4,l,1,8,"input",4),e.\u0275\u0275elementStart(5,"span",5),e.\u0275\u0275listener("click",function(){return m.togglePass="password"===m.togglePass?"text":"password"}),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("control",m.control)("label",m.label)("required",m.required),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",m.preventPaste),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!m.preventPaste),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,6,"password"===m.togglePass?"LABEL.SHOW":"LABEL.HIDE")," "))},dependencies:[y.O5,g.DefaultValueAccessor,g.NgControlStatus,g.PatternValidator,g.FormControlDirective,V.hd,w.D,D,M.X$],styles:[".input-group[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{padding-right:3rem}span[_ngcontent-%COMP%]{position:absolute;right:20px;top:50%;transform:translateY(-50%);font-weight:600;color:#008aad;cursor:pointer;z-index:10}"]}),d})();var u=r(88228);const a=function(d){return{mask:d,guide:!1}};let s=(()=>{class d extends B.E{constructor(){super(),this.valueChange=new e.EventEmitter,this.mask=[/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/]}ngOnInit(){this.validators.push(u.dN.routingNumber),super.init()}ngOnDestroy(){super.destroy()}}return d.\u0275fac=function(n){return new(n||d)},d.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["phr-routing-number-control"]],inputs:{control:"control",label:"label",required:"required",disabled:"disabled",readonly:"readonly",validating:"validating"},outputs:{valueChange:"valueChange"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:6,vars:11,consts:[[1,"form-group"],[3,"control","label","required"],[1,"input-group"],["placeholder","xxxxxxxxx","type","text","maxlength","9","aria-describedby","basic-addon1",1,"form-control",3,"formControl","textMask","readonly"],["id","basic-addon1",1,"input-group-prepend","input-group-text",3,"hidden"],[1,"fas","fa-circle-notch","fa-spin"]],template:function(n,m){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"phr-input-label",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275element(3,"input",3),e.\u0275\u0275elementStart(4,"span",4),e.\u0275\u0275element(5,"i",5),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("control",m.control)("label",m.label)("required",m.required),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("is-invalid",(m.control.value||m.control.touched)&&m.control.invalid),e.\u0275\u0275property("formControl",m.control)("textMask",e.\u0275\u0275pureFunction1(9,a,m.mask))("readonly",m.readonly),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",!m.validating||m.control.value&&9!==m.control.value.length))},dependencies:[g.DefaultValueAccessor,g.NgControlStatus,g.MaxLengthValidator,g.FormControlDirective,V.hd,w.D],encapsulation:2}),d})();var A=r(52586),O=r(75985);const k={align:"left",allowNegative:!1,allowZero:!0,decimal:".",precision:2,prefix:"",suffix:"%",thousands:","};let j=(()=>{class d extends B.E{constructor(){super(),this.valueChange=new e.EventEmitter,this.maskOptions=k}set model(n){this.control.setValue(n),this._model=n}get model(){return this._model}ngOnInit(){this.init(),this._model=this.control.value,this.control.valueChanges.subscribe(n=>{this._model=n})}ngOnDestroy(){this.destroy()}}return d.\u0275fac=function(n){return new(n||d)},d.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["phr-percentage-control"]],inputs:{control:"control",label:"label",required:"required",disabled:"disabled",readonly:"readonly",ngModelOptions:"ngModelOptions"},outputs:{valueChange:"valueChange"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:10,consts:[[1,"form-group"],[3,"control","label","required"],[1,"input-group"],["currencyMask","","type","text","aria-describedby","basic-addon1",1,"form-control",3,"options","ngModel","ngModelOptions","readonly","disabled","ngModelChange","focus"]],template:function(n,m){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"phr-input-label",1),e.\u0275\u0275elementStart(2,"div",2)(3,"input",3),e.\u0275\u0275listener("ngModelChange",function(I){return m.model=I})("focus",function(){return m.control.markAsTouched()}),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("control",m.control)("label",m.label)("required",m.required),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("is-invalid",(m.control.value||m.control.touched)&&m.control.invalid),e.\u0275\u0275property("options",m.maskOptions)("ngModel",m.model)("ngModelOptions",m.ngModelOptions)("readonly",m.readonly)("disabled",m.disabled))},dependencies:[g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,O.g1,w.D],encapsulation:2}),d})();function W(d,f){1&d&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275element(1,"i",9),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&d&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"MESSAGE.ACCOUNT_ADDED")," "))}function G(d,f){1&d&&(e.\u0275\u0275elementStart(0,"h3"),e.\u0275\u0275element(1,"i",9),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&d&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"MESSAGE.ACCOUNT_UPDATED")," "))}function X(d,f){if(1&d&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275template(1,W,4,3,"h3",8),e.\u0275\u0275template(2,G,4,3,"h3",8),e.\u0275\u0275elementEnd()),2&d){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.editing),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.editing)}}function z(d,f){1&d&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&d&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"LABEL.CHECKING")))}function $(d,f){1&d&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&d&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"LABEL.SAVINGS")))}function J(d,f){if(1&d&&(e.\u0275\u0275elementStart(0,"h4",19),e.\u0275\u0275text(1),e.\u0275\u0275template(2,z,3,3,"span",8),e.\u0275\u0275template(3,$,3,3,"span",8),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()),2&d){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.account.bankName," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Checking"===n.account.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Savings"===n.account.type),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" - #",n.account.accountNumber," ")}}function v(d,f){if(1&d){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15)(1,"h6"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"hr"),e.\u0275\u0275elementStart(5,"div",11)(6,"div",15)(7,"phr-routing-number-control",20),e.\u0275\u0275listener("valueChange",function(_){e.\u0275\u0275restoreView(n);const I=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(I.validateRoutingNumber(_))}),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",15),e.\u0275\u0275element(10,"phr-control",21),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",22),e.\u0275\u0275element(13,"phr-dropdown-control",23),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",22)(16,"phr-account-number-control",24),e.\u0275\u0275listener("valueChange",function(){e.\u0275\u0275restoreView(n);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.validateAccountNumber())}),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",22)(19,"phr-account-number-control",25),e.\u0275\u0275listener("valueChange",function(){e.\u0275\u0275restoreView(n);const _=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_.validateAccountNumber())}),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementEnd()()()()}if(2&d){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,14,"LABEL.ACCOUNT_INFO")),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(8,16,"LABEL.ROUTING_NUMBER")),e.\u0275\u0275property("validating",n.validatingRouting)("control",n.directDepositForm.controls.transitNumber),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(11,18,"LABEL.BANK_NAME")),e.\u0275\u0275property("control",n.directDepositForm.controls.bankName),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(14,20,"LABEL.ACCOUNT_TYPE")),e.\u0275\u0275property("options",n.accountTypeOptions)("control",n.directDepositForm.controls.type),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(17,22,"LABEL.ACCOUNT_NUMBER")),e.\u0275\u0275property("control",n.directDepositForm.controls.accountNumber),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(20,24,"LABEL.CONFIRM_ACCOUNT_NUMBER")),e.\u0275\u0275property("control",n.directDepositForm.controls.confirmEnterAccountNumber)("preventPaste",!0)}}function x(d,f){1&d&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275element(1,"img",27),e.\u0275\u0275elementEnd())}function c(d,f){1&d&&(e.\u0275\u0275elementStart(0,"h6"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&d&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"LABEL.SETTINGS")))}function h(d,f){1&d&&e.\u0275\u0275element(0,"hr")}function C(d,f){if(1&d){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"phr-usd-control",28),e.\u0275\u0275listener("valueChange",function(_){e.\u0275\u0275restoreView(n);const I=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(I.validateDDAmount(_))}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementEnd()}if(2&d){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(1,3,"LABEL.AMOUNT")),e.\u0275\u0275property("control",n.directDepositForm.controls.amount)("disabled",n.amountDisabled)}}function T(d,f){if(1&d){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"phr-percentage-control",28),e.\u0275\u0275listener("valueChange",function(_){e.\u0275\u0275restoreView(n);const I=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(I.validateDDAmount(_))}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementEnd()}if(2&d){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(1,3,"LABEL.PERCENT")),e.\u0275\u0275property("control",n.directDepositForm.controls.amount)("disabled",n.amountDisabled)}}function K(d,f){if(1&d){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275template(1,J,5,4,"h4",10),e.\u0275\u0275elementStart(2,"div",11),e.\u0275\u0275template(3,v,21,26,"div",12),e.\u0275\u0275template(4,x,2,0,"div",13),e.\u0275\u0275elementStart(5,"div",14),e.\u0275\u0275template(6,c,3,3,"h6",8),e.\u0275\u0275template(7,h,1,0,"hr",8),e.\u0275\u0275elementStart(8,"div",11)(9,"div",15)(10,"phr-dropdown-control",16),e.\u0275\u0275listener("valueChange",function(_){e.\u0275\u0275restoreView(n);const I=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(I.depositMethodChange(_))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",15),e.\u0275\u0275template(12,C,2,5,"phr-usd-control",17),e.\u0275\u0275template(13,T,2,5,"phr-percentage-control",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",15),e.\u0275\u0275element(15,"phr-usd-control",18),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd()()()()()}if(2&d){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.editing),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!n.editing),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.editing),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!n.editing),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.editing),e.\u0275\u0275advance(3),e.\u0275\u0275property("label",n.directDepositFormMethodLabel)("options",n.calculationMethodOptions)("control",n.directDepositForm.controls.depositMethod),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Percent"!==n.directDepositForm.controls.depositMethod.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Percent"===n.directDepositForm.controls.depositMethod.value),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(16,13,"LABEL.MAXIMUM")),e.\u0275\u0275property("disabled",n.maximumDisabled)("control",n.directDepositForm.controls.maximum)}}function Y(d,f){if(1&d){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.handleUpdateAccount())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}if(2&d){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.directDepositForm.valid||n.isProxyUser),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"ACTION.SAVE")," ")}}function Q(d,f){if(1&d){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.handleAddAccount())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}if(2&d){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.directDepositForm.valid||n.directDepositService.accounts.length>=n.directDepositService.maxAccounts||n.itProxyUser),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"ACTION.ADD")," ")}}function Z(d,f){if(1&d){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",30),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.handleDeleteAccount())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}if(2&d){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",n.isProxyUser),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"ACTION.REMOVE")," ")}}let q=(()=>{class d{constructor(n,m,_,I,ee,te){this.directDepositService=n,this.fb=m,this.route=_,this.modalService=I,this.translateService=ee,this.userStateService=te,this.account={},this.editing=!1,this.onDeleteAccount=new e.EventEmitter,this.onUpdateAccount=new e.EventEmitter,this.onAddAccount=new e.EventEmitter,this.onCancel=new e.EventEmitter,this.ignorePath=["/ess/life-events"],this.directDepositForm=this.fb.group({transitNumber:"",bankName:"",type:"",accountNumber:"",confirmEnterAccountNumber:"",depositMethod:"",amount:new g.FormControl(null),maximum:new g.FormControl(null)}),this.validatingRouting=!1,this.amountDisabled=!0,this.maximumDisabled=!0,this.saved=!1,this.calculationMethodOptions=[{value:"",display:this.translateService.instant("LABEL.SELECT_ONE")}],this.accountTypeOptions=[{value:"",display:this.translateService.instant("LABEL.SELECT_ONE")},{value:"Checking",display:this.translateService.instant("LABEL.CHECKING")},{value:"Savings",display:this.translateService.instant("LABEL.SAVINGS")}]}saveForm(){return this.account.transitNumber=this.directDepositForm.value.transitNumber,this.account.bankName=this.directDepositForm.value.bankName,this.account.type=this.directDepositForm.value.type,this.account.accountNumber=this.directDepositForm.value.accountNumber,this.account.depositMethod=this.directDepositForm.value.depositMethod,this.account.amount=this.directDepositForm.value.amount,null===this.account.amount&&(this.account.amount=0),this.account.maximum=this.directDepositForm.value.maximum?this.directDepositForm.value.maximum:null,this.account}cancel(){this.onCancel.emit()}fillForm(){this.directDepositForm.controls.transitNumber.setValue(this.account.transitNumber),this.directDepositForm.controls.bankName.setValue(this.account.bankName),this.directDepositForm.controls.type.setValue(this.account.type),this.directDepositForm.controls.accountNumber.setValue(this.account.accountNumber),this.directDepositForm.controls.depositMethod.setValue(this.account.depositMethod),this.directDepositForm.controls.amount.setValue(this.account.amount),this.directDepositForm.controls.maximum.setValue(this.account.maximum)}localize(){this.accountTypeOptions=[{value:"",display:this.translateService.instant("LABEL.SELECT_ONE")},{value:"Checking",display:this.translateService.instant("LABEL.CHECKING")},{value:"Savings",display:this.translateService.instant("LABEL.SAVINGS")}],this.buildCalculationMethodOptions()}validateRoutingNumber(n){const m=this.directDepositForm.controls;n&&m.transitNumber.valid&&(this.validatingRouting=!0,this.directDepositService.getTransitInfo(n).subscribe(I=>{this.validatingRouting=!1,I.valid?m.bankName.setValue(I.bankName):m.transitNumber.setErrors({invalidTransit:!0})},I=>{this.validatingRouting=!1,m.transitNumber.setErrors({invalidTransit:!0})}))}validateAccountNumber(){const n=this.directDepositForm.controls.confirmEnterAccountNumber,_=n.value;_&&_.length>0&&n.setErrors(this.directDepositForm.value.accountNumber!==_?{custom:this.translateService.instant("VALIDATION.NO_MATCH")}:null)}validateDDAmount(n){this.directDepositForm.controls.amount.setErrors(n<=0?{custom:this.translateService.instant("VALIDATION.AMOUNT_CANNOT_BE_0")}:null)}buildCalculationMethodOptions(){this.calculationMethodOptions=[{value:"",display:this.translateService.instant("LABEL.SELECT_ONE")},{value:t.L.FIXED,display:this.translateService.instant("LABEL.FIXED")},{value:t.L.PERCENT,display:this.translateService.instant("LABEL.PERCENT")}],(!this.directDepositService.remainderExists()||this.directDepositForm.controls.depositMethod.value===t.L.REMAINDER)&&this.calculationMethodOptions.push({value:t.L.REMAINDER,display:this.translateService.instant("LABEL.REMAINDER")})}depositMethodChange(n){const m=this.directDepositForm.controls;n===t.L.FIXED?(m.maximum.setValue(null),this.amountDisabled=!1):n===t.L.PERCENT?(this.amountDisabled=!1,this.maximumDisabled=!1):(m.maximum.setValue(null),m.amount.setValue(null),this.maximumDisabled=!0,this.amountDisabled=!0)}handleDeleteAccount(){this.onDeleteAccount.emit()}handleAddAccount(){this.account=this.saveForm(),this.account.status="P",this.onAddAccount.emit(this.account)}handleUpdateAccount(){this.onUpdateAccount.emit(this.saveForm())}ngOnInit(){this.userStateService.session$.pipe((0,F.P)()).subscribe(n=>{this.isProxyUser=!!n?.proxyInfo}),this.setDirectDepositLabel(),this.fillForm(),this.localize(),this.translateService.onLangChange.subscribe(n=>{this.localize()})}showDDHelp(){this.modalService.open(L.S)}setDirectDepositLabel(){const n=this.translateService.instant("LABEL.DEPOSIT_METHOD");this.directDepositFormMethodLabel=this.ignorePath.includes(this.route._routerState.snapshot.url)?n:n+"<a onclick='window.dispatchEvent(new CustomEvent(\"showDDHelp\"));' href='javascript:;'><i class='fas fa-question-circle text-primary px-2'></i></a>"}}return d.\u0275fac=function(n){return new(n||d)(e.\u0275\u0275directiveInject(R.A),e.\u0275\u0275directiveInject(g.FormBuilder),e.\u0275\u0275directiveInject(P.gz),e.\u0275\u0275directiveInject(E.FF),e.\u0275\u0275directiveInject(M.sK),e.\u0275\u0275directiveInject(S.P))},d.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["phr-direct-deposit-account-form"]],hostBindings:function(n,m){1&n&&e.\u0275\u0275listener("showDDHelp",function(){return m.showDDHelp()},!1,e.\u0275\u0275resolveWindow)},inputs:{account:"account",editing:"editing"},outputs:{onDeleteAccount:"onDeleteAccount",onUpdateAccount:"onUpdateAccount",onAddAccount:"onAddAccount",onCancel:"onCancel"},decls:11,vars:9,consts:[["autocomplete","off",3,"formGroup"],[1,"card","mb-3"],["class","card-body",4,"ngIf"],[1,"d-flex","justify-content-start","flex-wrap"],["type","button","class","btn btn-primary mr-3 mb-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","mr-3","mb-2",3,"click"],["type","button","class","btn btn-danger mb-2 ml-auto",3,"disabled","click",4,"ngIf"],[1,"card-body"],[4,"ngIf"],["aria-hidden","true",1,"fas","fa-check","text-success"],["class","card-title",4,"ngIf"],[1,"row"],["class","col-lg-6",4,"ngIf"],["class","col-lg-6 text-center",4,"ngIf"],[1,"col-12"],[1,"col-lg-6"],["required","",3,"label","options","control","valueChange"],["required","",3,"label","control","disabled","valueChange",4,"ngIf"],[3,"label","disabled","control"],[1,"card-title"],["required","",3,"label","validating","control","valueChange"],["readonly","true","required","",3,"label","control"],[1,"col-lg-12"],["required","",3,"label","options","control"],["required","",3,"label","control","valueChange"],["required","",3,"label","control","preventPaste","valueChange"],[1,"col-lg-6","text-center"],["src","assets/images/check.jpg",1,"img-fluid","mb-3"],["required","",3,"label","control","disabled","valueChange"],["type","button",1,"btn","btn-primary","mr-3","mb-2",3,"disabled","click"],["type","button",1,"btn","btn-danger","mb-2","ml-auto",3,"disabled","click"]],template:function(n,m){1&n&&(e.\u0275\u0275elementStart(0,"form",0)(1,"div",1),e.\u0275\u0275template(2,X,3,2,"div",2),e.\u0275\u0275template(3,K,17,15,"div",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275template(5,Y,3,4,"button",4),e.\u0275\u0275template(6,Q,3,4,"button",4),e.\u0275\u0275elementStart(7,"button",5),e.\u0275\u0275listener("click",function(){return m.cancel()}),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Z,3,4,"button",6),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275property("formGroup",m.directDepositForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",m.saved),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!m.saved),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",m.editing&&!m.saved),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!m.editing&&!m.saved),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(9,7,"ACTION.CANCEL")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",m.editing&&!m.saved))},dependencies:[y.O5,g.\u0275NgNoValidate,g.NgControlStatusGroup,g.FormGroupDirective,i.S,U.T,p,s,A.X,j,M.X$],encapsulation:2}),d})()},75255:(H,N,r)=>{r.d(N,{$:()=>p});var e=r(94650),g=r(54362),t=r(44228),L=r(42466),F=r(52885),R=r(36895),P=r(84562);function E(u,a){1&u&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275element(1,"i",8),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&u&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"MESSAGE.DIRECT_DEPOSIT.ACH_INACTIVE")," "))}const M=function(u,a){return{"alert-warning":u,"alert-danger":a}},S=function(u,a){return{"fa-exclamation-circle":u,"fa-exclamation-triangle":a}};function y(u,a){if(1&u&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275element(1,"i",13),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&u){const s=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,M,s.isWarningTypeOfMessage(),s.isErrorTypeOfMessage())),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(6,S,s.forceBalance,!s.forceBalance)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(s.getForceBalanceMessage())}}function i(u,a){1&u&&(e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275element(1,"i",15),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()),2&u&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,1,"MESSAGE.DIRECT_DEPOSIT.SELECT_ACCOUNT")))}function U(u,a){if(1&u&&(e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275element(1,"i",15),e.\u0275\u0275elementStart(2,"span",17),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&u){const s=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(s.getUnsavedChangesMessage())}}function B(u,a){if(1&u&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,y,4,9,"div",9),e.\u0275\u0275template(2,i,5,3,"div",10),e.\u0275\u0275template(3,U,4,1,"div",11),e.\u0275\u0275elementEnd()),2&u){const s=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",s.showMessage()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!s.showMessage()&&s.directDepositService.validPercentage()&&!s.directDepositService.changed),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!s.showMessage()&&s.directDepositService.validPercentage()&&s.directDepositService.changed)}}function V(u,a){if(1&u&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275template(1,E,4,3,"div",5),e.\u0275\u0275template(2,B,4,3,"div",6),e.\u0275\u0275elementEnd()),2&u){const s=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!s.directDepositEnabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",s.directDepositEnabled)}}function w(u,a){if(1&u&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,V,3,2,"div",3),e.\u0275\u0275elementEnd()),2&u){const s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!s.loading)}}function D(u,a){if(1&u){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",29),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(s);const O=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(O.handleAddAccountClicked())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}if(2&u){const s=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("disabled",s.showSaved),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"TITLE.ADD_ACCOUNT")," ")}}function b(u,a){if(1&u){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25)(1,"button",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(s);const O=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(O.handleViewTestCalculator())}),e.\u0275\u0275element(2,"i",27),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,D,3,4,"button",28),e.\u0275\u0275elementEnd()}if(2&u){const s=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!s.directDepositService.validPercentage()),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,3,"LABEL.TEST_CALCULATOR")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",s.accounts.length<s.directDepositService.maxAccounts&&!s.readonly)}}const o=function(){return["accountNumber"]};function l(u,a){if(1&u){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"h4",22),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,b,6,5,"div",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",2)(9,"div",4)(10,"phr-responsive-table",24),e.\u0275\u0275listener("rowClick",function(O){e.\u0275\u0275restoreView(s);const k=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(k.readonly?"":k.handleRowClicked(O))}),e.\u0275\u0275elementEnd()()()()()}if(2&u){const s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,7,"TITLE.BANK_ACCOUNTS")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",s.directDepositEnabled),e.\u0275\u0275advance(3),e.\u0275\u0275property("columns",s.tableColumns)("data",s.accounts)("loading",!1)("rowPointer",!s.readonly)("hiddenAttributes",e.\u0275\u0275pureFunction0(9,o))}}let p=(()=>{class u{constructor(s,A,O){this.directDepositService=s,this.translateService=A,this.modalService=O,this.saving=!1,this.showSaved=!1,this.loading=!1,this.accounts=[],this.readonly=!1,this.savedChangesLabel="MESSAGE.DIRECT_DEPOSIT.UNSAVED_CHANGES",this.onRowClicked=new e.EventEmitter,this.onViewTestCalculator=new e.EventEmitter,this.onAddAccountClicked=new e.EventEmitter,this.tableColumns=[{title:this.translateService.instant("LABEL.ACCOUNT_TYPE"),attribute:"type"},{title:this.translateService.instant("LABEL.ACCOUNT_NUMBER"),attribute:"accountNumber"},{title:this.translateService.instant("LABEL.ROUTING_NUMBER"),attribute:"transitNumber"},{title:this.translateService.instant("LABEL.DEPOSIT_METHOD")+"<a onclick='window.dispatchEvent(new CustomEvent(\"showDDHelp\"));' href='javascript:;'><i class='fas fa-question-circle text-primary px-2'></i></a>",attribute:"depositMethodDescription",type:"html"},{title:this.translateService.instant("LABEL.AMOUNT"),attribute:"amount"},{title:this.translateService.instant("LABEL.MAXIMUM"),attribute:"maximum",type:"currency"},{title:this.translateService.instant("LABEL.ACCOUNT_STATUS"),attribute:"statusDescription"}],this.translateService.onLangChange.subscribe(()=>{this.localize()})}showMessage(){const s=this.directDepositService.percentageAmount()>100;return!this.directDepositService.isValidAmount()||s}handleViewTestCalculator(){this.onViewTestCalculator.emit()}handleRowClicked(s){this.onRowClicked.emit(s)}handleAddAccountClicked(){this.onAddAccountClicked.emit()}getUnsavedChangesMessage(){return this.translateService.instant(this.savedChangesLabel)}showDDHelp(){this.modalService.open(g.S)}isWarningTypeOfMessage(){return this.directDepositService.percentageAmount()<100&&!this.forceBalance||this.directDepositService.percentageAmount()>100&&this.forceBalance}isErrorTypeOfMessage(){return this.directDepositService.percentageAmount()<100&&this.forceBalance||this.directDepositService.percentageAmount()>100&&!this.forceBalance}getForceBalanceMessage(){const s=this.directDepositService.percentageAmount();return this.translateService.instant(this.forceBalance?s<100?"MESSAGE.DIRECT_DEPOSIT.INCREASE_PERCENTAGE":"MESSAGE.DIRECT_DEPOSIT.EQUAL_100_SUM":s<100?"MESSAGE.DIRECT_DEPOSIT.PAPER_CHECK_PAID":"MESSAGE.DIRECT_DEPOSIT.DECREASE_PERCENTAGE")}localize(){this.tableColumns=[{title:this.translateService.instant("LABEL.ACCOUNT_TYPE"),attribute:"type"},{title:this.translateService.instant("LABEL.ACCOUNT_NUMBER"),attribute:"accountNumber"},{title:this.translateService.instant("LABEL.ROUTING_NUMBER"),attribute:"transitNumber"},{title:this.translateService.instant("LABEL.DEPOSIT_METHOD")+"<a onclick='window.dispatchEvent(new CustomEvent(\"showDDHelp\"));' href='javascript:;'><i class='fas fa-question-circle text-primary px-2'></i></a>",attribute:"depositMethodDescription",type:"html"},{title:this.translateService.instant("LABEL.AMOUNT"),attribute:"amount"},{title:this.translateService.instant("LABEL.MAXIMUM"),attribute:"maximum",type:"currency"},{title:this.translateService.instant("LABEL.ACCOUNT_STATUS"),attribute:"statusDescription"}]}}return u.\u0275fac=function(s){return new(s||u)(e.\u0275\u0275directiveInject(t.A),e.\u0275\u0275directiveInject(L.sK),e.\u0275\u0275directiveInject(F.FF))},u.\u0275cmp=e.\u0275\u0275defineComponent({type:u,selectors:[["phr-direct-deposit-table"]],hostBindings:function(s,A){1&s&&e.\u0275\u0275listener("showDDHelp",function(){return A.showDDHelp()},!1,e.\u0275\u0275resolveWindow)},inputs:{loading:"loading",directDepositEnabled:"directDepositEnabled",accounts:"accounts",readonly:"readonly",savedChangesLabel:"savedChangesLabel",forceBalance:"forceBalance"},outputs:{onRowClicked:"onRowClicked",onViewTestCalculator:"onViewTestCalculator",onAddAccountClicked:"onAddAccountClicked"},decls:2,vars:2,consts:[["class","row",4,"ngIf"],["class","card mb-3",4,"ngIf"],[1,"row"],["class","col",4,"ngIf"],[1,"col"],["class","alert alert-info",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-info"],["aria-hidden","true",1,"fa","fa-exclamation-circle"],["class","alert","role","alert",3,"ngClass",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["role","alert",1,"alert",3,"ngClass"],["aria-hidden","true",1,"fas","fa-exclamation","mr-2",3,"ngClass"],[1,"alert","alert-warning"],["aria-hidden","true",1,"fas","fa-exclamation","mr-2"],[1,"alert","alert-danger"],[1,"text-danger"],[1,"card","mb-3"],[1,"card-body"],[1,"d-flex","flex-wrap"],[1,"d-flex","mr-auto"],[1,"card-title"],["class","d-flex justify-content-end flex-fill flex-wrap",4,"ngIf"],["showPaginator","true","itemsPerPage","10","rowHighlight","true","showViewCount","true",1,"w-100",3,"columns","data","loading","rowPointer","hiddenAttributes","rowClick"],[1,"d-flex","justify-content-end","flex-fill","flex-wrap"],["type","button",1,"btn","btn-link",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-calculator"],["type","button","class","btn btn-primary mb-1 btn-small",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-primary","mb-1","btn-small",3,"disabled","click"]],template:function(s,A){1&s&&(e.\u0275\u0275template(0,w,2,1,"div",0),e.\u0275\u0275template(1,l,11,10,"div",1)),2&s&&(e.\u0275\u0275property("ngIf",!A.readonly),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!A.loading))},dependencies:[R.mk,R.O5,P.Q,L.X$],encapsulation:2}),u})()},6081:(H,N,r)=>{r.d(N,{B:()=>l});var e=r(94650),g=r(66438),t=r(54362),L=r(43242),F=r(42466),R=r(44228),P=r(52885),E=r(34793),M=r(24006),S=r(36895),y=r(34623),i=r(88452),U=r(52586),B=r(84562);function V(p,u){1&p&&e.\u0275\u0275element(0,"phr-block-loader")}function w(p,u){if(1&p&&(e.\u0275\u0275elementStart(0,"div",12)(1,"div",13)(2,"div",3)(3,"div",14),e.\u0275\u0275element(4,"phr-responsive-table",15),e.\u0275\u0275elementEnd()()()()),2&p){const a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("columns",a.accountsColumns)("data",a.calculatedAccounts)("loading",a.loading)}}function D(p,u){if(1&p){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"phr-usd-control",5),e.\u0275\u0275listener("valueChange",function(){e.\u0275\u0275restoreView(a);const A=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(A.calculateAccounts())}),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",6)(5,"div",7)(6,"b"),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",3)(10,"div",6),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275element(13,"br"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"currency"),e.\u0275\u0275element(16,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",6),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275element(20,"br"),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"currency"),e.\u0275\u0275element(23,"br"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(24,V,1,0,"phr-block-loader",8),e.\u0275\u0275template(25,w,5,3,"div",9),e.\u0275\u0275elementStart(26,"div",10)(27,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(a);const A=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(A.handleCancel())}),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementEnd()()}if(2&p){const a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(3,11,"LABEL.TEST_NET_PAYMENT")),e.\u0275\u0275property("control",a.calculatorForm.controls.payAmount)("disabled",!1),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(8,13,"LABEL.SUMMARY")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,15,"LABEL.TOTAL_DEPOSITS"),""),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind4(15,17,a.calculatorSummary.totalDeposits,"USD",!0,"1.2-2")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(19,22,"LABEL.TO_CHECK"),""),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind4(22,24,a.calculatorSummary.toCheck,"USD",!0,"1.2-2")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",a.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!a.loading),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(29,29,"ACTION.CANCEL")," ")}}function b(p,u){if(1&p&&(e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275element(1,"phr-page-heading"),e.\u0275\u0275elementContainer(2,17),e.\u0275\u0275elementEnd()),2&p){e.\u0275\u0275nextContext();const a=e.\u0275\u0275reference(1);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngTemplateOutlet",a)}}function o(p,u){if(1&p&&e.\u0275\u0275elementContainer(0,17),2&p){e.\u0275\u0275nextContext();const a=e.\u0275\u0275reference(1);e.\u0275\u0275property("ngTemplateOutlet",a)}}let l=(()=>{class p{constructor(a,s,A,O,k,j){this.breadcrumbService=a,this.translateService=s,this.directDepositService=A,this.modalService=O,this.route=k,this.fb=j,this.accountsColumns=[{title:this.translateService.instant("LABEL.ROUTING_NUMBER"),attribute:"routingNumber"},{title:this.translateService.instant("LABEL.DEPOSIT_METHOD")+"<a onclick='window.dispatchEvent(new CustomEvent(\"showDDHelp\"));' href='javascript:;'><i class='fas fa-question-circle text-primary px-2'></i></a>",attribute:"depositMethod",type:"html"},{title:this.translateService.instant("LABEL.AMOUNT"),attribute:"amount"},{title:this.translateService.instant("LABEL.MAXIMUM"),attribute:"maximum",type:"currency"},{title:this.translateService.instant("LABEL.CALCULATED_DEPOSIT"),attribute:"calculatedDeposit",type:"currency"}],this.calculatorForm=this.fb.group({payAmount:this.directDepositService.calculatorAmount}),this.calculatedAccounts=[],this.accounts=[],this.remainder=0,this.loading=!0,this.errMsg="",this.showHeader=!0,this.onCancel=new e.EventEmitter}setBreadcrumbs(){this.breadcrumbService.setBreadcrumbItems([{url:"/ess/home"},{url:"/ess/direct-deposit"},{text:this.translateService.instant("LABEL.TEST_CALCULATOR")}])}handleCancel(){this.showHeader&&this.route.navigateByUrl("/ess/direct-deposit"),this.onCancel.emit()}setColumns(){this.accountsColumns=[{title:this.translateService.instant("LABEL.ROUTING_NUMBER"),attribute:"routingNumber"},{title:this.translateService.instant("LABEL.DEPOSIT_METHOD")+"<a onclick='window.dispatchEvent(new CustomEvent(\"showDDHelp\"));' href='javascript:;'><i class='fas fa-question-circle text-primary px-2'></i></a>",attribute:"depositMethod",type:"html"},{title:this.translateService.instant("LABEL.AMOUNT"),attribute:"amount"},{title:this.translateService.instant("LABEL.MAXIMUM"),attribute:"maximum",type:"currency"},{title:this.translateService.instant("LABEL.CALCULATED_DEPOSIT"),attribute:"calculatedDeposit",type:"currency"}]}localize(){this.showHeader&&this.setBreadcrumbs(),this.accounts=this.directDepositService.translateColumns(this.accounts),this.setColumns()}ngOnInit(){this.showHeader&&this.translateService.onLangChange.subscribe(a=>{this.localize()}),this.localize(),this.calculatorSummary={payAmount:Number(0),totalDeposits:Number(0),toCheck:Number(0)},this.getDirectDepositAccounts(),this.translateService.onLangChange.subscribe(a=>{this.getDirectDepositAccounts()})}calculateAccounts(){let a;this.initialSettings();for(let s=0;s<this.accounts.length;s++)this.accounts[s].depositMethod===g.L.REMAINDER?a=this.accounts[s]:this.populateAccount(this.accounts[s]);a&&this.calculatedAccounts.push(this.calculateRemainderAccount(a)),this.checkToCheckField()}populateAccount(a){this.calculatedAccounts.push({routingNumber:a.transitNumber,depositMethod:a.depositMethodDescription,amount:String(a.amount),maximum:a.maximum,calculatedDeposit:a.depositMethod===g.L.FIXED?this.calculateDepositForFixed(a):this.calculateDepositForPercent(a)})}initialSettings(){this.calculatorSummary.totalDeposits=0,this.directDepositService.calculatorAmount=this.calculatorForm.controls.payAmount.value,this.calculatorSummary.payAmount=this.calculatorForm.controls.payAmount.value?this.calculatorForm.controls.payAmount.value:0,this.remainder=this.calculatorSummary.payAmount,this.calculatedAccounts=[]}checkToCheckField(){this.calculatorSummary.toCheck<0&&(this.calculatorSummary.toCheck=0)}calculateRemainderAccount(a){return this.calculatorSummary.toCheck=0,this.calculatorSummary.totalDeposits=this.calculatorSummary.payAmount,{routingNumber:a.transitNumber,depositMethod:a.depositMethodDescription,amount:"",maximum:a.maximum,calculatedDeposit:this.remainder}}calculateDepositForFixed(a){let s=0;return Number(a.amount)>Number(this.remainder)?(this.calculatorSummary.totalDeposits=this.calculatorSummary.totalDeposits+this.remainder,s=this.remainder,this.remainder=0):(this.remainder=this.remainder-a.amount,this.calculatorSummary.totalDeposits=Number(this.calculatorSummary.totalDeposits)+Number(a.amount),s=a.amount),this.calculatorSummary.toCheck=Number(this.calculatorSummary.payAmount)-Number(this.calculatorSummary.totalDeposits),s}calculateDepositForPercent(a){let s=this.calculatorSummary.payAmount*a.amount/100;return a.maximum&&Number(a.maximum)<Number(s)&&(s=Number(a.maximum)),this.remainder=s>this.remainder?0:this.remainder-s,this.calculatorSummary.totalDeposits=this.calculatorSummary.totalDeposits+s,this.calculatorSummary.toCheck=this.calculatorSummary.payAmount-this.calculatorSummary.totalDeposits,s}getDirectDepositAccounts(){this.loading=!0,this.directDepositService.getDirectDepositAccounts().subscribe(a=>{this.accounts=JSON.parse(JSON.stringify(a)),this.accounts=this.directDepositService.translateColumns(this.accounts),this.calculateAccounts(),this.loading=!1},a=>{this.loading=!1,this.errMsg=a.errorMessage})}canDeactivate(a){return"/ess/direct-deposit"===a.url||!this.directDepositService.changed||this.directDepositService.showSaveDialog()}showDDHelp(){this.modalService.open(t.S)}}return p.\u0275fac=function(a){return new(a||p)(e.\u0275\u0275directiveInject(L.Vn),e.\u0275\u0275directiveInject(F.sK),e.\u0275\u0275directiveInject(R.A),e.\u0275\u0275directiveInject(P.FF),e.\u0275\u0275directiveInject(E.F0),e.\u0275\u0275directiveInject(M.FormBuilder))},p.\u0275cmp=e.\u0275\u0275defineComponent({type:p,selectors:[["phr-direct-deposit-test-calculator"]],hostBindings:function(a,s){1&a&&e.\u0275\u0275listener("showDDHelp",function(){return s.showDDHelp()},!1,e.\u0275\u0275resolveWindow)},inputs:{showHeader:"showHeader"},outputs:{onCancel:"onCancel"},decls:4,vars:2,consts:[["form",""],["class","container-fluid",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"row"],[1,"col-4"],[3,"label","control","disabled","valueChange"],[1,"col-6"],[1,"row","pl-3"],[4,"ngIf"],["class","card mb-3",4,"ngIf"],[1,"d-flex","justify-content-start","flex-wrap"],["type","button",1,"btn","btn-outline-primary","mr-3","mb-2",3,"click"],[1,"card","mb-3"],[1,"card-body"],[1,"col"],["showPaginator","true","itemsPerPage","10","rowHighlight","true","showViewCount","true",1,"w-100",3,"columns","data","loading"],[1,"container-fluid"],[3,"ngTemplateOutlet"]],template:function(a,s){1&a&&(e.\u0275\u0275template(0,D,30,31,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(2,b,3,1,"div",1),e.\u0275\u0275template(3,o,1,1,"ng-container",2)),2&a&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",s.showHeader),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!s.showHeader))},dependencies:[S.O5,S.tP,y.F,i.E,U.X,B.Q,F.X$,S.H9],encapsulation:2}),p})()},66438:(H,N,r)=>{r.d(N,{L:()=>e});const e={FIXED:"Fixed",PERCENT:"Percent",REMAINDER:"Remainder"}},54362:(H,N,r)=>{r.d(N,{S:()=>P});var e=r(94650),g=r(52885),t=r(42466),L=r(36895);function F(E,M){1&E&&(e.\u0275\u0275elementStart(0,"div",8)(1,"div")(2,"strong"),e.\u0275\u0275text(3,"Fixed:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4," Indicates the exact dollar amount to deposit, assuming that the net pay amount available is greater than or equal to that amount. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",9)(6,"strong"),e.\u0275\u0275text(7,"Percentage:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(8," Indicates the percentage amount of net pay to deposit into the account. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div")(10,"strong"),e.\u0275\u0275text(11,"Remainder:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(12," If this method is the only one used, your entire net pay amount will be deposited to this account. However, if combined with other methods, this method will ensure that the remainder, whatever is left after the previous methods are deposited, will be added to the designated account. If the paycheck is split between more than one bank account and method, use remainder for the last account in the list. "),e.\u0275\u0275elementEnd()())}function R(E,M){1&E&&(e.\u0275\u0275elementStart(0,"div",8)(1,"div")(2,"strong"),e.\u0275\u0275text(3,"Corregido:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4," indica el monto exacto en d\xf3lares para depositar, suponiendo que el monto de pago neto disponible es mayor o igual a ese monto. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",9)(6,"strong"),e.\u0275\u0275text(7,"Porcentaje:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(8," indica el monto porcentual del pago neto a depositar en la cuenta. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div")(10,"strong"),e.\u0275\u0275text(11,"Remanente:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(12," Si este m\xe9todo es el \xfanico utilizado, el monto total de su pago neto se depositar\xe1 en esta cuenta. Sin embargo, si se combina con otros m\xe9todos, este m\xe9todo asegurar\xe1 que el resto, lo que quede despu\xe9s de que se hayan depositado los m\xe9todos anteriores, se agregar\xe1 a la cuenta designada. Si el cheque de pago se divide entre m\xe1s de una cuenta bancaria y m\xe9todo, use el resto para la \xfaltima cuenta de la lista. "),e.\u0275\u0275elementEnd()())}let P=(()=>{class E{constructor(S,y){this.activeModal=S,this.translateService=y}}return E.\u0275fac=function(S){return new(S||E)(e.\u0275\u0275directiveInject(g.Kz),e.\u0275\u0275directiveInject(t.sK))},E.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["phr-direct-deposit-help-component"]],decls:14,vars:8,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"border-top"],[1,"d-flex","justify-content-center","py-3"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-body"],[1,"my-3"]],template:function(S,y){1&S&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h4",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275listener("click",function(){return y.activeModal.dismiss()}),e.\u0275\u0275elementStart(5,"span",3),e.\u0275\u0275text(6,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(7,F,13,0,"div",4),e.\u0275\u0275template(8,R,13,0,"div",4),e.\u0275\u0275elementStart(9,"div",5)(10,"div",6)(11,"button",7),e.\u0275\u0275listener("click",function(){return y.activeModal.close()}),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd()()()),2&S&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"MESSAGE.DIRECT_DEPOSIT.DEPOSIT_METHODS")," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf","en"===y.translateService.currentLang),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","es"===y.translateService.currentLang),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(13,6,"ACTION.OK_GOT_IT")," "))},dependencies:[L.O5,t.X$],encapsulation:2}),E})()},8920:(H,N,r)=>{r.r(N),r.d(N,{DirectDepositModule:()=>J});var e=r(34793),g=r(24006),t=r(44228),L=r(29415),F=r(42437),R=r(42341),P=r(70944),E=r(42466),M=r(52885),S=r(30567),y=r(87224),i=r(94650),U=r(43242),B=r(27111),V=r(90525),w=r(36895),D=r(34623),b=r(88452),o=r(75255);function l(v,x){1&v&&i.\u0275\u0275element(0,"phr-block-loader",4)}function p(v,x){if(1&v&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&v){const c=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,1,c.error.errMsg)," ")}}function u(v,x){if(1&v){const c=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",8)(1,"button",9),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(c);const C=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(C.openTermsAndConditionsModal())}),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"translate"),i.\u0275\u0275elementEnd()()}if(2&v){const c=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("disabled",c.isSaveButtonDisabled()),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(3,2,"ACTION.SAVE_CHANGES")," ")}}function a(v,x){if(1&v){const c=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div")(1,"phr-direct-deposit-table",6),i.\u0275\u0275listener("onRowClicked",function(C){i.\u0275\u0275restoreView(c);const T=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(T.handleRowClicked(C))})("onAddAccountClicked",function(){i.\u0275\u0275restoreView(c);const C=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(C.handleAddAccountClicked())})("onViewTestCalculator",function(){i.\u0275\u0275restoreView(c);const C=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(C.handleViewTestCalculator())}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(2,u,4,4,"div",7),i.\u0275\u0275elementEnd()}if(2&v){const c=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("loading",c.loading)("directDepositEnabled",c.directDepositEnabled)("accounts",c.accounts)("readonly",c.readonly)("forceBalance",c.forceBalance),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.directDepositEnabled&&!c.readonly)}}let s=(()=>{class v{constructor(c,h,C,T,K,Y,Q){this.directDepositService=c,this.router=h,this.breadcrumbService=C,this.translateService=T,this.configService=K,this.authService=Y,this.userStateService=Q,this.error={},this.showUI=!0,this.loading=!1,this.accounts=[],this.saving=!1,this.showSaved=!1,this.showSavedTimeout=5e3,this.accepted=!1,this.readonly=!1}get directDepositEnabled(){return this.directDepositService.directDepositEnabled(this.achSettings)}setBreadcrumbs(){this.breadcrumbService.setBreadcrumbItems([{url:"/ess/home"},{url:"/ess/direct-deposit"}])}handleViewTestCalculator(){this.router.navigateByUrl("/ess/direct-deposit/test-calculator")}ngOnInit(){this.userStateService.session$.pipe((0,y.P)()).subscribe(h=>{this.isProxyUser=!!h?.proxyInfo}),this.loading=!0,this.translateService.onLangChange.subscribe(h=>{this.setBreadcrumbs(),this.getDirectDepositAccounts()}),this.setBreadcrumbs(),this.okToNavAway=!1,this.accepted=!1,this.authService.loadSession().subscribe(h=>{this.employeeId=h.user.employeeId,this.clientId=h.clientId;const C=[this.directDepositService.getTermsAndConditions(),this.directDepositService.getEmployeeAchSettings(this.employeeId,this.clientId),this.authService.loadEmployee().pipe((0,y.P)())];(0,S.D)(C).subscribe(T=>{this.termsAndConditions=T[0],this.achSettings=T[1],this.forceBalance=T[2].forceBalance,this.directDepositEnabled?this.getDirectDepositAccounts(!this.directDepositService.changed):this.loading=!1},T=>{this.loading=!1,this.error={errMsg:T.errorMessage}})}),this.readonly=this.configService.config.directDepositReadOnly}handleRowClicked(c){const h=this.directDepositService.getAccountId(c);if(h>-1)return this.enableNavAway(),void this.router.navigate(["/ess/direct-deposit/"+h])}enableNavAway(){this.okToNavAway=!0}openTermsAndConditionsModal(){this.directDepositEnabled&&this.directDepositService.openTermsAndConditionsModal(this.termsAndConditions).then(c=>{c&&this.updateDirectDeposit()},c=>{console.log(c)})}updateDirectDeposit(){this.accepted=!1,this.saving=!0,this.directDepositService.postDirectDepositAccounts().subscribe(c=>{this.saving=!1,this.showSaved=!0,this.directDepositService.accounts=null,this.getDirectDepositAccounts(),this.accepted=!1;const h=this;setInterval(function(){h.closeShowSaved()},this.showSavedTimeout)},c=>{this.saving=!1})}closeShowSaved(){this.showSaved=!1}isShowSaved(){return this.showSaved}getDirectDepositAccounts(c){this.showUI=!1,this.directDepositService.getDirectDepositAccounts(c).subscribe(h=>{this.accounts=JSON.parse(JSON.stringify(h)),this.accounts=this.directDepositService.translateColumns(this.accounts),this.loading=!1,this.showUI=!0},h=>{this.loading=!1,this.error={errorType:h.errorType,errMsg:h.errorMessage},this.showUI="config"!==this.error.errorType})}rejectLocalChanges(){this.accounts=[],this.getDirectDepositAccounts()}handleAddAccountClicked(){this.enableNavAway(),this.okToNavAway&&this.router.navigateByUrl("/ess/direct-deposit/add")}canDeactivate(c){if("/ess/direct-deposit/test-calculator"===c.url||this.okToNavAway||!this.directDepositService.changed)return!0;const h=this.directDepositService.showSaveDialog();return h&&this.rejectLocalChanges(),h}isSaveButtonDisabled(){if(this.isProxyUser)return!0;let c=!this.directDepositService.changed&&this.saving;if(this.forceBalance){const h=this.directDepositService.percentageAmount()<100&&!this.directDepositService.isRemainder();c=this.directDepositService.percentageAmount()>100||h}else c=this.directDepositService.percentageAmount()>100;return c}}return v.\u0275fac=function(c){return new(c||v)(i.\u0275\u0275directiveInject(t.A),i.\u0275\u0275directiveInject(e.F0),i.\u0275\u0275directiveInject(U.Vn),i.\u0275\u0275directiveInject(E.sK),i.\u0275\u0275directiveInject(B.oV),i.\u0275\u0275directiveInject(B.e8),i.\u0275\u0275directiveInject(V.P))},v.\u0275cmp=i.\u0275\u0275defineComponent({type:v,selectors:[["ng-component"]],decls:7,vars:3,consts:[[1,"container-fluid"],["id","loader",4,"ngIf"],["class","alert alert-warning mx-2 p-2",4,"ngIf"],[4,"ngIf"],["id","loader"],[1,"alert","alert-warning","mx-2","p-2"],[3,"loading","directDepositEnabled","accounts","readonly","forceBalance","onRowClicked","onAddAccountClicked","onViewTestCalculator"],["class","d-flex justify-content-start flex-wrap",4,"ngIf"],[1,"d-flex","justify-content-start","flex-wrap"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(c,h){1&c&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275element(1,"phr-page-heading"),i.\u0275\u0275template(2,l,1,0,"phr-block-loader",1),i.\u0275\u0275template(3,p,3,3,"div",2),i.\u0275\u0275template(4,a,3,6,"div",3),i.\u0275\u0275elementStart(5,"div"),i.\u0275\u0275element(6,"br"),i.\u0275\u0275elementEnd()()),2&c&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",h.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",h.directDepositEnabled&&h.error.errMsg&&!h.saving),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!h.loading&&h.showUI))},dependencies:[w.O5,D.F,b.E,o.$,E.X$],encapsulation:2}),v})();var A=r(18547);function O(v,x){1&v&&i.\u0275\u0275element(0,"phr-block-loader")}function k(v,x){if(1&v){const c=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div")(1,"div",4)(2,"div",5)(3,"phr-direct-deposit-account-form",6),i.\u0275\u0275listener("onDeleteAccount",function(){i.\u0275\u0275restoreView(c);const C=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(C.handleDeleteAccount())})("onUpdateAccount",function(C){i.\u0275\u0275restoreView(c);const T=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(T.handleUpdateAccount(C))})("onAddAccount",function(C){i.\u0275\u0275restoreView(c);const T=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(T.handleAddAccount(C))})("onCancel",function(){i.\u0275\u0275restoreView(c);const C=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(C.handleCancel())}),i.\u0275\u0275elementEnd()()()()}if(2&v){const c=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275property("account",c.account)("editing",c.editing)}}let j=(()=>{class v{constructor(c,h,C,T,K){this.directDepositService=c,this.route=h,this.router=C,this.breadcrumbService=T,this.translateService=K,this.account={},this.saved=!1,this.loading=!1,this.validatingRouting=!1,this.editing=!1,this.amountDisabled=!0,this.maximumDisabled=!0,this.id=null}handleUpdateAccount(c){this.account=c,this.directDepositService.updateAccount(this.id,this.account),this.router.navigate(["/ess/direct-deposit"])}handleDeleteAccount(){this.directDepositService.openConfirmDelete().then(c=>{!c||(this.directDepositService.removeAccount(this.id),this.router.navigate(["/ess/direct-deposit"]))},console.error)}handleAddAccount(c){this.account=c,this.directDepositService.addAccount(this.account),this.router.navigate(["/ess/direct-deposit"])}setBreadcrumbs(c){this.breadcrumbService.setBreadcrumbItems([{url:"/ess/home"},{url:"/ess/direct-deposit"},{text:this.translateService.instant(`TITLE.${c?"EDIT":"ADD"}_ACCOUNT`)}])}ngOnInit(){const c=this.route.snapshot.params.id;this.translateService.onLangChange.subscribe(h=>{this.setBreadcrumbs(c)}),this.setBreadcrumbs(c),void 0!==c?(this.editing=!0,this.id=c,this.loadAccount(c)):this.loadAccounts()}loadAccounts(){this.loading=!0,this.directDepositService.getDirectDepositAccounts().subscribe(c=>{this.loading=!1},c=>{this.loading=!1})}loadAccount(c){this.loading=!0,this.directDepositService.getDirectDepositAccount(c).subscribe(h=>{this.account=h,this.loading=!1},h=>{this.loading=!1})}handleCancel(){this.router.navigateByUrl("/ess/direct-deposit")}}return v.\u0275fac=function(c){return new(c||v)(i.\u0275\u0275directiveInject(t.A),i.\u0275\u0275directiveInject(e.gz),i.\u0275\u0275directiveInject(e.F0),i.\u0275\u0275directiveInject(U.Vn),i.\u0275\u0275directiveInject(E.sK))},v.\u0275cmp=i.\u0275\u0275defineComponent({type:v,selectors:[["ng-component"]],decls:6,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[4,"ngIf"],[1,"row","justify-content-center"],[1,"col-xl-10","col-lg-12","col-md-12"],[3,"account","editing","onDeleteAccount","onUpdateAccount","onAddAccount","onCancel"]],template:function(c,h){1&c&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275element(1,"phr-page-heading"),i.\u0275\u0275elementStart(2,"div",1)(3,"div",2),i.\u0275\u0275template(4,O,1,0,"phr-block-loader",3),i.\u0275\u0275template(5,k,4,2,"div",3),i.\u0275\u0275elementEnd()()()),2&c&&(i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",h.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!h.loading))},dependencies:[w.O5,D.F,b.E,A.O],encapsulation:2}),v})();var W=r(864);let G=(()=>{class v{constructor(c,h){this.router=c,this.configService=h}canActivate(){return this.configService.config&&!this.configService.config.directDepositReadOnly||(this.router.navigate(["/ess/direct-deposit"]),!1)}}return v.\u0275fac=function(c){return new(c||v)(i.\u0275\u0275inject(e.F0),i.\u0275\u0275inject(B.oV))},v.\u0275prov=i.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v})();var X=r(6081);const z=[{path:"",component:s,canDeactivate:[W.I]},{path:"test-calculator",component:X.B,canDeactivate:[W.I]},{path:"add",component:j,canActivate:[G]},{path:":id",component:j,canActivate:[G]}];let $=(()=>{class v{}return v.\u0275fac=function(c){return new(c||v)},v.\u0275mod=i.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=i.\u0275\u0275defineInjector({imports:[e.Bz.forChild(z),e.Bz]}),v})(),J=(()=>{class v{}return v.\u0275fac=function(c){return new(c||v)},v.\u0275mod=i.\u0275\u0275defineNgModule({type:v}),v.\u0275inj=i.\u0275\u0275defineInjector({providers:[t.A,G],imports:[e.Bz,E.aw,w.ez,g.FormsModule,P.p,g.ReactiveFormsModule,L.j,F.L,M.IJ,R.z,$]}),v})()},44228:(H,N,r)=>{r.d(N,{A:()=>w});var e=r(34202);const g={Checking:{messageCode:"LABEL.CHECKING"},Savings:{messageCode:"LABEL.SAVINGS"},Percent:{messageCode:"LABEL.PERCENT"},Fixed:{messageCode:"LABEL.FIXED"},Remainder:{messageCode:"LABEL.REMAINDER"},Pending:{messageCode:"LABEL.PENDING"},Active:{messageCode:"LABEL.ACTIVE"}};var t=r(94650),L=r(42466);let F=(()=>{class D{constructor(){}}return D.\u0275fac=function(o){return new(o||D)},D.\u0275cmp=t.\u0275\u0275defineComponent({type:D,selectors:[["ng-component"]],decls:18,vars:12,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(o,l){1&o&&(t.\u0275\u0275elementStart(0,"div",0)(1,"h4",1),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",2),t.\u0275\u0275listener("click",function(){return l.parentModal.close("cancel")}),t.\u0275\u0275elementStart(5,"span",3),t.\u0275\u0275text(6,"\xd7"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(7,"div",4)(8,"p"),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"div",5)(12,"button",6),t.\u0275\u0275listener("click",function(){return l.parentModal.close("no")}),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"button",7),t.\u0275\u0275listener("click",function(){return l.parentModal.close("yes")}),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"MESSAGE.LEAVE_WITHOUT_SAVING")," "),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(10,6,"MESSAGE.DIRECT_DEPOSIT.YOU_ARE_ABOUT_TO_LEAVE_WITHOUT_SAVING")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(14,8,"ACTION.CANCEL")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(17,10,"ACTION.YES_I_WANT_TO_LEAVE")," "))},dependencies:[L.X$],encapsulation:2}),D})();var R=r(36895),P=r(24006);function E(D,b){if(1&D&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275element(2,"br"),t.\u0275\u0275elementEnd()),2&D){const o=b.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",o,"")}}let M=(()=>{class D{constructor(){this.accepted=!1,this.termsAndConditionsArr=[]}ngOnInit(){this.termsAndConditionsArr=this.termsAndConditions.terms.split("\n")}}return D.\u0275fac=function(o){return new(o||D)},D.\u0275cmp=t.\u0275\u0275defineComponent({type:D,selectors:[["ng-component"]],inputs:{termsAndConditions:"termsAndConditions",directDepositService:"directDepositService"},decls:24,vars:12,consts:[[1,""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngFor","ngForOf"],[1,"card","card-outline-primary","mb-3","text-center"],[1,"card-body"],[1,"custom-control","custom-control-inline","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"ngModel","ngModelChange"],[1,"custom-control-label"],[1,"custom-control-description"],["id","settingAcceptMessage"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(o,l){1&o&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h4",2),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"button",3),t.\u0275\u0275listener("click",function(){return l.parentModal.close(!1)}),t.\u0275\u0275elementStart(6,"span",4),t.\u0275\u0275text(7,"\xd7"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(8,"div",5),t.\u0275\u0275template(9,E,3,1,"span",6),t.\u0275\u0275elementStart(10,"div"),t.\u0275\u0275element(11,"br"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"div",7)(13,"div",8)(14,"label",9)(15,"input",10),t.\u0275\u0275listener("ngModelChange",function(u){return l.accepted=u}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(16,"span",11),t.\u0275\u0275elementStart(17,"span",12)(18,"span",13),t.\u0275\u0275text(19),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(21,"button",14),t.\u0275\u0275listener("click",function(){return l.parentModal.close(!0)}),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd()()()()()),2&o&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(4,6,"TITLE.TERMS_AND_CONDITIONS")," "),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngForOf",l.termsAndConditionsArr),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngModel",l.accepted),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(20,8,"LABEL.ACCEPT_TERMS_CONDITIONS")),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!l.directDepositService.validPercentage()||!l.accepted),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(23,10,"ACTION.SAVE_CHANGES")," "))},dependencies:[R.sg,P.CheckboxControlValueAccessor,P.NgControlStatus,P.NgModel,L.X$],encapsulation:2}),D})();var S=r(52885);let y=(()=>{class D{constructor(o){this.activeModal=o}}return D.\u0275fac=function(o){return new(o||D)(t.\u0275\u0275directiveInject(S.Kz))},D.\u0275cmp=t.\u0275\u0275defineComponent({type:D,selectors:[["ng-component"]],decls:18,vars:12,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(o,l){1&o&&(t.\u0275\u0275elementStart(0,"div",0)(1,"h4",1),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"button",2),t.\u0275\u0275listener("click",function(){return l.activeModal.close("cancel")}),t.\u0275\u0275elementStart(5,"span",3),t.\u0275\u0275text(6,"\xd7"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(7,"div",4)(8,"p"),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"div",5)(12,"button",6),t.\u0275\u0275listener("click",function(){return l.activeModal.close("cancel")}),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"button",7),t.\u0275\u0275listener("click",function(){return l.activeModal.close("remove")}),t.\u0275\u0275text(16),t.\u0275\u0275pipe(17,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,4,"MESSAGE.ARE_YOU_SURE")),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(10,6,"MESSAGE.DIRECT_DEPOSIT.ARE_YOU_SURE_REMOVE")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(14,8,"ACTION.CANCEL")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(17,10,"ACTION.REMOVE")," "))},dependencies:[L.X$],encapsulation:2}),D})();var i=r(66438),U=r(80529),B=r(27111),V=r(14927);let w=(()=>{class D{constructor(o,l,p,u,a){this.http=o,this.domainService=l,this.broadcastService=p,this.modalService=u,this.translateService=a,this.directDepositUrl=this.domainService.getEssApiPath()+"/direct-deposit/accounts",this.transitUrl=this.domainService.getEssApiPath()+"/direct-deposit/transit/",this.termsUrl=this.domainService.getEssApiPath()+"/direct-deposit/terms/",this.checksum=null,this.accounts=null,this.termsAndConditions=null,this.changed=!1,this.maxAccounts=10,this.calculatorAmount=0,this.broadcastService.on("clearCache").subscribe(()=>{this.clearCache()})}static fillStatusDescriptions(o){for(const l of o)this.fillStatusDescription(l)}static fillStatusDescription(o){switch(o.status){case"P":o.statusDescription="Pending";break;case"A":case"D":o.statusDescription="Active";break;case"I":o.statusDescription="Inactive"}}clearCache(){this.accounts=[],this.termsAndConditions=null}getEmployeeAchSettings(o,l){const p=`${this.domainService.getEssApiPath()}/clients/${l}/employees/${o}/direct-deposit/settings`;return new e.y(u=>{this.http.get(p,{withCredentials:!0}).subscribe(a=>{u.next(a),u.complete()},a=>{try{const s=JSON.parse(a.error);u.error(s)}catch{u.error({errorCode:1,errorMessage:"Server Error"})}})})}directDepositEnabled(o){return!!o&&!!(o&&"A"===o.achStatus||""===o.achStatus||void 0===o.achStatus)}getTransitInfo(o){return new e.y(l=>{this.http.get(this.transitUrl+o,{withCredentials:!0}).subscribe(p=>{l.next(p),l.complete()},p=>{try{const u=JSON.parse(p.error);l.error(u)}catch{l.error({errorCode:1,errorMessage:"Server Error"})}})})}remainderExists(){if(this.accounts){for(const o of this.accounts)if(o.depositMethod===i.L.REMAINDER)return!0;return!1}return!1}validPercentage(){let o=0;if(this.accounts){for(const l of this.accounts)l.depositMethod===i.L.PERCENT&&(o+=Number(l.amount));return!(o>100)}return!0}percentageAmount(){return this.accounts.reduce((o,l)=>(l?.depositMethod===i.L.PERCENT&&(o+=Number(l.amount)),o),0)}isValidAmount(){return 100===this.percentageAmount()||this.isRemainder()}isRemainder(){return this.accounts.some(o=>o.depositMethod===i.L.REMAINDER)}updateAccount(o,l){if(this.accounts){const p=[...this.accounts];p[o]=l,this.accounts=Array.from(p),this.changed=!0}}addAccount(o){return!(!this.accounts||(o.depositMethod!==i.L.REMAINDER&&o.depositMethod!==i.L.FIXED&&o.depositMethod!==i.L.PERCENT||this.remainderExists()?!(o.depositMethod===i.L.FIXED||o.depositMethod===i.L.PERCENT&&this.remainderExists())||(this.accounts.splice(this.accounts.length-2,0,o),this.changed=!0,0):(this.accounts.push(o),this.changed=!0,0)))}removeAccount(o){this.accounts&&(this.accounts.splice(o,1),this.changed=!0)}getAccountId(o){return this.accounts=this.translateColumns(this.accounts),this.accounts.findIndex(l=>Object.keys(o).every(p=>l[p]===o[p]))}rejectLocalChanges(){this.accounts=null,this.changed=!1}showSaveDialog(){return new Promise((o,l)=>{const p=this.modalService.open(F,{backdrop:"static",centered:!0});return p.componentInstance.parentModal=p,p.result.then(u=>{"yes"===u?(this.rejectLocalChanges(),o(!0)):o(!1)},u=>{o(!1)})})}openConfirmDelete(){return new Promise((o,l)=>{this.modalService.open(y,{backdrop:"static"}).result.then(p=>{"remove"===p&&o(!0),o(!1)},p=>{l(p)})})}openTermsAndConditionsModal(o=this.termsAndConditions){const l=this.modalService.open(M);return l.componentInstance.termsAndConditions=o,l.componentInstance.directDepositService=this,l.componentInstance.parentModal=l,l.result}postDirectDepositAccounts(){const o={checksum:this.checksum,accounts:this.accounts};for(const l of o.accounts)delete l.statusDescription;return new e.y(l=>{this.http.post(this.directDepositUrl,o,{withCredentials:!0}).subscribe(p=>{this.changed=!1,l.next(),l.complete()},p=>{try{const u=JSON.parse(p.error);l.error(u)}catch{l.error({errorCode:1,errorMessage:"Server Error"})}})})}getDirectDepositAccount(o){return new e.y(l=>{this.getDirectDepositAccounts().subscribe(p=>{const u=p[o];D.fillStatusDescription(u),l.next(u),l.complete()},p=>{l.error(p)})})}getDirectDepositAccounts(o){return new e.y(l=>{this.accounts&&!o?(l.next(this.accounts),l.complete()):this.http.get(this.directDepositUrl,{withCredentials:!0}).subscribe(p=>{p.configError?l.error({errorType:"config",errorMessage:"MESSAGE.DIRECT_DEPOSIT.ENTRIES_NOT_SUPPORTED"}):(this.accounts=p.accounts,D.fillStatusDescriptions(this.accounts),this.checksum=p.checksum,this.maxAccounts=p.maxAccounts,this.changed=!1,l.next(this.accounts),l.complete())},p=>{try{const u=JSON.parse(p.error);l.error(u)}catch{l.error({errorCode:1,errorMessage:"Server Error"})}})})}getTermsAndConditions(){return new e.y(o=>{this.termsAndConditions?(o.next(this.termsAndConditions),o.complete()):this.http.get(this.termsUrl,{withCredentials:!0}).subscribe(l=>{this.termsAndConditions=l,o.next(this.termsAndConditions),o.complete()},l=>{try{const p=JSON.parse(l.error);o.error(p)}catch{o.error({errorCode:1,errorMessage:"Server Error"})}})})}translateColumns(o){const l=[...o.map(p=>Object.assign({},{...p}))];for(let p=0;p<l.length;p++){const u=g[l[p].type];u&&(l[p].type=this.translateService.instant(u.messageCode));const a=g[l[p].depositMethod];a&&(l[p].depositMethodDescription=this.translateService.instant(a.messageCode));const s=g[l[p].statusDescription];s&&(l[p].statusDescription=this.translateService.instant(s.messageCode))}return l}}return D.\u0275fac=function(o){return new(o||D)(t.\u0275\u0275inject(U.eN),t.\u0275\u0275inject(B.NF),t.\u0275\u0275inject(V.BroadcastEventService),t.\u0275\u0275inject(S.FF),t.\u0275\u0275inject(L.sK))},D.\u0275prov=t.\u0275\u0275defineInjectable({token:D,factory:D.\u0275fac}),D})()}}]);