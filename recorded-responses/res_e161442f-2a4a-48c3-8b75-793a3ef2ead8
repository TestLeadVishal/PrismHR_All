"use strict";(self.webpackChunkprismhr_ess=self.webpackChunkprismhr_ess||[]).push([[1081],{81081:(O,f,t)=>{t.r(f),t.d(f,{AuthModule:()=>P});var g=t(36895),v=t(34202),c=t(59182),i=t(94650),a=t(34793),m=t(27111),S=t(3270);let u=(()=>{class e{constructor(o,l,d,r){this.router=o,this.authService=l,this.i18nService=d,this.domainService=r,this.ssoUrl="/auth/sso",this.oktaSsoUrl="/auth/identity",this.registerUrl="/auth/register",this.verifyEmailUrl="/auth/verify-email"}canActivate(o,l){const r=o.queryParams.lang,E=this.authService.hideRegisterBtn||"false"===o.queryParams.registration;return this.authService.setRedirectUrl(o.queryParams.redirectUrl),this.authService.setHideRegisterBtn(E),r&&this.i18nService.setAppLocateUsingLangKey(r),new v.y(h=>{const I=l.url.indexOf(this.ssoUrl)>-1||l.url.indexOf(this.oktaSsoUrl)>-1;this.domainService.loadPeo().subscribe(x=>{if(I)if(this.domainService.isUniversalLoginDisabled()&&l.url.indexOf(this.ssoUrl)>-1||!this.domainService.isOktaUniversalLoginDisabled()&&l.url.indexOf(this.oktaSsoUrl)>-1)h.next(!0),h.complete();else{const s=o.queryParams.sessionId;s||this.authService.redirectToLogin(),window.location.href=this.domainService.getUniversalSSOUrl(s,this.authService.getRedirectUrl())}else this.authService.loadSession().subscribe(s=>{if(s.user.type!==c.b.MANAGER&&s.user.type!==c.b.EMPLOYEE||!s.clientId||x.id!==s.peoId||s.mfaRequired)this.authService.logout().subscribe(),h.next(this.authRedirect(l)),h.complete();else{const j=this.router.createUrlTree([this.authService.getRedirectUrl()]);h.next(j),h.complete()}},s=>{this.authService.logout().subscribe(),h.next(this.authRedirect(l)),h.complete()})})})}authRedirect(o){if((o.url.includes(this.registerUrl)||o.url.includes(this.verifyEmailUrl))&&!this.domainService.isOktaUniversalLoginDisabled()||this.domainService.isUniversalLoginDisabled())return!0;{const l=this.i18nService.appLocale.code;let d=`${this.domainService.getUniversalLoginUrl()}/#${o.url.replace("/auth","")}`;return d?.includes("?")?d+=`&lang=${l}`:d+=`?lang=${l}`,this.authService.hideRegisterBtn&&(d+="&registration=false"),window.location.href=d,!1}}}return e.\u0275fac=function(o){return new(o||e)(i.\u0275\u0275inject(a.F0),i.\u0275\u0275inject(m.e8),i.\u0275\u0275inject(S.D),i.\u0275\u0275inject(m.NF))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var y=t(52663);function C(e,n){1&e&&(i.\u0275\u0275elementStart(0,"div",4),i.\u0275\u0275element(1,"phr-site-loader-indicator"),i.\u0275\u0275elementEnd())}let M=(()=>{class e{constructor(o,l,d){this.route=o,this.router=l,this.configService=d,this.loading=!0,this.document=document,this.isIE=!!this.document.documentMode}ngOnInit(){this.route.data.subscribe(o=>{this.loading=!1,this.router.url.indexOf("/auth/sso")<0&&this.setStyle()})}setStyle(){const o=document.getElementById("authContainer");this.configService.config.loginBackground?(o.style["background-image"]="url("+this.configService.config.loginBackground+")",o.style["background-attachment"]="fixed",o.style["background-repeat"]="no-repeat",o.style["background-position"]="center center",o.style["background-size"]="cover"):o.style["background-color"]=this.configService.config.bgColor||"#fff"}}return e.\u0275fac=function(o){return new(o||e)(i.\u0275\u0275directiveInject(a.gz),i.\u0275\u0275directiveInject(a.F0),i.\u0275\u0275directiveInject(m.oV))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],decls:5,vars:2,consts:[["class","container-fluid h-100",4,"ngIf"],["id","authContainer",1,"h-100","w-100","d-table",3,"hidden"],[1,"d-table-cell","align-middle"],[1,"flex-fill","d-block",2,"max-width","500px","margin","0 auto"],[1,"container-fluid","h-100"]],template:function(o,l){1&o&&(i.\u0275\u0275template(0,C,2,0,"div",0),i.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"div",3),i.\u0275\u0275element(4,"router-outlet"),i.\u0275\u0275elementEnd()()()),2&o&&(i.\u0275\u0275property("ngIf",l.loading),i.\u0275\u0275advance(1),i.\u0275\u0275property("hidden",l.loading))},dependencies:[a.lC,y.z,g.O5],encapsulation:2}),e})();var U=t(95255);let R=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[a.Bz.forChild([{path:"",component:M,resolve:{config:U.o},canActivate:[u],children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.all([t.e(8474),t.e(3585),t.e(2437),t.e(8592),t.e(1420)]).then(t.bind(t,86899)).then(n=>n.LoginModule)},{path:"logout",loadChildren:()=>t.e(3104).then(t.bind(t,3104)).then(n=>n.LogoutModule)},{path:"register",loadChildren:()=>Promise.all([t.e(8474),t.e(3585),t.e(2437),t.e(8592),t.e(8860)]).then(t.bind(t,16592)).then(n=>n.RegisterModule)},{path:"register-new-hire",loadChildren:()=>Promise.all([t.e(8474),t.e(3585),t.e(2437),t.e(8592),t.e(665)]).then(t.bind(t,77197)).then(n=>n.RegisterNewHireModule)},{path:"forgot-password",loadChildren:()=>t.e(4846).then(t.bind(t,24846)).then(n=>n.ForgotPasswordModule)},{path:"enter-nh-info",loadChildren:()=>Promise.all([t.e(8474),t.e(3585),t.e(2437),t.e(118),t.e(2326),t.e(1508),t.e(8592),t.e(3571)]).then(t.bind(t,73571)).then(n=>n.NewhireSsnDobFormModule)},{path:"forgot-username",loadChildren:()=>t.e(9816).then(t.bind(t,39816)).then(n=>n.ForgotUsernameModule)},{path:"reset-password",loadChildren:()=>Promise.all([t.e(8592),t.e(546)]).then(t.bind(t,546)).then(n=>n.ResetPasswordModule)},{path:"choose-client",loadChildren:()=>Promise.all([t.e(8474),t.e(3585),t.e(2437),t.e(8592),t.e(3129)]).then(t.bind(t,38934)).then(n=>n.ChooseClientModule)},{path:"expired-password",loadChildren:()=>Promise.all([t.e(8474),t.e(3585),t.e(2437),t.e(8592),t.e(306)]).then(t.bind(t,554)).then(n=>n.ExpiredPasswordModule)},{path:"sso",loadChildren:()=>t.e(5705).then(t.bind(t,85705)).then(n=>n.SsoModule)},{path:"identity",loadChildren:()=>t.e(4495).then(t.bind(t,54495)).then(n=>n.OktaSsoModule)},{path:"mfa-request-code",loadChildren:()=>t.e(8148).then(t.bind(t,78148)).then(n=>n.MfaRequestCodeModule)},{path:"mfa-enter-code",loadChildren:()=>t.e(2002).then(t.bind(t,52002)).then(n=>n.MfaEnterCodeModule)},{path:"enter-welcome-code",loadChildren:()=>Promise.all([t.e(8474),t.e(3585),t.e(2437),t.e(9152)]).then(t.bind(t,40283)).then(n=>n.EnterWelcomeCodeModule)},{path:"verify-email",loadChildren:()=>Promise.all([t.e(8474),t.e(3585),t.e(2437),t.e(8592),t.e(8353)]).then(t.bind(t,22465)).then(n=>n.VerifyEmailModule)},{path:"new-hire-error",loadChildren:()=>t.e(2182).then(t.bind(t,92182)).then(n=>n.NewHireErrorsModule)}]}]),a.Bz]}),e})();var A=t(29415);let P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({providers:[u],imports:[R,A.j,g.ez]}),e})()}}]);