"use strict";(self.webpackChunkprismhr_ess=self.webpackChunkprismhr_ess||[]).push([[1081],{81081:(O,g,t)=>{t.r(g),t.d(g,{AuthModule:()=>A});var m=t(69808),u=t(34202),l=t(5e3),a=t(74202),f=t(27111),v=t(3270);let c=(()=>{class e{constructor(o,i,d,r){this.router=o,this.authService=i,this.i18nService=d,this.domainService=r,this.ssoUrl="/auth/sso",this.oktaSsoUrl="/auth/identity"}canActivate(o,i){const r=o.queryParams.lang,P=this.authService.hideRegisterBtn||"false"===o.queryParams.registration;return this.authService.setRedirectUrl(o.queryParams.redirectUrl),this.authService.setHideRegisterBtn(P),r&&this.i18nService.setAppLocateUsingLangKey(r),new u.y(h=>{const I=i.url.indexOf(this.ssoUrl)>-1||i.url.indexOf(this.oktaSsoUrl)>-1;this.domainService.loadPeo().subscribe(x=>{if(I)if(this.domainService.isUniversalLoginDisabled()&&i.url.indexOf(this.ssoUrl)>-1||!this.domainService.isOktaUniversalLoginDisabled()&&i.url.indexOf(this.oktaSsoUrl)>-1)h.next(!0),h.complete();else{const s=o.queryParams.sessionId;s||this.authService.redirectToLogin(),window.location.href=this.domainService.getUniversalSSOUrl(s,this.authService.getRedirectUrl())}else this.authService.loadSession().subscribe(s=>{if("M"!==s.user.type&&"E"!==s.user.type||!s.clientId||x.id!==s.peoId||s.mfaRequired)this.authService.logout().subscribe(),h.next(this.authRedirect(i)),h.complete();else{const j=this.router.createUrlTree([this.authService.getRedirectUrl()]);h.next(j),h.complete()}},s=>{this.authService.logout().subscribe(),h.next(this.authRedirect(i)),h.complete()})})})}authRedirect(o){if(this.domainService.isUniversalLoginDisabled())return!0;{const i=this.i18nService.appLocale.code;let d=`${this.domainService.getUniversalLoginUrl()}/#${o.url.replace("/auth","")}`;return(null==d?void 0:d.includes("?"))?d+=`&lang=${i}`:d+=`?lang=${i}`,this.authService.hideRegisterBtn&&(d+="&registration=false"),window.location.href=d,!1}}}return e.\u0275fac=function(o){return new(o||e)(l.\u0275\u0275inject(a.F0),l.\u0275\u0275inject(f.e8),l.\u0275\u0275inject(v.D),l.\u0275\u0275inject(f.NF))},e.\u0275prov=l.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var S=t(52663);function C(e,n){1&e&&(l.\u0275\u0275elementStart(0,"div",4),l.\u0275\u0275element(1,"phr-site-loader-indicator"),l.\u0275\u0275elementEnd())}let y=(()=>{class e{constructor(o,i,d){this.route=o,this.router=i,this.configService=d,this.loading=!0,this.document=document,this.isIE=!!this.document.documentMode}ngOnInit(){this.route.data.subscribe(o=>{this.loading=!1,this.router.url.indexOf("/auth/sso")<0&&this.setStyle()})}setStyle(){const o=document.getElementById("authContainer");this.configService.config.loginBackground?(o.style["background-image"]="url("+this.configService.config.loginBackground+")",o.style["background-attachment"]="fixed",o.style["background-repeat"]="no-repeat",o.style["background-position"]="center center",o.style["background-size"]="cover"):o.style["background-color"]=this.configService.config.bgColor||"#fff"}}return e.\u0275fac=function(o){return new(o||e)(l.\u0275\u0275directiveInject(a.gz),l.\u0275\u0275directiveInject(a.F0),l.\u0275\u0275directiveInject(f.oV))},e.\u0275cmp=l.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],decls:5,vars:2,consts:[["class","container-fluid h-100",4,"ngIf"],["id","authContainer",1,"h-100","w-100","d-table",3,"hidden"],[1,"d-table-cell","align-middle"],[1,"flex-fill","d-block",2,"max-width","500px","margin","0 auto"],[1,"container-fluid","h-100"]],template:function(o,i){1&o&&(l.\u0275\u0275template(0,C,2,0,"div",0),l.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"div",3),l.\u0275\u0275element(4,"router-outlet"),l.\u0275\u0275elementEnd()()()),2&o&&(l.\u0275\u0275property("ngIf",i.loading),l.\u0275\u0275advance(1),l.\u0275\u0275property("hidden",i.loading))},directives:[m.O5,S.z,a.lC],encapsulation:2}),e})();var M=t(95255);let R=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=l.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=l.\u0275\u0275defineInjector({providers:[],imports:[[a.Bz.forChild([{path:"",component:y,resolve:{config:M.o},canActivate:[c],children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.all([t.e(7625),t.e(3585),t.e(2437),t.e(8592),t.e(1420)]).then(t.bind(t,86899)).then(n=>n.LoginModule)},{path:"logout",loadChildren:()=>t.e(3104).then(t.bind(t,3104)).then(n=>n.LogoutModule)},{path:"register",loadChildren:()=>Promise.all([t.e(7625),t.e(3585),t.e(2437),t.e(8592),t.e(8860)]).then(t.bind(t,16592)).then(n=>n.RegisterModule)},{path:"register-new-hire",loadChildren:()=>Promise.all([t.e(7625),t.e(3585),t.e(2437),t.e(8592),t.e(665)]).then(t.bind(t,77197)).then(n=>n.RegisterNewHireModule)},{path:"forgot-password",loadChildren:()=>t.e(4846).then(t.bind(t,24846)).then(n=>n.ForgotPasswordModule)},{path:"enter-nh-info",loadChildren:()=>Promise.all([t.e(7625),t.e(3585),t.e(2437),t.e(118),t.e(2326),t.e(4074),t.e(8592),t.e(3571)]).then(t.bind(t,73571)).then(n=>n.NewhireSsnDobFormModule)},{path:"forgot-username",loadChildren:()=>t.e(9816).then(t.bind(t,39816)).then(n=>n.ForgotUsernameModule)},{path:"reset-password",loadChildren:()=>Promise.all([t.e(8592),t.e(546)]).then(t.bind(t,546)).then(n=>n.ResetPasswordModule)},{path:"choose-client",loadChildren:()=>Promise.all([t.e(7625),t.e(3585),t.e(2437),t.e(8592),t.e(3129)]).then(t.bind(t,38934)).then(n=>n.ChooseClientModule)},{path:"expired-password",loadChildren:()=>Promise.all([t.e(7625),t.e(3585),t.e(2437),t.e(8592),t.e(306)]).then(t.bind(t,554)).then(n=>n.ExpiredPasswordModule)},{path:"sso",loadChildren:()=>t.e(5705).then(t.bind(t,85705)).then(n=>n.SsoModule)},{path:"identity",loadChildren:()=>t.e(4495).then(t.bind(t,54495)).then(n=>n.OktaSsoModule)},{path:"mfa-request-code",loadChildren:()=>t.e(8148).then(t.bind(t,78148)).then(n=>n.MfaRequestCodeModule)},{path:"mfa-enter-code",loadChildren:()=>t.e(2002).then(t.bind(t,52002)).then(n=>n.MfaEnterCodeModule)},{path:"enter-welcome-code",loadChildren:()=>Promise.all([t.e(7625),t.e(3585),t.e(2437),t.e(9152)]).then(t.bind(t,40283)).then(n=>n.EnterWelcomeCodeModule)},{path:"verify-email",loadChildren:()=>Promise.all([t.e(7625),t.e(3585),t.e(2437),t.e(8592),t.e(8353)]).then(t.bind(t,22465)).then(n=>n.VerifyEmailModule)},{path:"new-hire-error",loadChildren:()=>t.e(2182).then(t.bind(t,92182)).then(n=>n.NewHireErrorsModule)}]}])],a.Bz]}),e})();var U=t(29415);let A=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=l.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=l.\u0275\u0275defineInjector({providers:[c],imports:[[R,U.j,m.ez]]}),e})()}}]);