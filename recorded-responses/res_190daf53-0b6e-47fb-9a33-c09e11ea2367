"use strict";(self.webpackChunkprismhr_ess=self.webpackChunkprismhr_ess||[]).push([[1420],{86899:(I,u,o)=>{o.r(u),o.d(u,{LoginModule:()=>B});var a=o(93075),g=o(69808),l=o(74202),p=o(13707),s=o(42466);const h={1:{messageCode:"ERROR.SERVER_ERROR"},2:{messageCode:"VALIDATION.INVALID_CREDENTIALS"},3:{messageCode:"VALIDATION.PASSWORD_EXPIRED"},4:{messageCode:"VALIDATION.ACCOUNT_LOCKED"},5:{messageCode:"VALIDATION.ACCOUNT_NOT_ACTIVE"},6:{messageCode:"VALIDATION.ACCOUNT_WILL_LOCK"},7:{messageCode:"VALIDATION.YOU_DONT_HAVE_ACCESS_TO_COMPANY"},8:{messageCode:"VALIDATION.SYSTEM_EMAIL_IS_NOT_SET"}};var f=o(17489),e=o(5e3),S=o(27111),E=o(3270),O=o(91835),T=o(35385);function _(t,d){if(1&t&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275element(1,"img",23),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("src",n.templateConfig.loginLogo,e.\u0275\u0275sanitizeUrl)}}function A(t,d){if(1&t&&(e.\u0275\u0275elementStart(0,"div",24)(1,"div",25),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.templateConfig.loginMessage[n.locale])}}function x(t,d){if(1&t&&(e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.errMsg," ")}}function b(t,d){1&t&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275element(1,"phr-loader3"),e.\u0275\u0275elementEnd())}function M(t,d){1&t&&(e.\u0275\u0275elementStart(0,"a",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"ACTION.REGISTER")))}function N(t,d){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",33),e.\u0275\u0275listener("click",function(){const c=e.\u0275\u0275restoreView(n).$implicit;return e.\u0275\u0275nextContext(2).i18nService.setAppLocale(c)}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&t){const n=d.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.label," ")}}function y(t,d){if(1&t&&(e.\u0275\u0275elementStart(0,"div",28)(1,"small"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",29)(5,"button",30),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",31),e.\u0275\u0275template(8,N,2,1,"button",32),e.\u0275\u0275elementEnd()()()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,3,"LABEL.LANGUAGE")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",n.i18nService.appLocale.label," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.i18nService.languages)}}let D=(()=>{class t{constructor(n,i,m,c,r,v,C){this.router=n,this.authService=i,this.i18nService=m,this.domainService=c,this.translateService=r,this.route=v,this.configService=C,this.valid=!0,this.loading=!1}ngOnInit(){this.templateConfig=this.configService.config,this.enableSpanish=this.templateConfig.enableSpanish,this.authService.initRouteParameters()}login(n){this.loading=!0,this.errMsg=null,this.route.queryParams.subscribe(i=>{const m=(0,f.omit)(i,["ssoServiceId"]);this.authService.login(n.username,n.password,this.domainService.getPeoId(),this.i18nService.appLocale.code,m).subscribe(()=>{this.loading=!1,this.authService.loadSession().subscribe(c=>{if(this.authService.isMfaNeeded()){const r={queryParams:Object.assign({},i)};this.router.navigate(["/auth/mfa-request-code"],r)}else if(c.clientId)i.ssoServiceId?this.authService.getSsoUrl(i.ssoServiceId).subscribe(r=>{if(r){const v=r.includes("?")?"&":"?",C=Object.keys(m).map(L=>L+"="+m[L]).join("&");window.location.href=r+`${v}${C}`}else this.router.navigate([this.authService.getRedirectUrl()])}):this.router.navigate([this.authService.getRedirectUrl()]);else{const r={queryParams:Object.assign({},i)};this.router.navigate(["/auth/choose-client"],r)}})},c=>{this.loading=!1,this.valid=!1;const r=h[c.errorCode];r?(this.errMsg=this.translateService.instant(r.messageCode),3===c.errorCode&&this.router.navigate(["/auth/expired-password"],{queryParams:{username:n.username}})):this.errMsg=this.authService.emptyClientList?this.i18nService.getTranslateService().instant("VALIDATION.YOU_DONT_HAVE_ACCESS_TO_COMPANY"):this.i18nService.getTranslateService().instant("VALIDATION.INVALID_CREDENTIALS")})})}isShowLoginMessage(){return this.locale=this.i18nService.appLocale.code,this.templateConfig.loginMessage[this.locale]&&this.templateConfig.loginMessage[this.locale].length>0}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(l.F0),e.\u0275\u0275directiveInject(S.e8),e.\u0275\u0275directiveInject(E.D),e.\u0275\u0275directiveInject(S.NF),e.\u0275\u0275directiveInject(s.sK),e.\u0275\u0275directiveInject(l.gz),e.\u0275\u0275directiveInject(S.oV))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],decls:39,vars:25,consts:[[1,"card","opacity-9"],[1,"card-body",2,"flex","0 0 auto"],["class","mb-3",4,"ngIf"],[1,"loginForm",3,"ngSubmit"],["form","ngForm"],[1,"row","no-gutters"],[1,"col-12"],[1,"form-group"],["for","username"],[1,"input-group"],["id","username","name","username","type","text","tabindex","1","autofocus","","aria-describedby","basic-addon1","ngModel","","required","",1,"form-control",3,"change"],["id","password","name","password","type","password","tabindex","2","phrPasswordToggle","","aria-describedby","basic-addon1","ngModel","","required","",1,"form-control","clear-ms-input-icons",3,"change"],["class","card mb-3",4,"ngIf"],["class","text-danger mb-3 pl-3 error-border-left",4,"ngIf"],["type","submit","tabindex","3",1,"btn","btn-primary"],["class","ml-3","href","#/auth/register",4,"ngIf"],[1,"row","no-gutters","mt-3"],[1,"col-6","pr-2"],["routerLink","/auth/forgot-username","tabindex","5"],[1,"col-6","pl-2"],["routerLink","/auth/forgot-password","tabindex","6"],["class","card-footer text-muted",4,"ngIf"],[1,"mb-3"],[1,"w-100",3,"src"],[1,"card","mb-3"],[1,"p-1"],[1,"text-danger","mb-3","pl-3","error-border-left"],["href","#/auth/register",1,"ml-3"],[1,"card-footer","text-muted"],["ngbDropdown","","placement","bottom-right","container","body",1,"float-right","d-inline-block"],["id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-sm","btn-link"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"]],template:function(n,i){if(1&n){const m=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div"),e.\u0275\u0275template(3,_,2,1,"div",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"form",3,4),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(m);const r=e.\u0275\u0275reference(5);return i.login(r.value)}),e.\u0275\u0275elementStart(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",9)(13,"input",10),e.\u0275\u0275listener("change",function(r){return e.\u0275\u0275restoreView(m),e.\u0275\u0275reference(5).controls.username.setValue(r.target.value)}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(14,"div",7)(15,"label",8),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",9)(19,"input",11),e.\u0275\u0275listener("change",function(r){return e.\u0275\u0275restoreView(m),e.\u0275\u0275reference(5).controls.password.setValue(r.target.value)}),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(20,A,3,1,"div",12),e.\u0275\u0275template(21,x,2,1,"div",13),e.\u0275\u0275template(22,b,2,0,"div",2),e.\u0275\u0275elementStart(23,"div",5)(24,"div",6)(25,"button",14),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(28,M,3,3,"a",15),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",16)(30,"div",17)(31,"a",18),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",19)(35,"a",20),e.\u0275\u0275text(36),e.\u0275\u0275pipe(37,"translate"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(38,y,9,5,"div",21),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.templateConfig.loginLogo),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(11,15,"LABEL.USERNAME")," "),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("is-invalid",!i.valid),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,17,"LABEL.PASSWORD")," "),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("is-invalid",!i.valid),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isShowLoginMessage()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.errMsg&&!i.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.loading),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(27,19,"ACTION.LOG_IN")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!i.authService.hideRegisterBtn),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(33,21,"ACTION.FORGOT_USERNAME"),"?"),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(37,23,"ACTION.FORGOT_PASSWORD"),"?"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.enableSpanish))},directives:[g.O5,a.\u0275NgNoValidate,a.NgControlStatusGroup,a.NgForm,a.DefaultValueAccessor,a.NgControlStatus,a.NgModel,a.RequiredValidator,O.m,T.c,l.yS,p.jt,p.iD,p.Vi,g.sg],pipes:[s.X$],styles:[".clear-ms-input-icons[_ngcontent-%COMP%]::-ms-clear{display:none;width:0;height:0}.clear-ms-input-icons[_ngcontent-%COMP%]::-ms-reveal{display:none;width:0;height:0}"]}),t})();var P=o(21436),R=o(42437),V=o(29415),w=o(89670);let B=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({providers:[],imports:[[l.Bz.forChild([{path:"",component:D}]),g.ez,a.ReactiveFormsModule,a.FormsModule,p.IJ,s.aw,w.Z,R.L,P.D,V.j]]}),t})()},21985:(I,u,o)=>{o.d(u,{z:()=>p});var a=o(69808),g=o(13707),l=o(5e3);let p=(()=>{class s{}return s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=l.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=l.\u0275\u0275defineInjector({imports:[[a.ez,g.dT]]}),s})()},35385:(I,u,o)=>{o.d(u,{c:()=>g});var a=o(5e3);let g=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275cmp=a.\u0275\u0275defineComponent({type:l,selectors:[["phr-loader3"]],decls:5,vars:0,consts:[[1,"loader3"],[1,"color1","sd0"],[1,"color2","sd05"],[1,"color3","sd1"],[1,"color4","sd15"]],template:function(s,h){1&s&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275element(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),a.\u0275\u0275elementEnd())},encapsulation:2}),l})()}}]);