"use strict";(self.webpackChunkprismhr_ess=self.webpackChunkprismhr_ess||[]).push([[9055],{13895:(M,y,a)=>{a.d(y,{T:()=>P});var e=a(94650),h=a(17489),p=a(24006),i=a(74078),I=a(88228),f=a(72860),u=a(27111),C=a(36895),_=a(59253),t=a(83169),S=a(42466);function b(c,v){1&c&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&c&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"MESSAGE.DISABLE_WORK_EMAIL_FOR_TERMINATED")," "))}let P=(()=>{class c{constructor(r,l){this.fb=r,this.authService=l,this.contactInfoForm=this.fb.group({homePhone:["",null],cellPhone:["",null],personalEmail:["",p.Validators.compose([I.dN.email])],workEmail:["",p.Validators.compose([I.dN.email])],primaryEmail:["",null]}),this.employee={},this.onSave=new e.EventEmitter,this.primaryEmail=i.E_}ngOnInit(){this.fillForm(),this.subscribeToEmailChange()}ngOnChanges(r){r.employee&&this.fillForm()}ngOnDestroy(){this.emailChange.unsubscribe()}isValid(){return this.contactInfoForm.valid}handleSave(){this.onSave.emit(this.getUpdatedEmployee())}getUpdatedEmployee(){return this.employee.homePhone=(0,f.r)(this.contactInfoForm.value.homePhone),this.employee.cellPhone=(0,f.r)(this.contactInfoForm.value.cellPhone),this.employee.personalEmail=this.contactInfoForm.value.personalEmail,this.employee.workEmail=this.contactInfoForm.value.workEmail,this.employee.primaryEmail=this.contactInfoForm.value.primaryEmail,this.resetPaydayNotification(),this.employee}fillForm(){this.contactInfoForm.controls.homePhone.setValue(this.employee.homePhone),this.contactInfoForm.controls.cellPhone.setValue(this.employee.cellPhone),this.contactInfoForm.controls.personalEmail.setValue(this.employee.personalEmail),this.contactInfoForm.controls.workEmail.setValue(this.employee.workEmail),this.contactInfoForm.controls.primaryEmail.setValue(this.employee.primaryEmail),this.disableWorkEmail=this.authService.isTerminated}subscribeToEmailChange(){(0,h.isNil)(this.contactInfoForm)||(this.emailChange=this.contactInfoForm.valueChanges.subscribe(r=>{const{personalEmail:l,primaryEmail:E,workEmail:L}=r,O=(0,h.isEmpty)(l)&&E===i.E_.PERSONAL,A=(0,h.isEmpty)(L)&&E===i.E_.WORK;(O||A)&&this.contactInfoForm.get("primaryEmail").setValue(null)}))}resetPaydayNotification(){if(!this.employee.personalEmail&&this.employee.paydayNotify){const{paydayNotify:r}=this.employee;switch(r){case i.KV.both:this.employee.paydayNotify=this.employee.cellPhone?i.KV.text:i.KV.none;break;case i.KV.email:this.employee.paydayNotify=i.KV.none}}if(!this.employee.cellPhone&&this.employee.paydayNotify){const{paydayNotify:r}=this.employee;switch(r){case i.KV.both:this.employee.paydayNotify=this.employee.personalEmail?i.KV.email:i.KV.none;break;case i.KV.text:this.employee.paydayNotify=i.KV.none}}}}return c.\u0275fac=function(r){return new(r||c)(e.\u0275\u0275directiveInject(p.FormBuilder),e.\u0275\u0275directiveInject(u.e8))},c.\u0275cmp=e.\u0275\u0275defineComponent({type:c,selectors:[["phr-contact-info-form"]],inputs:{employee:"employee"},outputs:{onSave:"onSave"},features:[e.\u0275\u0275NgOnChangesFeature],decls:41,vars:43,consts:[[1,"contact-info-form",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","col-sm-12"],[1,"col-12","email-container"],[3,"label","control","boldLabel"],[1,"radio-input-group"],["type","radio","formControlName","primaryEmail","id","personal-email-radio-button",3,"value"],["for","personal-email-radio-button"],[1,"d-flex","flex-column"],[1,"radio-input-group","work-email-input-group","w-100"],["type","radio","formControlName","primaryEmail","id","work-email-radio-button",3,"value"],["for","work-email-radio-button",1,"work-email-label"],["class","terminated-employee-preferred",4,"ngIf"],[1,"col-12"],[3,"label","control","boldLabel","width"],[1,"terminated-employee-preferred"]],template:function(r,l){1&r&&(e.\u0275\u0275elementStart(0,"form",0),e.\u0275\u0275listener("ngSubmit",function(){return l.handleSave()}),e.\u0275\u0275elementStart(1,"div",1)(2,"div",2)(3,"h6"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"p"),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",1)(10,"div",3),e.\u0275\u0275element(11,"phr-control",4),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementStart(13,"div",5),e.\u0275\u0275element(14,"input",6),e.\u0275\u0275elementStart(15,"label",7),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"div",3),e.\u0275\u0275element(19,"phr-control",4),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275elementStart(21,"div",8)(22,"div",9),e.\u0275\u0275element(23,"input",10),e.\u0275\u0275elementStart(24,"label",11),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(27,b,3,3,"div",12),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(28,"div",2),e.\u0275\u0275element(29,"hr"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",2)(31,"h6"),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",1)(35,"div",13),e.\u0275\u0275element(36,"phr-phone-control",14),e.\u0275\u0275pipe(37,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",13),e.\u0275\u0275element(39,"phr-phone-control",14),e.\u0275\u0275pipe(40,"translate"),e.\u0275\u0275elementEnd()()()()()),2&r&&(e.\u0275\u0275property("formGroup",l.contactInfoForm),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,25,"LABEL.EMAIL")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,27,"MESSAGE.CONTACT_INFO_EMAIL")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(12,29,"LABEL.PERSONAL_EMAIL")),e.\u0275\u0275property("control",l.contactInfoForm.controls.personalEmail)("boldLabel",!0),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("value",l.primaryEmail.PERSONAL),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(17,31,"LABEL.USE_PREFERRED_EMAIL")),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(20,33,"LABEL.WORK_EMAIL")),e.\u0275\u0275property("control",l.contactInfoForm.controls.workEmail)("boldLabel",!0),e.\u0275\u0275advance(4),e.\u0275\u0275classProp("disabled",l.disableWorkEmail),e.\u0275\u0275propertyInterpolate("value",l.primaryEmail.WORK),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(26,35,"LABEL.USE_PREFERRED_EMAIL")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",l.disableWorkEmail),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(33,37,"LABEL.PHONE")),e.\u0275\u0275advance(4),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(37,39,"LABEL.HOME_PHONE")),e.\u0275\u0275property("control",l.contactInfoForm.controls.homePhone)("boldLabel",!0)("width","190px"),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("label",e.\u0275\u0275pipeBind1(40,41,"LABEL.CELL_PHONE")),e.\u0275\u0275property("control",l.contactInfoForm.controls.cellPhone)("boldLabel",!0)("width","190px"))},dependencies:[C.O5,p.\u0275NgNoValidate,p.DefaultValueAccessor,p.RadioControlValueAccessor,p.NgControlStatus,p.NgControlStatusGroup,p.FormGroupDirective,p.FormControlName,_.S,t.g,S.X$],styles:[".contact-info-form .terminated-employee-preferred{padding-left:40px}@media only screen and (max-width: 890px){.contact-info-form .terminated-employee-preferred{padding-left:0}.contact-info-form .work-email-input-group{padding-bottom:0!important}}\n"],encapsulation:2}),c})()},39055:(M,y,a)=>{a.r(y),a.d(y,{ContactInfoModule:()=>T});var e=a(34793),h=a(24006),g=a(86338),p=a(29415),i=a(42437),I=a(70944),f=a(42466),u=a(52885),C=a(36895),_=a(17489),t=a(94650);let S=(()=>{class n{constructor(o,m){this.activeModal=o,this.translateService=m}}return n.\u0275fac=function(o){return new(o||n)(t.\u0275\u0275directiveInject(u.Kz),t.\u0275\u0275directiveInject(f.sK))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],decls:8,vars:6,consts:[[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,m){1&o&&(t.\u0275\u0275elementStart(0,"div",0)(1,"p"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"div",1)(5,"button",2),t.\u0275\u0275listener("click",function(){return m.activeModal.close()}),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()()),2&o&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"MESSAGE.DISABLE_WORK_EMAIL_FOR_TERMINATED")),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,4,"ACTION.OK_GOT_IT")," "))},dependencies:[f.X$],encapsulation:2}),n})();var b=a(87224),P=a(43242),c=a(90525),v=a(34623),r=a(88452),l=a(13895);const E=["form"];function L(n,s){1&n&&t.\u0275\u0275element(0,"phr-block-loader",3)}function O(n,s){1&n&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275element(3,"i",10),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(2,1,"STATUS.SAVING"),"... "))}function A(n,s){if(1&n){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",11),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(o);const d=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(d.handleSave())}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}if(2&n){t.\u0275\u0275nextContext();const o=t.\u0275\u0275reference(4),m=t.\u0275\u0275nextContext();t.\u0275\u0275property("disabled",!o.isValid()||m.isProxyUser),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,2,"ACTION.SAVE")," ")}}function F(n,s){if(1&n){const o=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"div",4)(2,"div",5)(3,"phr-contact-info-form",6,7),t.\u0275\u0275listener("onSave",function(){t.\u0275\u0275restoreView(o);const d=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(d.handleSave())}),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(5,"div",8),t.\u0275\u0275template(6,O,4,3,"span",2),t.\u0275\u0275template(7,A,3,4,"button",9),t.\u0275\u0275elementEnd()()}if(2&n){const o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("employee",o.employee),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",o.saving),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!o.saving)}}const x=[{path:"",component:(()=>{class n{constructor(o,m,d,N,R){this.employeeService=o,this.breadcrumbService=m,this.translateService=d,this.modalService=N,this.userStateService=R,this.loading=!0,this.saving=!1,this.employee={}}handleSave(){this.saving=!0,this.employee=this.form.getUpdatedEmployee(),this.employeeService.postEmployee().subscribe(o=>{this.employee=o,this.saving=!1},o=>{(0,_.isString)(o)&&o.toLowerCase().indexOf("invalid")>-1&&this.modalService.open(S,{centered:!0,backdrop:"static"})},()=>{this.saving=!1})}setBreadcrumbs(){this.breadcrumbService.setBreadcrumbItems([{url:"/ess/home"},{url:"/ess/contact-info"}])}ngOnInit(){this.userStateService.session$.pipe((0,b.P)()).subscribe(o=>{this.isProxyUser=!!o?.proxyInfo}),this.translateService.onLangChange.subscribe(o=>{this.setBreadcrumbs()}),this.setBreadcrumbs(),this.loadEmployee()}loadEmployee(){this.loading=!0,this.employeeService.getEmployee(!0).subscribe(o=>{this.employee=o,this.loading=!1},o=>{this.loading=!1})}}return n.\u0275fac=function(o){return new(o||n)(t.\u0275\u0275directiveInject(g.G),t.\u0275\u0275directiveInject(P.Vn),t.\u0275\u0275directiveInject(f.sK),t.\u0275\u0275directiveInject(u.FF),t.\u0275\u0275directiveInject(c.P))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["ng-component"]],viewQuery:function(o,m){if(1&o&&t.\u0275\u0275viewQuery(E,5),2&o){let d;t.\u0275\u0275queryRefresh(d=t.\u0275\u0275loadQuery())&&(m.form=d.first)}},decls:4,vars:2,consts:[[1,"container-fluid"],["id","loader",4,"ngIf"],[4,"ngIf"],["id","loader"],[1,"card"],[1,"card-body"],[3,"employee","onSave"],["form",""],[1,"row","no-gutters","mt-3"],["type","button","id","save","class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"fas","fa-circle-notch","fa-spin"],["type","button","id","save",1,"btn","btn-primary",3,"disabled","click"]],template:function(o,m){1&o&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275element(1,"phr-page-heading"),t.\u0275\u0275template(2,L,1,0,"phr-block-loader",1),t.\u0275\u0275template(3,F,8,3,"div",2),t.\u0275\u0275elementEnd()),2&o&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",m.loading),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!m.loading))},dependencies:[C.O5,v.F,r.E,l.T,f.X$],encapsulation:2}),n})()}];let B=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[e.Bz.forChild(x),e.Bz]}),n})(),T=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({providers:[g.G],imports:[e.Bz,f.aw,C.ez,h.FormsModule,I.p,u.IJ,h.ReactiveFormsModule,p.j,i.L,B]}),n})()}}]);