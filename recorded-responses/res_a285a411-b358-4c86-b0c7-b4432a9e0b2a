"use strict";(self.webpackChunkprismhr_ess=self.webpackChunkprismhr_ess||[]).push([[4236],{11220:(R,I,o)=>{o.d(I,{g:()=>F});var t=o(94650),v=o(15439),f=o.n(v),E=o(6860),x=o(27111),D=o(79193),h=o(24006),u=o(36895),S=o(59253),C=o(57305),P=o(29785),O=o(42466);function e(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275element(1,"phr-dropdown-control",12),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()),2&i){const r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(2,5,"LABEL.GENDER_DESIGNATION")),t.\u0275\u0275property("showTooltip",!0)("tooltipText",t.\u0275\u0275pipeBind1(3,7,"MESSAGE.GENDER_DESIGNATION"))("options",r.genderDesignationOpts)("control",r.genderDesignation)}}function _(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275element(1,"phr-dropdown-control",9),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&i){const r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(2,3,"LABEL.PRONOUN")),t.\u0275\u0275property("options",r.pronounOpts)("control",r.pronoun)}}function b(i,p){if(1&i&&(t.\u0275\u0275element(0,"phr-dropdown-control",9),t.\u0275\u0275pipe(1,"translate")),2&i){const r=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(1,3,"LABEL.ETHNICITY")),t.\u0275\u0275property("options",r.employeeDropdownService.ethnicityOpts)("control",r.ethnicity)}}function y(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"h5",13),t.\u0275\u0275text(1,"Ethnicity"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"p",13),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()),2&i){const r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(r.ethnicityDisplayVal)}}function B(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275element(1,"phr-dropdown-control",9),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&i){const r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(2,3,"LABEL.TOBACCO_USER")),t.\u0275\u0275property("options",r.employeeDropdownService.yesNoOptions)("control",r.tobaccoUser)}}function M(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"div",14),t.\u0275\u0275element(1,"phr-dropdown-control",9),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&i){const r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(2,3,"LABEL.HANDICAPPED")),t.\u0275\u0275property("options",r.employeeDropdownService.handicappedOptions)("control",r.handicapped)}}function T(i,p){if(1&i&&(t.\u0275\u0275elementStart(0,"div",14),t.\u0275\u0275element(1,"phr-dropdown-control",9),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&i){const r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(2,3,"LABEL.BLIND")),t.\u0275\u0275property("options",r.employeeDropdownService.yesNoOptions)("control",r.blind)}}let F=(()=>{class i{constructor(r,l,c,g){this.configService=r,this.employeeDropdownService=l,this.cdRef=c,this.fb=g,this.personalInfoForm=this.fb.group({nickname:"",maritalStatus:"",dateMarried:"",tobaccoUser:!1,handicapped:"",blind:!1,genderDesignation:"",pronoun:"",ethnicity:""}),this.employee={},this.onSave=new t.EventEmitter,this.maxMarriedDate=f()().format("MM/DD/YYYY"),this.minMarriedDate=f()().subtract(117,"years").format("MM/DD/YYYY"),this.hideTobacco=!1,this.hideDisabled=!1,this.hideBlind=!1,this.hidePronoun=!0,this.ethnicityReadOnly=!0,this.hideGenderDesignation=!0,this.isValid=()=>this.personalInfoForm.valid,this.getUpdatedEmployee=()=>this.personalInfoForm.value}get blind(){return this.personalInfoForm.controls.blind}get handicapped(){return this.personalInfoForm.controls.handicapped}get tobaccoUser(){return this.personalInfoForm.controls.tobaccoUser}get dateMarried(){return this.personalInfoForm.controls.dateMarried}get maritalStatus(){return this.personalInfoForm.controls.maritalStatus}get nickname(){return this.personalInfoForm.controls.nickname}get pronoun(){return this.personalInfoForm.controls.pronoun}get genderDesignation(){return this.personalInfoForm.controls.genderDesignation}get ethnicity(){return this.personalInfoForm.controls.ethnicity}get ethnicityDisplayVal(){const r=this.employeeDropdownService.ethnicityOpts.find(l=>l.value===this.employee.ethnicity);return r?r.display:""}save(){this.onSave.emit(this.getUpdatedEmployee())}ngOnInit(){this.fillForm(),this.cdRef.detectChanges();const{hideTobacco:r,hideDisabled:l,hideBlind:c,ethnicityReadOnly:g,hideGenderDesignation:A,hidePronoun:L}=this.configService.config;this.hideTobacco=r,this.hideDisabled=l,this.hideBlind=c,this.ethnicityReadOnly=g,this.hideGenderDesignation=A,this.hidePronoun=L}ngOnChanges(r){(0,E.t$)(r.employee)&&(this.fillForm(),this.cdRef.detectChanges())}fillForm(){this.personalInfoForm.patchValue(this.employee)}}return i.\u0275fac=function(r){return new(r||i)(t.\u0275\u0275directiveInject(x.oV),t.\u0275\u0275directiveInject(D.I),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(h.FormBuilder))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["phr-personal-info-form"]],inputs:{employee:"employee",genderDesignationOpts:"genderDesignationOpts",pronounOpts:"pronounOpts"},outputs:{onSave:"onSave"},features:[t.\u0275\u0275NgOnChangesFeature],decls:22,vars:24,consts:[[1,"row","mt-3"],[1,"col"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],["class","col-12 col-md-4",4,"ngIf"],[1,"col-12","col-md-4"],[3,"label","options","control",4,"ngIf","ngIfElse"],["readonly",""],[3,"label","control"],[3,"label","options","control"],[3,"label","minDate","maxDate","required","control"],["class","col-md-4 col-12",4,"ngIf"],[3,"label","showTooltip","tooltipText","options","control"],[1,"read-only"],[1,"col-md-4","col-12"]],template:function(r,l){if(1&r&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"form",2),t.\u0275\u0275listener("ngSubmit",function(){return l.save()}),t.\u0275\u0275elementStart(3,"div",3),t.\u0275\u0275template(4,e,4,9,"div",4),t.\u0275\u0275template(5,_,3,5,"div",4),t.\u0275\u0275elementStart(6,"div",5),t.\u0275\u0275template(7,b,2,5,"phr-dropdown-control",6),t.\u0275\u0275template(8,y,4,1,"ng-template",null,7,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div",5),t.\u0275\u0275element(11,"phr-control",8),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"div",5),t.\u0275\u0275element(14,"phr-dropdown-control",9),t.\u0275\u0275pipe(15,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",5),t.\u0275\u0275element(17,"phr-date-control",10),t.\u0275\u0275pipe(18,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(19,B,3,5,"div",4),t.\u0275\u0275template(20,M,3,5,"div",11),t.\u0275\u0275template(21,T,3,5,"div",11),t.\u0275\u0275elementEnd()()()()),2&r){const c=t.\u0275\u0275reference(9);t.\u0275\u0275advance(2),t.\u0275\u0275property("formGroup",l.personalInfoForm),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!l.hideGenderDesignation),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!l.hidePronoun),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!l.ethnicityReadOnly)("ngIfElse",c),t.\u0275\u0275advance(4),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(12,18,"LABEL.NICKNAME")),t.\u0275\u0275property("control",l.nickname),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(15,20,"LABEL.MARITAL_STATUS")),t.\u0275\u0275property("options",l.employeeDropdownService.maritalStatusOptions)("control",l.maritalStatus),t.\u0275\u0275advance(3),t.\u0275\u0275propertyInterpolate("label",t.\u0275\u0275pipeBind1(18,22,"LABEL.DATE_MARRIED")),t.\u0275\u0275property("minDate",l.minMarriedDate)("maxDate",l.maxMarriedDate)("required",!1)("control",l.dateMarried),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!l.hideTobacco),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!l.hideDisabled),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!l.hideBlind)}},dependencies:[u.O5,h.\u0275NgNoValidate,h.NgControlStatusGroup,h.FormGroupDirective,S.S,C.T,P.Oz,O.X$],styles:["phr-personal-info-form phr-input-label label{font-weight:600}@media only screen and (min-width: 1200px){phr-personal-info-form .input-group{width:85%}}phr-personal-info-form .read-only{font-size:.9rem;word-wrap:break-word}phr-personal-info-form h5.read-only{font-weight:600;margin-top:2px}phr-personal-info-form p.read-only{margin-top:15px}\n"],encapsulation:2}),i})()},24236:(R,I,o)=>{o.r(I),o.d(I,{PersonalInfoModule:()=>j});var t=o(24006),v=o(34793),f=o(42466),E=o(52885),x=o(42437),D=o(29415),h=o(86338),u=o(36895),S=o(24096),C=o(36053),P=o(17489),O=o(87224),e=o(94650),_=o(27111),b=o(79193),y=o(43242),B=o(90525),M=o(88452),T=o(34623),F=o(31824),i=o(39591),p=o(11220);const r=["personalInfoForm"];function l(a,s){1&a&&e.\u0275\u0275element(0,"phr-block-loader",3)}function c(a,s){if(1&a&&(e.\u0275\u0275elementStart(0,"div",11)(1,"div")(2,"strong",22),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"span",23),e.\u0275\u0275element(6,"phr-tooltip",24),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"span",25),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"br"),e.\u0275\u0275elementEnd()),2&a){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(4,4,"LABEL.GENDER"),": "),e.\u0275\u0275advance(3),e.\u0275\u0275property("text",e.\u0275\u0275pipeBind1(7,6,"MESSAGE.GENDER"))("placement","right"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.employee.gender)}}function g(a,s){1&a&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275element(3,"i",26),e.\u0275\u0275elementEnd()),2&a&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,1,"STATUS.SAVING"),"... "))}function A(a,s){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const m=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(m.handleSave())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}if(2&a){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",n.isSaveDisabled),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"ACTION.SAVE")," ")}}function L(a,s){if(1&a){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",4)(5,"div",8),e.\u0275\u0275element(6,"phr-avatar",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",10)(8,"div",4)(9,"div",11)(10,"strong",12),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"span",13),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",11)(17,"strong",12),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"span",14),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(22,"br"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",4)(24,"div",11)(25,"strong",12),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"span",15),e.\u0275\u0275text(29),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"br"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,c,11,8,"div",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"phr-personal-info-form",17,18),e.\u0275\u0275listener("onSave",function(){e.\u0275\u0275restoreView(n);const m=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(m.handleSave())}),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(34,"div",19),e.\u0275\u0275template(35,g,4,3,"span",20),e.\u0275\u0275template(36,A,3,4,"button",21),e.\u0275\u0275elementEnd()()()}if(2&a){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("name",n.employee.firstName)("size",120)("imageUrl",n.employeeImageUrl),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(12,17,"LABEL.NAME"),":"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate3("",n.employee.firstName," ",n.employee.middleInitial," ",n.employee.lastName,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(19,19,"LABEL.BIRTHDATE"),":"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.employee.birthDate),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(27,21,"LABEL.AGE"),":"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.employee.age),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!n.hideGender),e.\u0275\u0275advance(1),e.\u0275\u0275property("employee",n.employee)("genderDesignationOpts",n.genderDesignationOpts)("pronounOpts",n.pronounOpts),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.saving),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n.saving)}}const N=[{path:"",component:(()=>{class a{constructor(n,d,m,V,K,W,z){this.configService=n,this.employeeService=d,this.employeeDropdownService=m,this.breadcrumbService=V,this.translateService=K,this.cdr=W,this.userStateService=z,this.loading=!1,this.saving=!1,this.hideGender=!1,this.employee={},this.genderDesignationOpts=[],this.pronounOpts=[],this._subscriptions$=new S.w}get isSaveDisabled(){const n=!(0,P.isNil)(this.personalInfoFormComponent?.personalInfoForm?.errors);return!this.personalInfoFormComponent?.personalInfoForm?.dirty||n||this.isProxyUser}handleSave(){this.saving=!0,this.employeeService.postEmployee({...this.employee,...this.personalInfoFormComponent.getUpdatedEmployee()}).subscribe(n=>{this.employee=n,this.saving=!1},()=>{this.saving=!1},()=>{this.personalInfoFormComponent.personalInfoForm.markAsPristine(),this.cdr.detectChanges()})}ngOnInit(){this.userStateService.session$.pipe((0,O.P)()).subscribe(n=>{this.isProxyUser=!!n?.proxyInfo}),this._subscriptions$.add(this.translateService.onLangChange.subscribe(()=>this.setBreadcrumbs())),this.setBreadcrumbs(),this.loadEmployee()}ngOnDestroy(){this._subscriptions$.unsubscribe()}setBreadcrumbs(){this.breadcrumbService.setBreadcrumbItems([{url:"/ess/home"},{url:"/ess/personal-info"}])}loadEmployee(){this.loading=!0,(0,C.aj)([this.employeeService.getEmployee(!0),this.employeeDropdownService.getGenderDesignationOpts(),this.employeeDropdownService.getPronounOpts()]).subscribe(([n,d,m])=>{this.employee=n,this.genderDesignationOpts=d,this.pronounOpts=m,this.loading=!1,this.hideGender=this.configService.config.hideGender},()=>{this.loading=!1},()=>{this.cdr.detectChanges()}),this.employeeService.getEmployeeImageUrl().subscribe(n=>{this.employeeImageUrl=n,this.cdr.detectChanges()})}}return a.\u0275fac=function(n){return new(n||a)(e.\u0275\u0275directiveInject(_.oV),e.\u0275\u0275directiveInject(h.G),e.\u0275\u0275directiveInject(b.I),e.\u0275\u0275directiveInject(y.Vn),e.\u0275\u0275directiveInject(f.sK),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(B.P))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["ng-component"]],viewQuery:function(n,d){if(1&n&&e.\u0275\u0275viewQuery(r,5),2&n){let m;e.\u0275\u0275queryRefresh(m=e.\u0275\u0275loadQuery())&&(d.personalInfoFormComponent=m.first)}},decls:4,vars:2,consts:[[1,"container-fluid"],["id","loader",4,"ngIf"],["class","row",4,"ngIf"],["id","loader"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"col-sm-12","col-md-3","col-xl-2","avatar-container"],[3,"name","size","imageUrl"],[1,"col-sm-12","col-md-9","col-xl-8"],[1,"col-sm-12","col-md-4","col-lg-4","d-flex","flex-column"],[1,"d-inline-block",2,"width","100px"],["id","name"],["id","birthDate"],["id","age"],["class","col-sm-12 col-md-4 col-lg-4 d-flex flex-column",4,"ngIf"],[3,"employee","genderDesignationOpts","pronounOpts","onSave"],["personalInfoForm",""],[1,"row","no-gutters","mt-3"],[4,"ngIf"],["type","button","id","saveButton","class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"d-inline-block"],[1,"mx-2"],[3,"text","placement"],["id","gender"],[1,"fas","fa-circle-notch","fa-spin"],["type","button","id","saveButton",1,"btn","btn-primary",3,"disabled","click"]],template:function(n,d){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"phr-page-heading"),e.\u0275\u0275template(2,l,1,0,"phr-block-loader",1),e.\u0275\u0275template(3,L,37,23,"div",2),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",d.loading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!d.loading))},dependencies:[u.O5,M.E,T.F,F.Z,i.K,p.g,f.X$],styles:["@media only screen and (max-width: 768px){.avatar-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:1rem 0 2rem}}@media only screen and (min-width: 1200px){.avatar-container[_ngcontent-%COMP%]{margin-left:1rem}}strong[_ngcontent-%COMP%]{margin-bottom:8px}"],changeDetection:0}),a})()}];let U=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[v.Bz.forChild(N),v.Bz]}),a})();var G=o(61354),w=o(21985);let j=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({providers:[h.G],imports:[v.Bz,f.aw,u.ez,t.FormsModule,E.IJ,t.ReactiveFormsModule,D.j,y.pk,x.L,G.R,U,w.z]}),a})()}}]);